<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Hexo fluid å…¨å±èƒŒæ™¯å›¾éšæ—¥å¤œæ¨¡å¼åˆ‡æ¢ä»¥åŠæ­£æ–‡åº•é¡µæ¯›ç»ç’ƒæ•ˆæœ | æ—ä¹‹ä»‹ | 4rozeN</title><meta name="author" content="4rozeN"><meta name="copyright" content="4rozeN"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="å®ç°èƒŒæ™¯å›¾å…¨å±æ•ˆæœ  è®¾ç½®èƒŒæ™¯å›¾ä¸ºå…¨å±æ•ˆæœï¼Œå¯ä»¥ä½¿ç”¨ fluid æä¾›çš„æ³¨å…¥ä»£ç åŠŸèƒ½ï¼Œå¯ä»¥å°†ä»£ç æ— ä¾µå…¥å¼åŠ å…¥åˆ°ä¸»é¢˜é‡Œã€‚  åœ¨æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª scripts ç›®å½•ï¼Œåœ¨ç›®å½•å†…æ–°å»ºï¼šinjector.js å»ºå¥½ä¹‹åï¼Œåšå®¢çš„æ ¹ç›®å½•å¤§è‡´å¦‚ä¸‹ï¼š 1234567891011121314â”œâ”€ğŸ“ .github&#x2F; â”œâ”€ğŸ“ scaffolds&#x2F; â”œâ”€ğŸ“ scripts&#x2F; â”œâ”€ğŸ“ source&#x2F; â”œâ”€ğŸ“">
<meta property="og:type" content="article">
<meta property="og:title" content="Hexo fluid å…¨å±èƒŒæ™¯å›¾éšæ—¥å¤œæ¨¡å¼åˆ‡æ¢ä»¥åŠæ­£æ–‡åº•é¡µæ¯›ç»ç’ƒæ•ˆæœ">
<meta property="og:url" content="https://4rozen.github.io/posts/60191">
<meta property="og:site_name" content="æ—ä¹‹ä»‹ | 4rozeN">
<meta property="og:description" content="å®ç°èƒŒæ™¯å›¾å…¨å±æ•ˆæœ  è®¾ç½®èƒŒæ™¯å›¾ä¸ºå…¨å±æ•ˆæœï¼Œå¯ä»¥ä½¿ç”¨ fluid æä¾›çš„æ³¨å…¥ä»£ç åŠŸèƒ½ï¼Œå¯ä»¥å°†ä»£ç æ— ä¾µå…¥å¼åŠ å…¥åˆ°ä¸»é¢˜é‡Œã€‚  åœ¨æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª scripts ç›®å½•ï¼Œåœ¨ç›®å½•å†…æ–°å»ºï¼šinjector.js å»ºå¥½ä¹‹åï¼Œåšå®¢çš„æ ¹ç›®å½•å¤§è‡´å¦‚ä¸‹ï¼š 1234567891011121314â”œâ”€ğŸ“ .github&#x2F; â”œâ”€ğŸ“ scaffolds&#x2F; â”œâ”€ğŸ“ scripts&#x2F; â”œâ”€ğŸ“ source&#x2F; â”œâ”€ğŸ“">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://ali-4rozen-oss.oss-cn-guangzhou.aliyuncs.com/blog/cover/Hexo/Hexo%E7%BE%8E%E5%8C%96.webp">
<meta property="article:published_time" content="2024-10-05T08:50:13.000Z">
<meta property="article:modified_time" content="2025-07-23T03:32:35.106Z">
<meta property="article:author" content="4rozeN">
<meta property="article:tag" content="ç¾åŒ–">
<meta property="article:tag" content="Hexo">
<meta property="article:tag" content="fluid">
<meta property="article:tag" content="æ—¥å¤œåˆ‡æ¢èƒŒæ™¯">
<meta property="article:tag" content="CSS">
<meta property="article:tag" content="JavaScript">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://ali-4rozen-oss.oss-cn-guangzhou.aliyuncs.com/blog/cover/Hexo/Hexo%E7%BE%8E%E5%8C%96.webp"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Hexo fluid å…¨å±èƒŒæ™¯å›¾éšæ—¥å¤œæ¨¡å¼åˆ‡æ¢ä»¥åŠæ­£æ–‡åº•é¡µæ¯›ç»ç’ƒæ•ˆæœ",
  "url": "https://4rozen.github.io/posts/60191",
  "image": "https://ali-4rozen-oss.oss-cn-guangzhou.aliyuncs.com/blog/cover/Hexo/Hexo%E7%BE%8E%E5%8C%96.webp",
  "datePublished": "2024-10-05T08:50:13.000Z",
  "dateModified": "2025-07-23T03:32:35.106Z",
  "author": [
    {
      "@type": "Person",
      "name": "4rozeN",
      "url": "https://4rozen.github.io/"
    }
  ]
}</script><link rel="shortcut icon" href="https://ali-4rozen-oss.oss-cn-guangzhou.aliyuncs.com/blog/ico/favicon.ico"><link rel="canonical" href="https://4rozen.github.io/posts/60191"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="ggjgSh07y0_dbMruvoZhis-cgZn-t6ujdG7N1z7ZA88"/><meta name="msvalidate.01" content="F0E34077A7291AC38724F6A3804B1B29"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.7.2/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!true && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          const hour = new Date().getHours()
          const isNight = hour <= 6 || hour >= 18
          if (theme === undefined) isNight ? activateDarkMode() : activateLightMode()
          else theme === 'light' ? activateLightMode() : activateDarkMode()
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"æœªæ‰¾åˆ°ç¬¦åˆæ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}","hits_stats":"å…±æ‰¾åˆ° ${hits} ç¯‡æ–‡ç« "}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"ç¹","msgToSimplifiedChinese":"ç®€"},
  highlight: undefined,
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶å¤±è´¥',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'å¤©',
  dateSuffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: {"limitCount":100,"languages":{"author":"ä½œè€…: 4rozeN","link":"é“¾æ¥: ","source":"æ¥æº: æ—ä¹‹ä»‹ | 4rozeN","info":"è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"å·²åˆ‡æ¢ä¸ºç¹ä½“ä¸­æ–‡","cht_to_chs":"å·²åˆ‡æ¢ä¸ºç®€ä½“ä¸­æ–‡","day_to_night":"å·²åˆ‡æ¢ä¸ºæ·±è‰²æ¨¡å¼","night_to_day":"å·²åˆ‡æ¢ä¸ºæµ…è‰²æ¨¡å¼","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'åŠ è½½æ›´å¤š'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: true,
  isAnchor: true,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Hexo fluid å…¨å±èƒŒæ™¯å›¾éšæ—¥å¤œæ¨¡å¼åˆ‡æ¢ä»¥åŠæ­£æ–‡åº•é¡µæ¯›ç»ç’ƒæ•ˆæœ',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="referrer" content="no-referrer" /><link href="https://fonts.googleapis.cn/css2?family=Fira+Code:wght@300..700&family=Noto+Sans+SC:wght@100..900&family=Noto+Serif+SC:wght@200..900&display=swap" rel="stylesheet"><link rel="stylesheet" href="/css/figure.css"><link rel="stylesheet" href="/css/butterfly.css"><link rel="stylesheet" href="/css/ripple-toggle.css"><link rel="stylesheet" href="/css/rightmenu.css"><!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-shiki-plugin@latest/lib/codeblock.css">
<style>:root{--hl-color:#abb2bf;--hl-bg:#282c34;--hltools-bg:#21252b;--hltools-color:#bbbbbc;--hlnumber-bg:#282c34;--hlnumber-color:#495162;--hlscrollbar-bg:#373c47;--hlexpand-bg:linear-gradient(180deg,rgba(40,44,52,0.1),rgba(40,44,52,0.9))}</style>
    <style>
    .code-expand-btn:not(.expand-done) ~ div.codeblock,
    .code-expand-btn:not(.expand-done) ~ * div.codeblock {
      overflow: hidden;
      height: 360px;
    }
    </style>
  <!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/rss2.xml" title="æ—ä¹‹ä»‹ | 4rozeN" type="application/rss+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src= "https://ali-4rozen-oss.oss-cn-guangzhou.aliyuncs.com/blog/loading/loading.gif" data-lazy-src="https://ali-4rozen-oss.oss-cn-guangzhou.aliyuncs.com/blog/avatar/avatar.jpg" onerror="this.onerror=null;this.src='https://ali-4rozen-oss.oss-cn-guangzhou.aliyuncs.com/blog/avatar/emo.webp'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">30</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">48</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">7</div></a></div><div class="menus_items"><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-book"></i><span> æ–‡ç« </span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å…¨éƒ¨æ–‡ç« </span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»åˆ—è¡¨</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾åˆ—è¡¨</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fas fa-link"></i><span> å‹é“¾</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-user"></i><span> ä¸ªäºº</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image: url(https://ali-4rozen-oss.oss-cn-guangzhou.aliyuncs.com/blog/cover/Hexo/Hexo%E7%BE%8E%E5%8C%96.webp);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src= "https://ali-4rozen-oss.oss-cn-guangzhou.aliyuncs.com/blog/loading/loading.gif" data-lazy-src="/img/nav/mySVG.svg" alt="Logo"></a><a class="nav-page-title" href="/"><span class="site-name">Hexo fluid å…¨å±èƒŒæ™¯å›¾éšæ—¥å¤œæ¨¡å¼åˆ‡æ¢ä»¥åŠæ­£æ–‡åº•é¡µæ¯›ç»ç’ƒæ•ˆæœ</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> æœç´¢</span></span></div><div class="menus_items"><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-book"></i><span> æ–‡ç« </span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å…¨éƒ¨æ–‡ç« </span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»åˆ—è¡¨</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾åˆ—è¡¨</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fas fa-link"></i><span> å‹é“¾</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-user"></i><span> ä¸ªäºº</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Hexo fluid å…¨å±èƒŒæ™¯å›¾éšæ—¥å¤œæ¨¡å¼åˆ‡æ¢ä»¥åŠæ­£æ–‡åº•é¡µæ¯›ç»ç’ƒæ•ˆæœ</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2024-10-05T08:50:13.000Z" title="å‘è¡¨äº 2024-10-05 16:50:13">2024-10-05</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2025-07-23T03:32:35.106Z" title="æ›´æ–°äº 2025-07-23 11:32:35">2025-07-23</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Hexo/">Hexo</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">æ€»å­—æ•°:</span><span class="word-count">3.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>12åˆ†é’Ÿ</span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><div id="post-outdate-notice" data="{&quot;limitDay&quot;:15,&quot;messagePrev&quot;:&quot;æ–‡ç« æœ€åç¼–è¾‘äº&quot;,&quot;messageNext&quot;:&quot;å¤©å‰ã€‚&quot;,&quot;postUpdate&quot;:&quot;2025-07-23 11:32:35&quot;}" hidden></div><link rel="stylesheet external nofollow noreferrer" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/hint.css/2.7.0/hint.min.css"><meta name="referrer" content="no-referrer">
<h2 id="å®ç°èƒŒæ™¯å›¾å…¨å±æ•ˆæœ"><a class="markdownIt-Anchor" href="#å®ç°èƒŒæ™¯å›¾å…¨å±æ•ˆæœ"></a> å®ç°èƒŒæ™¯å›¾å…¨å±æ•ˆæœ</h2>
<blockquote>
<p>è®¾ç½®èƒŒæ™¯å›¾ä¸ºå…¨å±æ•ˆæœï¼Œå¯ä»¥ä½¿ç”¨ fluid æä¾›çš„<a target="_blank" rel="noopener external nofollow noreferrer" href="https://fluid-dev.github.io/hexo-fluid-docs/advance/#fluid-%E6%B3%A8%E5%85%A5%E4%BB%A3%E7%A0%81">æ³¨å…¥ä»£ç åŠŸèƒ½</a>ï¼Œå¯ä»¥å°†ä»£ç æ— ä¾µå…¥å¼åŠ å…¥åˆ°ä¸»é¢˜é‡Œã€‚</p>
</blockquote>
<p>åœ¨æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª <code>scripts</code> ç›®å½•ï¼Œåœ¨ç›®å½•å†…æ–°å»ºï¼š<code>injector.js</code></p>
<p>å»ºå¥½ä¹‹åï¼Œåšå®¢çš„æ ¹ç›®å½•å¤§è‡´å¦‚ä¸‹ï¼š</p>
<figure class="shiki"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color: #D4D4D4">â”œâ”€ğŸ“ .github/</span></span>
<span class="line"><span style="color: #D4D4D4">â”œâ”€ğŸ“ scaffolds/</span></span>
<span class="line"><span style="color: #D4D4D4">â”œâ”€ğŸ“ scripts/</span></span>
<span class="line"><span style="color: #D4D4D4">â”œâ”€ğŸ“ source/</span></span>
<span class="line"><span style="color: #D4D4D4">â”œâ”€ğŸ“ test/</span></span>
<span class="line"><span style="color: #D4D4D4">â”œâ”€ğŸ“ themes/</span></span>
<span class="line"><span style="color: #D4D4D4">â”œâ”€ğŸ“„ _config.fluid.yml</span></span>
<span class="line"><span style="color: #D4D4D4">â”œâ”€ğŸ“„ _config.landscape.yml</span></span>
<span class="line"><span style="color: #D4D4D4">â”œâ”€ğŸ“„ _config.yml</span></span>
<span class="line"><span style="color: #D4D4D4">â”œâ”€ğŸ“„ .gitignore</span></span>
<span class="line"><span style="color: #D4D4D4">â”œâ”€ğŸ“„ package-lock.json</span></span>
<span class="line"><span style="color: #D4D4D4">â”œâ”€ğŸ“„ package.json</span></span>
<span class="line"><span style="color: #D4D4D4">â”œâ”€ğŸ“„ template.md</span></span>
<span class="line"><span style="color: #D4D4D4">â””â”€ğŸ“„ yarn.lock</span></span></code></pre></div></div></figure>
<div class="note warning flat"><p>âš ï¸æ³¨æ„ï¼š<br>
è¯¥æ–‡ä»¶ä¸éœ€è¦åœ¨<code>_config.fluid.yml</code> ä¸­è¿›è¡Œå¼•ç”¨ï¼Œ<strong>hexo è‡ªåŠ¨è°ƒç”¨æ‰§è¡Œé‡Œé¢çš„ js æ–‡ä»¶</strong></p>
</div>
<figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> { </span><span style="color: #9CDCFE">root</span><span style="color: #D4D4D4">: </span><span style="color: #4FC1FF">siteRoot</span><span style="color: #D4D4D4"> = </span><span style="color: #CE9178">"/"</span><span style="color: #D4D4D4"> } = </span><span style="color: #9CDCFE">hexo</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">config</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #9CDCFE">hexo</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">extend</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">injector</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">register</span><span style="color: #D4D4D4">(</span><span style="color: #CE9178">"body_begin"</span><span style="color: #D4D4D4">, </span><span style="color: #CE9178">`&lt;div id="web_bg"&gt;&lt;/div&gt;`</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #9CDCFE">hexo</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">extend</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">injector</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">register</span><span style="color: #D4D4D4">(</span><span style="color: #CE9178">"body_end"</span><span style="color: #D4D4D4">,</span><span style="color: #CE9178">`&lt;script src="</span><span style="color: #569CD6">${</span><span style="color: #9CDCFE">siteRoot</span><span style="color: #569CD6">}</span><span style="color: #CE9178">js/backgroundize.js"&gt;&lt;/script&gt;`</span><span style="color: #D4D4D4">);</span></span></code></pre></div></div></figure>
<p>æ–‡ä»¶åå…¶å®å¯ä»¥éšæ„ï¼Œä½†æ¥ä¸‹æ¥çš„ js æ–‡ä»¶åè¯·ä¸ <code>src="${siteRoot}js/backgroundize.js"</code> ä¸­ä¿æŒä¸€è‡´ã€‚</p>
<p>å¦‚æœä½ <strong>ä¸éœ€è¦</strong>èƒŒæ™¯å›¾éšæ—¥å¤œä¸»é¢˜åˆ‡æ¢è€Œåˆ‡æ¢çš„è¯ï¼Œé‚£ä¹ˆä½ åªéœ€è¦æ–°å»º <code>backgroundize.js</code> å¹¶å†™å…¥ä»¥ä¸‹ä»£ç å³å¯ï¼š(<code>source\js\backgroundize.js</code>)</p>
<figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color: #9CDCFE">document</span></span>
<span class="line"><span style="color: #D4D4D4">  .</span><span style="color: #DCDCAA">querySelector</span><span style="color: #D4D4D4">(</span><span style="color: #CE9178">'#web_bg'</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #D4D4D4">  .</span><span style="color: #DCDCAA">setAttribute</span><span style="color: #D4D4D4">(</span><span style="color: #CE9178">'style'</span><span style="color: #D4D4D4">, </span><span style="color: #CE9178">`background-image: </span><span style="color: #569CD6">${</span><span style="color: #9CDCFE">document</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">querySelector</span><span style="color: #D4D4D4">(</span><span style="color: #CE9178">'.banner'</span><span style="color: #D4D4D4">).</span><span style="color: #9CDCFE">style</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">background</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">split</span><span style="color: #D4D4D4">(</span><span style="color: #CE9178">' '</span><span style="color: #D4D4D4">)[</span><span style="color: #B5CEA8">0</span><span style="color: #D4D4D4">]</span><span style="color: #569CD6">}</span><span style="color: #CE9178">;position: fixed;width: 100%;height: 100%;z-index: -1;background-size: cover;`</span><span style="color: #D4D4D4">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #9CDCFE">document</span></span>
<span class="line"><span style="color: #D4D4D4">  .</span><span style="color: #DCDCAA">querySelector</span><span style="color: #D4D4D4">(</span><span style="color: #CE9178">"#banner"</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #D4D4D4">  .</span><span style="color: #DCDCAA">setAttribute</span><span style="color: #D4D4D4">(</span><span style="color: #CE9178">'style'</span><span style="color: #D4D4D4">, </span><span style="color: #CE9178">'background-image: url()'</span><span style="color: #D4D4D4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #9CDCFE">document</span></span>
<span class="line"><span style="color: #D4D4D4">  .</span><span style="color: #DCDCAA">querySelector</span><span style="color: #D4D4D4">(</span><span style="color: #CE9178">"#banner .mask"</span><span style="color: #D4D4D4">)</span></span>
<span class="line"><span style="color: #D4D4D4">  .</span><span style="color: #DCDCAA">setAttribute</span><span style="color: #D4D4D4">(</span><span style="color: #CE9178">'style'</span><span style="color: #D4D4D4">, </span><span style="color: #CE9178">'background-color:rgba(0,0,0,0)'</span><span style="color: #D4D4D4">)</span></span></code></pre></div></div></figure>
<p>ç¬¬ä¸€æ®µä»£ç çš„åŠŸèƒ½æ˜¯ï¼šæ‰¾åˆ°æ ¹èŠ‚ç‚¹ï¼Œåœ¨é¡µé¢çš„ <code>body</code> å¼€å§‹éƒ¨åˆ†æ³¨å…¥ä¸€ä¸ª <code>div</code> å…ƒç´ ï¼Œå…¶ <code>id</code> ä¸º <code>web_bg</code>ï¼Œä½œä¸ºèƒŒæ™¯å›¾åƒçš„å®¹å™¨ï¼Œç„¶ååœ¨é¡µé¢çš„ <code>body</code> ç»“æŸéƒ¨åˆ†æ³¨å…¥ js æ–‡ä»¶ï¼ˆ<code>backgroundize.js</code>ï¼‰è¿›è¡Œå¼•ç”¨ï¼Œç¡®ä¿è„šæœ¬åœ¨é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œã€‚</p>
<p>ç¬¬äºŒæ®µä»£ç çš„åŠŸèƒ½æ˜¯ï¼šæå–ç°æœ‰<code>.banner</code> å…ƒç´ çš„å›¾åƒ URLï¼Œå°†æå–åˆ°çš„å›¾åƒ URL åº”ç”¨åˆ° <code>web_bg</code> å…ƒç´ ä¸Šï¼ŒåŒæ—¶è®¾ç½®èƒŒæ™¯æ ·å¼ä¸º <code>fixed</code> å›ºå®šå®šä½ã€è¦†ç›–æ•´ä¸ªé¡µé¢ã€<code>z-index: -1</code> å¹¶ç½®äºå…¶ä»–å…ƒç´ ä¹‹ä¸‹ã€‚</p>
<p>è‡³æ­¤ï¼ŒèƒŒæ™¯å›¾å°±å…¨å±ä¸”å›ºå®šäº†ã€‚</p>
<h2 id="å®ç°èƒŒæ™¯å›¾éšæ—¥å¤œä¸»é¢˜åˆ‡æ¢æ•ˆæœ"><a class="markdownIt-Anchor" href="#å®ç°èƒŒæ™¯å›¾éšæ—¥å¤œä¸»é¢˜åˆ‡æ¢æ•ˆæœ"></a> å®ç°èƒŒæ™¯å›¾éšæ—¥å¤œä¸»é¢˜åˆ‡æ¢æ•ˆæœ</h2>
<p>çœ‹åˆ°è¿™ä¹Ÿå°±è¯´æ˜ä½ éœ€è¦æ ‡é¢˜æ‰€è¿°åŠŸèƒ½ã€‚é‚£ä¹ˆè¯·å°†<code>_config.fluid.yml</code> ä¸­æ¶‰åŠåˆ° <code>banner_img</code> çš„éƒ¨åˆ†å…¨éƒ¨é…ç½®ä¸ºç©ºï¼Œå› ä¸ºæˆ‘ä»¬è¦æ‰‹åŠ¨è®¾ç½®èƒŒæ™¯å›¾ã€‚</p>
<p>ä¾‹å¦‚é¦–é¡µ banner å’Œæ–‡ç« é¡µ bannerï¼ˆå¯ä»¥é€šè¿‡æœç´¢ <code>banner_img</code> æé«˜æ•ˆç‡ï¼‰ï¼š</p>
<p><img src= "https://ali-4rozen-oss.oss-cn-guangzhou.aliyuncs.com/blog/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202505160920360.png" alt="image-20250516092011283"></p>
<p><img src= "https://ali-4rozen-oss.oss-cn-guangzhou.aliyuncs.com/blog/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202505160920829.png" alt="image-20250516092031772"></p>
<p>åœ¨ <code>source/js</code> ç›®å½•ä¸­æ–°å»ºæˆ–ä¿®æ”¹ <code>backgroundize.js</code> æ–‡ä»¶ï¼Œæˆ‘çš„ä»£ç æ–‡ä»¶å¦‚ä¸‹ï¼š<code>backgroundize.js</code></p>
<figure class="shiki javascript"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color: #6A9955">/**</span></span>
<span class="line"><span style="color: #6A9955"> * author: 4rozeN</span></span>
<span class="line"><span style="color: #6A9955"> * file: backgroundize.js</span></span>
<span class="line"><span style="color: #6A9955"> * last modified: 2025-05-19</span></span>
<span class="line"><span style="color: #6A9955"> * description: èƒŒæ™¯å›¾éšæ—¥å¤œæ¨¡å¼åˆ‡æ¢å¤„ç†ã€‚</span></span>
<span class="line"><span style="color: #6A9955"> */</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955">/**</span></span>
<span class="line"><span style="color: #6A9955"> * è·å–é¢œè‰²æ¨¡å¼åˆ‡æ¢æŒ‰é’®ï¼ˆæ·±è‰² / æµ…è‰²ï¼‰ã€‚</span></span>
<span class="line"><span style="color: #6A9955"> * </span><span style="color: #569CD6">@type</span><span style="color: #6A9955"> </span><span style="color: #4EC9B0">{HTMLElement | null}</span></span>
<span class="line"><span style="color: #6A9955"> */</span></span>
<span class="line"><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #4FC1FF">colorToggleButton</span><span style="color: #D4D4D4"> = </span><span style="color: #9CDCFE">document</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">querySelector</span><span style="color: #D4D4D4">(</span><span style="color: #CE9178">"#color-toggle-btn .nav-link"</span><span style="color: #D4D4D4">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955">/**</span></span>
<span class="line"><span style="color: #6A9955"> * èƒŒæ™¯å®¹å™¨å…ƒç´ ï¼ˆç»Ÿä¸€ä¸º #web_bgï¼‰ã€‚</span></span>
<span class="line"><span style="color: #6A9955"> * </span><span style="color: #569CD6">@type</span><span style="color: #6A9955"> </span><span style="color: #4EC9B0">{HTMLElement}</span></span>
<span class="line"><span style="color: #6A9955"> */</span></span>
<span class="line"><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #4FC1FF">backgroundContainer</span><span style="color: #D4D4D4"> = </span><span style="color: #9CDCFE">document</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">querySelector</span><span style="color: #D4D4D4">(</span><span style="color: #CE9178">"#web_bg"</span><span style="color: #D4D4D4">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955">// === èƒŒæ™¯å›¾ç‰‡é…ç½® ===</span></span>
<span class="line"><span style="color: #6A9955">/**</span></span>
<span class="line"><span style="color: #6A9955"> * BACKGROUND_IMAGES è¯´æ˜ï¼š</span></span>
<span class="line"><span style="color: #6A9955"> * - dark / lightï¼šæŒ‰é¢œè‰²æ¨¡å¼åˆ†ç±»ï¼›å†åŒºåˆ† desktop / mobile ä¸¤å¼ å›¾ã€‚</span></span>
<span class="line"><span style="color: #6A9955"> * - fallbackï¼šåœ¨æ’é™¤é¡µé¢ã€æˆ–æ¡Œé¢ / ç§»åŠ¨åˆ‡æ¢æ—¶çš„é»˜è®¤èƒŒæ™¯ã€‚</span></span>
<span class="line"><span style="color: #6A9955"> */</span></span>
<span class="line"><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #4FC1FF">BACKGROUND_IMAGES</span><span style="color: #D4D4D4"> = {</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">dark:</span><span style="color: #D4D4D4"> {</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #9CDCFE">desktop:</span></span>
<span class="line"><span style="color: #D4D4D4">      </span><span style="color: #CE9178">"URl1"</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #9CDCFE">mobile:</span></span>
<span class="line"><span style="color: #D4D4D4">      </span><span style="color: #CE9178">"mobileURL"</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">  },</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">light:</span><span style="color: #D4D4D4"> {</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #9CDCFE">desktop:</span></span>
<span class="line"><span style="color: #D4D4D4">      </span><span style="color: #CE9178">"URL2"</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #9CDCFE">mobile:</span></span>
<span class="line"><span style="color: #D4D4D4">      </span><span style="color: #CE9178">"mobileURL"</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">  },</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">fallback:</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #CE9178">"fallbackURL"</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">};</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955">// === é¡µé¢æ’é™¤åˆ—è¡¨ ===</span></span>
<span class="line"><span style="color: #6A9955">/**</span></span>
<span class="line"><span style="color: #6A9955"> * åœ¨ä»¥ä¸‹è·¯å¾„ï¼ˆå‰ç¼€åŒ¹é…ï¼‰ä¸è·Ÿéšé¢œè‰²æ¨¡å¼åˆ‡æ¢èƒŒæ™¯ã€‚</span></span>
<span class="line"><span style="color: #6A9955"> * è¯´æ˜ï¼šä¸»é¡µ ("/") ä¹Ÿè¢«è§†ä¸ºæ’é™¤é¡µé¢ã€‚</span></span>
<span class="line"><span style="color: #6A9955"> * </span><span style="color: #569CD6">@type</span><span style="color: #6A9955"> </span><span style="color: #4EC9B0">{string[]}</span></span>
<span class="line"><span style="color: #6A9955"> */</span></span>
<span class="line"><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #4FC1FF">PAGE_EXCLUSIONS</span><span style="color: #D4D4D4"> = [</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #CE9178">"/links/"</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #CE9178">"/about/"</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #CE9178">"/categories/"</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #CE9178">"/tags/"</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #CE9178">"/collections/"</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">];</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955">// === å·¥å…·å‡½æ•° ===</span></span>
<span class="line"><span style="color: #6A9955">/**</span></span>
<span class="line"><span style="color: #6A9955"> * åˆ¤æ–­å½“å‰é¡µé¢æ˜¯å¦åœ¨æ’é™¤åˆ—è¡¨ä¸­ã€‚</span></span>
<span class="line"><span style="color: #6A9955"> * </span><span style="color: #569CD6">@param</span><span style="color: #6A9955"> </span><span style="color: #4EC9B0">{string}</span><span style="color: #6A9955"> </span><span style="color: #9CDCFE">path</span><span style="color: #6A9955"> - location.pathname</span></span>
<span class="line"><span style="color: #6A9955"> * </span><span style="color: #569CD6">@returns</span><span style="color: #6A9955"> </span><span style="color: #4EC9B0">{boolean}</span></span>
<span class="line"><span style="color: #6A9955"> */</span></span>
<span class="line"><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">isExcludedPage</span><span style="color: #D4D4D4"> = (</span><span style="color: #9CDCFE">path</span><span style="color: #D4D4D4">) </span><span style="color: #569CD6">=&gt;</span><span style="color: #D4D4D4"> {</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #C586C0">if</span><span style="color: #D4D4D4"> (</span><span style="color: #9CDCFE">path</span><span style="color: #D4D4D4"> === </span><span style="color: #CE9178">"/"</span><span style="color: #D4D4D4">) </span><span style="color: #C586C0">return</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">true</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #C586C0">return</span><span style="color: #D4D4D4"> </span><span style="color: #4FC1FF">PAGE_EXCLUSIONS</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">some</span><span style="color: #D4D4D4">((</span><span style="color: #9CDCFE">excluded</span><span style="color: #D4D4D4">) </span><span style="color: #569CD6">=&gt;</span><span style="color: #D4D4D4"> </span><span style="color: #9CDCFE">path</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">startsWith</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">excluded</span><span style="color: #D4D4D4">));</span></span>
<span class="line"><span style="color: #D4D4D4">};</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955">/**</span></span>
<span class="line"><span style="color: #6A9955"> * åˆ¤æ–­æ˜¯å¦ä¸ºç§»åŠ¨ç«¯è§†å£ã€‚</span></span>
<span class="line"><span style="color: #6A9955"> * </span><span style="color: #569CD6">@returns</span><span style="color: #6A9955"> </span><span style="color: #4EC9B0">{boolean}</span></span>
<span class="line"><span style="color: #6A9955"> */</span></span>
<span class="line"><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">isMobileViewport</span><span style="color: #D4D4D4"> = () </span><span style="color: #569CD6">=&gt;</span><span style="color: #D4D4D4"> </span><span style="color: #9CDCFE">window</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">innerWidth</span><span style="color: #D4D4D4"> &lt; </span><span style="color: #B5CEA8">768</span><span style="color: #D4D4D4">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955">/**</span></span>
<span class="line"><span style="color: #6A9955"> * ç§»é™¤ banner é®ç½©ï¼Œé¿å…èƒŒæ™¯å›¾å±‚è¢«åŠé€æ˜é»‘å±‚è¦†ç›–ã€‚</span></span>
<span class="line"><span style="color: #6A9955"> */</span></span>
<span class="line"><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">removeBannerMask</span><span style="color: #D4D4D4"> = () </span><span style="color: #569CD6">=&gt;</span><span style="color: #D4D4D4"> {</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #4FC1FF">mask</span><span style="color: #D4D4D4"> = </span><span style="color: #9CDCFE">document</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">querySelector</span><span style="color: #D4D4D4">(</span><span style="color: #CE9178">"#banner .mask"</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #C586C0">if</span><span style="color: #D4D4D4"> (</span><span style="color: #9CDCFE">mask</span><span style="color: #D4D4D4">) </span><span style="color: #9CDCFE">mask</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">style</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">backgroundColor</span><span style="color: #D4D4D4"> = </span><span style="color: #CE9178">"rgba(0,0,0,0)"</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">};</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955">/**</span></span>
<span class="line"><span style="color: #6A9955"> * é¢„åŠ è½½æ‰€æœ‰èƒŒæ™¯å›¾ç‰‡ï¼Œé™ä½é¦–å¸§é—ªçƒã€‚</span></span>
<span class="line"><span style="color: #6A9955"> */</span></span>
<span class="line"><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">preloadBackgroundImages</span><span style="color: #D4D4D4"> = () </span><span style="color: #569CD6">=&gt;</span><span style="color: #D4D4D4"> {</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #4FC1FF">urls</span><span style="color: #D4D4D4"> = </span><span style="color: #569CD6">new</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">Set</span><span style="color: #D4D4D4">();</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #6A9955">// æ”¶é›†æ‰€æœ‰å›¾ç‰‡ URL</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">Object</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">values</span><span style="color: #D4D4D4">(</span><span style="color: #4FC1FF">BACKGROUND_IMAGES</span><span style="color: #D4D4D4">).</span><span style="color: #DCDCAA">forEach</span><span style="color: #D4D4D4">((</span><span style="color: #9CDCFE">entry</span><span style="color: #D4D4D4">) </span><span style="color: #569CD6">=&gt;</span><span style="color: #D4D4D4"> {</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #C586C0">if</span><span style="color: #D4D4D4"> (</span><span style="color: #569CD6">typeof</span><span style="color: #D4D4D4"> </span><span style="color: #9CDCFE">entry</span><span style="color: #D4D4D4"> === </span><span style="color: #CE9178">"object"</span><span style="color: #D4D4D4">) {</span></span>
<span class="line"><span style="color: #D4D4D4">      </span><span style="color: #9CDCFE">urls</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">add</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">entry</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">desktop</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">      </span><span style="color: #9CDCFE">urls</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">add</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">entry</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">mobile</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">    } </span><span style="color: #C586C0">else</span><span style="color: #D4D4D4"> {</span></span>
<span class="line"><span style="color: #D4D4D4">      </span><span style="color: #9CDCFE">urls</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">add</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">entry</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">    }</span></span>
<span class="line"><span style="color: #D4D4D4">  });</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #6A9955">// åˆ›å»º Image å¯¹è±¡è§¦å‘åŠ è½½</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">urls</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">forEach</span><span style="color: #D4D4D4">((</span><span style="color: #9CDCFE">url</span><span style="color: #D4D4D4">) </span><span style="color: #569CD6">=&gt;</span><span style="color: #D4D4D4"> {</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #4FC1FF">img</span><span style="color: #D4D4D4"> = </span><span style="color: #569CD6">new</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">Image</span><span style="color: #D4D4D4">();</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #9CDCFE">img</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">src</span><span style="color: #D4D4D4"> = </span><span style="color: #9CDCFE">url</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">  });</span></span>
<span class="line"><span style="color: #D4D4D4">};</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955">/**</span></span>
<span class="line"><span style="color: #6A9955"> * æ ¹æ®å½“å‰æ¨¡å¼ / è§†å£æˆ–è‡ªå®šä¹‰ URL è®¾ç½®èƒŒæ™¯å›¾ã€‚</span></span>
<span class="line"><span style="color: #6A9955"> * </span><span style="color: #569CD6">@param</span><span style="color: #6A9955"> </span><span style="color: #4EC9B0">{"dark" | "light" | null}</span><span style="color: #6A9955"> </span><span style="color: #9CDCFE">mode</span><span style="color: #6A9955"> - å½“å‰é¢œè‰²æ¨¡å¼ï¼›null è¡¨ç¤ºæ’é™¤é¡µé¢</span></span>
<span class="line"><span style="color: #6A9955"> * </span><span style="color: #569CD6">@param</span><span style="color: #6A9955"> </span><span style="color: #4EC9B0">{string}</span><span style="color: #6A9955"> </span><span style="color: #9CDCFE">[customUrl]</span><span style="color: #6A9955"> - å¼ºåˆ¶ä½¿ç”¨çš„è‡ªå®šä¹‰é“¾æ¥ï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰</span></span>
<span class="line"><span style="color: #6A9955"> */</span></span>
<span class="line"><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">applyBackgroundImage</span><span style="color: #D4D4D4"> = (</span><span style="color: #9CDCFE">mode</span><span style="color: #D4D4D4">, </span><span style="color: #9CDCFE">customUrl</span><span style="color: #D4D4D4">) </span><span style="color: #569CD6">=&gt;</span><span style="color: #D4D4D4"> {</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #4FC1FF">mobile</span><span style="color: #D4D4D4"> = </span><span style="color: #DCDCAA">isMobileViewport</span><span style="color: #D4D4D4">();</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #569CD6">let</span><span style="color: #D4D4D4"> </span><span style="color: #9CDCFE">imageUrl</span><span style="color: #D4D4D4">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #C586C0">if</span><span style="color: #D4D4D4"> (</span><span style="color: #9CDCFE">customUrl</span><span style="color: #D4D4D4">) {</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #6A9955">// è‹¥æ˜ç¡®æŒ‡å®šè‡ªå®šä¹‰ URLï¼Œåˆ™ç›´æ¥ä½¿ç”¨</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #9CDCFE">imageUrl</span><span style="color: #D4D4D4"> = </span><span style="color: #9CDCFE">customUrl</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">  } </span><span style="color: #C586C0">else</span><span style="color: #D4D4D4"> </span><span style="color: #C586C0">if</span><span style="color: #D4D4D4"> (</span><span style="color: #9CDCFE">mode</span><span style="color: #D4D4D4"> === </span><span style="color: #569CD6">null</span><span style="color: #D4D4D4">) {</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #6A9955">// æ’é™¤é¡µé¢ï¼šæ¡Œé¢ä½¿ç”¨ fallbackï¼Œç§»åŠ¨ç«¯ç»Ÿä¸€ dark.mobile</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #9CDCFE">imageUrl</span><span style="color: #D4D4D4"> = </span><span style="color: #9CDCFE">mobile</span></span>
<span class="line"><span style="color: #D4D4D4">      ? </span><span style="color: #4FC1FF">BACKGROUND_IMAGES</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">dark</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">mobile</span></span>
<span class="line"><span style="color: #D4D4D4">      : </span><span style="color: #4FC1FF">BACKGROUND_IMAGES</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">fallback</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">  } </span><span style="color: #C586C0">else</span><span style="color: #D4D4D4"> </span><span style="color: #C586C0">if</span><span style="color: #D4D4D4"> (!</span><span style="color: #DCDCAA">isExcludedPage</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">location</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">pathname</span><span style="color: #D4D4D4">) &amp;&amp; </span><span style="color: #9CDCFE">mode</span><span style="color: #D4D4D4">) {</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #6A9955">// éæ’é™¤é¡µé¢ï¼šæ ¹æ®æ¨¡å¼ + è§†å£é€‰æ‹©</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #9CDCFE">imageUrl</span><span style="color: #D4D4D4"> = </span><span style="color: #9CDCFE">mobile</span></span>
<span class="line"><span style="color: #D4D4D4">      ? </span><span style="color: #4FC1FF">BACKGROUND_IMAGES</span><span style="color: #D4D4D4">[</span><span style="color: #9CDCFE">mode</span><span style="color: #D4D4D4">].</span><span style="color: #9CDCFE">mobile</span></span>
<span class="line"><span style="color: #D4D4D4">      : </span><span style="color: #4FC1FF">BACKGROUND_IMAGES</span><span style="color: #D4D4D4">[</span><span style="color: #9CDCFE">mode</span><span style="color: #D4D4D4">].</span><span style="color: #9CDCFE">desktop</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">  } </span><span style="color: #C586C0">else</span><span style="color: #D4D4D4"> {</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #6A9955">// å¤„ç†ä»ç§»åŠ¨ç«¯åˆ‡æ¢å›æ¡Œé¢ç«¯æ—¶å¯èƒ½å‡ºç°çš„èƒŒæ™¯é”™ä¹±</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #9CDCFE">imageUrl</span><span style="color: #D4D4D4"> = </span><span style="color: #9CDCFE">mobile</span></span>
<span class="line"><span style="color: #D4D4D4">      ? </span><span style="color: #4FC1FF">BACKGROUND_IMAGES</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">dark</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">mobile</span></span>
<span class="line"><span style="color: #D4D4D4">      : </span><span style="color: #4FC1FF">BACKGROUND_IMAGES</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">fallback</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">backgroundContainer</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">style</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">backgroundImage</span><span style="color: #D4D4D4"> = </span><span style="color: #CE9178">`url(</span><span style="color: #569CD6">${</span><span style="color: #9CDCFE">imageUrl</span><span style="color: #569CD6">}</span><span style="color: #CE9178">)`</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">};</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955">/**</span></span>
<span class="line"><span style="color: #6A9955"> * è·å–ç”¨æˆ·å½“å‰çš„é¢œè‰²æ¨¡å¼ï¼ˆæ·±/æµ…ï¼‰ã€‚</span></span>
<span class="line"><span style="color: #6A9955"> * </span><span style="color: #569CD6">@returns</span><span style="color: #6A9955"> </span><span style="color: #4EC9B0">{"dark" | "light"}</span></span>
<span class="line"><span style="color: #6A9955"> */</span></span>
<span class="line"><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">getUserColorScheme</span><span style="color: #D4D4D4"> = () </span><span style="color: #569CD6">=&gt;</span><span style="color: #D4D4D4"> {</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #4FC1FF">mode</span><span style="color: #D4D4D4"> = </span><span style="color: #9CDCFE">document</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">documentElement</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">getAttribute</span><span style="color: #D4D4D4">(</span><span style="color: #CE9178">"data-user-color-scheme"</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #C586C0">return</span><span style="color: #D4D4D4"> </span><span style="color: #9CDCFE">mode</span><span style="color: #D4D4D4"> === </span><span style="color: #CE9178">"dark"</span><span style="color: #D4D4D4"> ? </span><span style="color: #CE9178">"dark"</span><span style="color: #D4D4D4"> : </span><span style="color: #CE9178">"light"</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">};</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955">/**</span></span>
<span class="line"><span style="color: #6A9955"> * é¢œè‰²æ¨¡å¼åˆ‡æ¢åçš„å›è°ƒï¼šé‡æ–°åº”ç”¨èƒŒæ™¯å¹¶ç§»é™¤é®ç½©ã€‚</span></span>
<span class="line"><span style="color: #6A9955"> */</span></span>
<span class="line"><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">handleColorSchemeToggle</span><span style="color: #D4D4D4"> = () </span><span style="color: #569CD6">=&gt;</span><span style="color: #D4D4D4"> {</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #4FC1FF">mode</span><span style="color: #D4D4D4"> = </span><span style="color: #DCDCAA">getUserColorScheme</span><span style="color: #D4D4D4">();</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #C586C0">if</span><span style="color: #D4D4D4"> (!</span><span style="color: #DCDCAA">isExcludedPage</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">location</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">pathname</span><span style="color: #D4D4D4">)) {</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #DCDCAA">applyBackgroundImage</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">mode</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  }</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #DCDCAA">removeBannerMask</span><span style="color: #D4D4D4">();</span></span>
<span class="line"><span style="color: #D4D4D4">};</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955">// === è§†å£ Resize å¤„ç†ï¼ˆé˜²æŠ–ï¼‰ ===</span></span>
<span class="line"><span style="color: #569CD6">let</span><span style="color: #D4D4D4"> </span><span style="color: #9CDCFE">resizeTimer</span><span style="color: #D4D4D4">; </span><span style="color: #6A9955">// å®šæ—¶å™¨å¥æŸ„</span></span>
<span class="line"><span style="color: #6A9955">/**</span></span>
<span class="line"><span style="color: #6A9955"> * çª—å£å¤§å°å˜åŒ–äº‹ä»¶çš„å¤„ç†å‡½æ•°ï¼ˆå« 200ms é˜²æŠ–ï¼‰ã€‚</span></span>
<span class="line"><span style="color: #6A9955"> */</span></span>
<span class="line"><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">handleViewportResize</span><span style="color: #D4D4D4"> = () </span><span style="color: #569CD6">=&gt;</span><span style="color: #D4D4D4"> {</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #DCDCAA">clearTimeout</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">resizeTimer</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">resizeTimer</span><span style="color: #D4D4D4"> = </span><span style="color: #DCDCAA">setTimeout</span><span style="color: #D4D4D4">(() </span><span style="color: #569CD6">=&gt;</span><span style="color: #D4D4D4"> {</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #DCDCAA">applyBackgroundImage</span><span style="color: #D4D4D4">(</span><span style="color: #DCDCAA">getUserColorScheme</span><span style="color: #D4D4D4">());</span></span>
<span class="line"><span style="color: #D4D4D4">  }, </span><span style="color: #B5CEA8">200</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">};</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955">// === ç›‘å¬é¢œè‰²æ¨¡å¼å±æ€§å˜åŒ– ===</span></span>
<span class="line"><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">observeColorSchemeChange</span><span style="color: #D4D4D4"> = () </span><span style="color: #569CD6">=&gt;</span><span style="color: #D4D4D4"> {</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #4FC1FF">targetNode</span><span style="color: #D4D4D4"> = </span><span style="color: #9CDCFE">document</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">documentElement</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #4FC1FF">config</span><span style="color: #D4D4D4"> = {</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #9CDCFE">attributes:</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">true</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #9CDCFE">attributeFilter:</span><span style="color: #D4D4D4"> [</span><span style="color: #CE9178">"data-user-color-scheme"</span><span style="color: #D4D4D4">],</span></span>
<span class="line"><span style="color: #D4D4D4">  };</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">callback</span><span style="color: #D4D4D4"> = (</span><span style="color: #9CDCFE">mutationsList</span><span style="color: #D4D4D4">) </span><span style="color: #569CD6">=&gt;</span><span style="color: #D4D4D4"> {</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #C586C0">for</span><span style="color: #D4D4D4"> (</span><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #4FC1FF">mutation</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">of</span><span style="color: #D4D4D4"> </span><span style="color: #9CDCFE">mutationsList</span><span style="color: #D4D4D4">) {</span></span>
<span class="line"><span style="color: #D4D4D4">      </span><span style="color: #C586C0">if</span><span style="color: #D4D4D4"> (</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #9CDCFE">mutation</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">type</span><span style="color: #D4D4D4"> === </span><span style="color: #CE9178">"attributes"</span><span style="color: #D4D4D4"> &amp;&amp;</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #9CDCFE">mutation</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">attributeName</span><span style="color: #D4D4D4"> === </span><span style="color: #CE9178">"data-user-color-scheme"</span></span>
<span class="line"><span style="color: #D4D4D4">      ) {</span></span>
<span class="line"><span style="color: #D4D4D4">        </span><span style="color: #DCDCAA">handleColorSchemeToggle</span><span style="color: #D4D4D4">();</span></span>
<span class="line"><span style="color: #D4D4D4">      }</span></span>
<span class="line"><span style="color: #D4D4D4">    }</span></span>
<span class="line"><span style="color: #D4D4D4">  };</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #4FC1FF">observer</span><span style="color: #D4D4D4"> = </span><span style="color: #569CD6">new</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">MutationObserver</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">callback</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">observer</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">observe</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">targetNode</span><span style="color: #D4D4D4">, </span><span style="color: #9CDCFE">config</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">};</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955">// === åˆå§‹åŒ– ===</span></span>
<span class="line"><span style="color: #6A9955">/**</span></span>
<span class="line"><span style="color: #6A9955"> * åˆå§‹åŒ–èƒŒæ™¯ï¼šé¢„åŠ è½½ â†’ æ ¹æ®å½“å‰é¡µé¢ &amp; æ¨¡å¼è®¾ç½® â†’ å»æ‰é®ç½©ã€‚</span></span>
<span class="line"><span style="color: #6A9955"> */</span></span>
<span class="line"><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">initializeBackgrounds</span><span style="color: #D4D4D4"> = () </span><span style="color: #569CD6">=&gt;</span><span style="color: #D4D4D4"> {</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #DCDCAA">preloadBackgroundImages</span><span style="color: #D4D4D4">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #4FC1FF">currentPath</span><span style="color: #D4D4D4"> = </span><span style="color: #9CDCFE">location</span><span style="color: #D4D4D4">.</span><span style="color: #9CDCFE">pathname</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #4FC1FF">currentMode</span><span style="color: #D4D4D4"> = </span><span style="color: #DCDCAA">getUserColorScheme</span><span style="color: #D4D4D4">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #C586C0">if</span><span style="color: #D4D4D4"> (</span><span style="color: #4FC1FF">PAGE_EXCLUSIONS</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">includes</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">currentPath</span><span style="color: #D4D4D4">)) {</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #DCDCAA">applyBackgroundImage</span><span style="color: #D4D4D4">(</span><span style="color: #569CD6">null</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  } </span><span style="color: #C586C0">else</span><span style="color: #D4D4D4"> {</span></span>
<span class="line"><span style="color: #D4D4D4">    </span><span style="color: #DCDCAA">applyBackgroundImage</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">currentMode</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #DCDCAA">removeBannerMask</span><span style="color: #D4D4D4">();</span></span>
<span class="line"><span style="color: #D4D4D4">};</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955">// === äº‹ä»¶ç›‘å¬ ===</span></span>
<span class="line"><span style="color: #C586C0">if</span><span style="color: #D4D4D4"> (!</span><span style="color: #9CDCFE">colorToggleButton</span><span style="color: #D4D4D4">) {</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">console</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">warn</span><span style="color: #D4D4D4">(</span><span style="color: #CE9178">"æœªæ‰¾åˆ°é¢œè‰²æ¨¡å¼åˆ‡æ¢æŒ‰é’®"</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955">// ç›‘å¬é¢œè‰²æ¨¡å¼å±æ€§å˜åŒ–</span></span>
<span class="line"><span style="color: #DCDCAA">observeColorSchemeChange</span><span style="color: #D4D4D4">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955">// ç›‘å¬çª—å£å¤§å°å˜åŒ–</span></span>
<span class="line"><span style="color: #9CDCFE">window</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">addEventListener</span><span style="color: #D4D4D4">(</span><span style="color: #CE9178">"resize"</span><span style="color: #D4D4D4">, </span><span style="color: #9CDCFE">handleViewportResize</span><span style="color: #D4D4D4">, { </span><span style="color: #9CDCFE">passive:</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">true</span><span style="color: #D4D4D4"> });</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955">// DOMContentLoaded â†’ åˆå§‹åŒ–èƒŒæ™¯</span></span>
<span class="line"><span style="color: #9CDCFE">window</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">addEventListener</span><span style="color: #D4D4D4">(</span><span style="color: #CE9178">"DOMContentLoaded"</span><span style="color: #D4D4D4">, () </span><span style="color: #569CD6">=&gt;</span><span style="color: #D4D4D4"> {</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">console</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">log</span><span style="color: #D4D4D4">(</span><span style="color: #CE9178">"DOM å®Œæˆï¼Œå¼€å§‹åˆå§‹åŒ–èƒŒæ™¯å›¾ã€‚"</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #DCDCAA">initializeBackgrounds</span><span style="color: #D4D4D4">();</span></span>
<span class="line"><span style="color: #D4D4D4">});</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955">// åŠ è½½å®Œæ¯•ä¹‹åæ¸…é™¤æ§åˆ¶å°æ—¥å¿—</span></span>
<span class="line"><span style="color: #9CDCFE">window</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">addEventListener</span><span style="color: #D4D4D4">(</span><span style="color: #CE9178">"load"</span><span style="color: #D4D4D4">, () </span><span style="color: #569CD6">=&gt;</span><span style="color: #D4D4D4"> {</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">console</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">clear</span><span style="color: #D4D4D4">();</span></span>
<span class="line"><span style="color: #D4D4D4">});</span></span></code></pre></div></div></figure>
<p>è¯¥ä»£ç æ–‡ä»¶è¿˜éœ€ç»“åˆä¸€ä¸ªè‡ªå®šä¹‰çš„ css æ–‡ä»¶ä½¿ç”¨ï¼š<code>source/css/backgroundize.css</code></p>
<figure class="shiki css"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color: #D7BA7D">#web_bg</span><span style="color: #D4D4D4"> {</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">position</span><span style="color: #D4D4D4">: </span><span style="color: #CE9178">fixed</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">width</span><span style="color: #D4D4D4">: </span><span style="color: #B5CEA8">100%</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">height</span><span style="color: #D4D4D4">: </span><span style="color: #B5CEA8">100%</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">z-index</span><span style="color: #D4D4D4">: </span><span style="color: #B5CEA8">-1</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">background-size</span><span style="color: #D4D4D4">: </span><span style="color: #CE9178">cover</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #6A9955">/* æ·»åŠ è¿‡æ¸¡æ•ˆæœï¼Œä½ ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ */</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">transition</span><span style="color: #D4D4D4">: </span><span style="color: #CE9178">all</span><span style="color: #D4D4D4"> </span><span style="color: #B5CEA8">0.5s</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">}</span></span></code></pre></div></div></figure>
<p>åœ¨ <code>backgroundize.js</code> æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬æ‰‹åŠ¨æŒ‡å®šäº†èƒŒæ™¯å›¾ã€åˆ‡æ¢é€»è¾‘ï¼Œæ‰€ä»¥ä¸Šä¸€èŠ‚çš„ç¬¬äºŒæ®µä»£ç å·²ä¸å†æœ‰ä½œç”¨ï¼Œæ•…åœ¨æ­¤åˆ å»ã€‚</p>
<p>åœ¨ <code>backgroundize.js</code> æ–‡ä»¶ä¸­ï¼Œè‹¥ä½ æœ‰æ›´å¤šè‡ªå®šä¹‰é¡µé¢å›¾ç‰‡éœ€æ±‚ï¼Œä½ å°†èƒ½å¤Ÿå¾ˆæ–¹ä¾¿çš„å®ç°å®ƒã€‚</p>
<p>åœ¨ <code>backgroundize.css</code> ä¸­ï¼Œæˆ‘ä»¬ä¾ç„¶å°† <code>web_bg</code> è®¾ç½®ä¸º <code>fixed</code> å°†å…¶å›ºå®šï¼Œå¹¶è®¾ç½® <code>z-index: -1</code> ä¿æŒæ²‰åº•ã€‚</p>
<p>å› ä¸ºåœ¨<code>_config.fluid.yml</code> ä¸­æˆ‘ä»¬å°† <code>banner_img</code> é…ç½®é¡¹å…¨éƒ¨é…ç½®ä¸ºç©ºï¼Œé‚£ä¹ˆæ§åˆ¶å°å°†ä¼šå‡ºç° 404 é”™è¯¯ï¼š</p>
<p><img src= "https://ali-4rozen-oss.oss-cn-guangzhou.aliyuncs.com/blog/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202505232039826.png" alt="image-20250523203906585"></p>
<p>çœ¼ä¸è§å¿ƒä¸çƒ¦ï¼Œæ‰€ä»¥åœ¨ <code>backgroundize.js</code> ä¸­å­˜åœ¨ä¸‹é¢çš„ä»£ç ï¼š</p>
<figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color: #6A9955">// åŠ è½½å®Œæ¯•ä¹‹åæ¸…é™¤æ§åˆ¶å°æ—¥å¿—</span></span>
<span class="line"><span style="color: #9CDCFE">window</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">addEventListener</span><span style="color: #D4D4D4">(</span><span style="color: #CE9178">"load"</span><span style="color: #D4D4D4">, () </span><span style="color: #569CD6">=&gt;</span><span style="color: #D4D4D4"> {</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">console</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">clear</span><span style="color: #D4D4D4">();</span></span>
<span class="line"><span style="color: #D4D4D4">});</span></span></code></pre></div></div></figure>
<div class="note warning flat"><p>âš ï¸æ³¨æ„ï¼š<br>
ä»¥ä¸Šæ–‡ä»¶ï¼Œåˆ«å¿˜è®°åœ¨<code>_config.fluid.yml</code> æ–‡ä»¶ä¸­çš„ <code>custom_css</code> ä¸­è¿›è¡Œå¼•ç”¨ã€‚<br>
<code>URl1</code>ã€<code>mobileURL</code> å’Œ <code>fallbackURL</code> ç­‰å­—ç¬¦ï¼Œä»…ä½œå ä½ä½¿ç”¨ï¼Œå®é™…åº”ä¸ºçœŸå®å›¾ç‰‡é“¾æ¥ã€‚</p>
</div>
<p>å› ä¸º <code>injector.js</code> çš„å­˜åœ¨ï¼Œæ‰€ä»¥ <code>backgroundize.js</code><strong>ä¸éœ€è¦</strong>åœ¨ <code>custom_js</code> ä¸­å¼•å…¥ï¼Œå¦åˆ™æ§åˆ¶å°ä¸­å°†ä¼šå‡ºç°ä»¥ä¸‹æŠ¥é”™ï¼š</p>
<figure class="shiki"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color: #D4D4D4">Uncaught SyntaxError: Identifier 'colorToggleButton' has already been declared (at backgroundize.js:1:1)</span></span></code></pre></div></div></figure>
<p><code>_config.fluid.yml</code> é…ç½®é¡¹ï¼š</p>
<figure class="shiki yaml"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color: #569CD6">custom_css</span><span style="color: #D4D4D4">:</span></span>
<span class="line"><span style="color: #D4D4D4">  - </span><span style="color: #CE9178">/css/backgroundize.css</span></span></code></pre></div></div></figure>
<h2 id="é¢„åŠ è½½çš„å¯èƒ½é—®é¢˜"><a class="markdownIt-Anchor" href="#é¢„åŠ è½½çš„å¯èƒ½é—®é¢˜"></a> é¢„åŠ è½½çš„å¯èƒ½é—®é¢˜</h2>
<p>å¦‚æœä½ é‡åˆ°äº†ç¬¬ä¸€æ¬¡åˆ‡æ¢ä¸»é¢˜ï¼Œå›¾ç‰‡ä¸å›¾ç‰‡ä¹‹é—´çš„åˆ‡æ¢æœ‰äº›ç”Ÿç¡¬ï¼Œæœ‰ç‚¹é—ªå±çš„æ„Ÿè§‰ï¼Œä½†åç»­çš„æ‰€æœ‰åˆ‡æ¢å´ååˆ†ä¸æ»‘ï¼Œé‚£ä¹ˆå¾ˆå¯èƒ½æ˜¯é¢„åŠ è½½çš„å¤±è´¥ã€‚</p>
<h3 id="å¯èƒ½çš„é—®é¢˜æ¥æº"><a class="markdownIt-Anchor" href="#å¯èƒ½çš„é—®é¢˜æ¥æº"></a> å¯èƒ½çš„é—®é¢˜æ¥æº</h3>
<div class="note info flat"><p>å¦‚æœ <code>OSS/Bucket</code> è®¾ç½®äº†å“åº”å¤´ <code>Cache-Control: no-store</code> æˆ– <code>max-age=0</code> æˆ–æ²¡æœ‰å¯ç”¨ <code>Expires</code>ï¼Œæµè§ˆå™¨ä¼šè®¤ä¸ºæ¯æ¬¡è®¿é—®éƒ½éœ€è¦é‡æ–°æ‹‰å–ã€‚ä¹Ÿå°±æ˜¯å°½ç®¡ä½ é¢„åŠ è½½äº†ï¼Œä½†åˆ‡æ¢æ—¶å›¾ç‰‡é“¾æ¥ä»ç„¶ä¼šè§¦å‘ä¸€æ¬¡çœŸæ­£çš„è¯·æ±‚ã€‚</p>
</div>
<p>æˆ‘é‡åˆ°çš„é—®é¢˜æ˜¯ï¼Œæˆ‘ä½¿ç”¨çš„å›¾ç‰‡æ‰˜ç®¡åœ¨é˜¿é‡Œäº‘çš„ oss ä¸Šï¼Œé˜¿é‡Œäº‘è¿”å›çš„å“åº”å¤´ä¸­å­˜åœ¨ï¼š</p>
<figure class="shiki"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color: #D4D4D4">x-oss-force-download: true</span></span>
<span class="line"><span style="color: #D4D4D4">Content-Disposition: attachment</span></span></code></pre></div></div></figure>
<p>è€Œ <code>Content-Disposition: attachment</code> çš„å«ä¹‰æ˜¯ï¼š<strong>è¿™ä¸ªèµ„æºæ˜¯ä¾›ä¸‹è½½ç”¨çš„</strong>ï¼Œè€Œä¸æ˜¯ç½‘é¡µå†…å®¹çš„ä¸€éƒ¨åˆ†ã€‚</p>
<p>æµè§ˆå™¨é‡åˆ°è¿™ç§å“åº”å¤´æ—¶ï¼Œé€šå¸¸ä¼š<strong>ç»•è¿‡å›¾ç‰‡çš„å¸¸è§„ç¼“å­˜è·¯å¾„</strong>ï¼Œæˆ–è€…ä¸ä¼šæŠŠå®ƒä½œä¸ºæ­£å¸¸çš„é¢„åŠ è½½èµ„æºå¤„ç†ã€‚</p>
<p>è¿™å°±å¯¼è‡´ï¼š</p>
<ul>
<li>å›¾ç‰‡ä¸ä¼šè¿›å…¥ <code>memory</code> æˆ– <code>disk cache</code></li>
<li>å³ä½¿é¢„åŠ è½½ä»£ç å†™å¾—å¾ˆå¥½ï¼Œæµè§ˆå™¨ä»ç„¶ä¼šæ¯æ¬¡ç‚¹å‡»åˆ‡æ¢æ—¶å‘èµ·æ–°è¯·æ±‚</li>
<li>å¯¼è‡´é¦–æ¬¡åˆ‡æ¢èƒŒæ™¯å›¾æ—¶å‡ºç° â€œ<strong>é—ªå±æˆ–å»¶è¿ŸåŠ è½½</strong>â€</li>
</ul>
<p>ç¿»é˜…æ–‡æ¡£ï¼Œå‘ç°é˜¿é‡Œäº‘åœ¨å¾ˆä¹…ä¹‹å‰å°±å·²ç»åšå‡ºäº†è°ƒæ•´ï¼š</p>
<p><code>å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œé€šè¿‡OSSé»˜è®¤ BucketåŸŸåè®¿é—®æ–‡ä»¶æ—¶ï¼ŒOSSä¼šå¼ºåˆ¶å¢åŠ ä¸‹è½½å“åº”å¤´ï¼Œå¯¼è‡´æµè§ˆå™¨å¼ºåˆ¶ä¸‹è½½æ–‡ä»¶ã€‚</code></p>
<p>ä¹Ÿå°±æ˜¯å¼ºåˆ¶å¢åŠ äº† <code>x-oss-force-download: true</code> ä½¿å¾— <code>Content-Disposition</code> ä¸ºé™„ä»¶ç±»å‹ã€‚</p>
<p>å¦‚æœé‡åˆ°å…¶ä»–é—®é¢˜ï¼Œæ¬¢è¿è®¨è®ºã€‚</p>
<h3 id="è§£å†³åŠæ³•"><a class="markdownIt-Anchor" href="#è§£å†³åŠæ³•"></a> è§£å†³åŠæ³•</h3>
<p>å¦‚æœä½ çš„æ‰˜ç®¡å¹³å°å¯ä»¥æ›´æ”¹å…ƒä¿¡æ¯ï¼Œé‚£ä¹ˆè¯·æ›´æ”¹æ‰€éœ€æ–‡ä»¶çš„å…ƒä¿¡æ¯ï¼š</p>
<ul>
<li>
<p><code>Content-Disposition: attachment</code> æ”¹ä¸º <code>Content-Disposition: inline</code> æˆ–ç•™ç©º</p>
</li>
<li>
<p><code>x-oss-force-download: true</code> æ”¹ä¸º <code>false</code></p>
</li>
</ul>
<p>é˜¿é‡Œäº‘å¹³å°æ˜¯æ— æ³•é€šè¿‡æ›´æ”¹æ–‡ä»¶å…ƒä¿¡æ¯æ¥è§£å†³çš„ã€‚</p>
<p>é˜¿é‡Œäº‘çš„æ¨èæ–¹æ¡ˆæ˜¯ä¸º <code>oss/bucket</code> ç»‘å®šè‡ªå®šä¹‰åŸŸåï¼Œä¸å†ä½¿ç”¨é˜¿é‡Œäº‘æä¾›çš„é»˜è®¤åŸŸåã€‚è¯¦è§ï¼š<a target="_blank" rel="noopener external nofollow noreferrer" href="https://help.aliyun.com/zh/oss/user-guide/map-custom-domain-names-5">ç»‘å®šè‡ªå®šä¹‰åŸŸåè‡³ Bucket é»˜è®¤åŸŸå</a></p>
<p>æˆ–è€…ï¼Œä½ ä¹Ÿå¯ä»¥å°†å›¾ç‰‡æ‰˜ç®¡åœ¨ GitHub ä¸Šï¼Œå°±ç›´æ¥ä½¿ç”¨ä»“åº“çš„ img ç›®å½•ç”¨äºå­˜æ”¾ï¼ŒGitHub çš„å“åº”å¤´æ˜¯ç¬¦åˆè¦æ±‚çš„ã€‚</p>
<h2 id="éé¢„æœŸçš„åˆ‡æ¢æ•ˆæœ"><a class="markdownIt-Anchor" href="#éé¢„æœŸçš„åˆ‡æ¢æ•ˆæœ"></a> éé¢„æœŸçš„åˆ‡æ¢æ•ˆæœ</h2>
<p>å¦‚æœä½ é‡åˆ°äº†ç¬¬ä¸€æ—¶é—´æ˜¾ç¤ºçš„ä¸æ˜¯é¢„æœŸçš„èƒŒæ™¯å›¾ï¼Œé‚£ä¹ˆå¾ˆå¯èƒ½æ˜¯ä½ åœ¨<code>_config.fluid.yml</code> æ–‡ä»¶ä¸­çš„ <code>banner_img</code> æ²¡æœ‰<strong>å…¨éƒ¨</strong>é…ç½®ä¸ºç©ºã€‚</p>
<h2 id="æ— æ³•åŒ¹é…é¡µé¢æ’é™¤é¡µé¢ä¸ç”Ÿæ•ˆ"><a class="markdownIt-Anchor" href="#æ— æ³•åŒ¹é…é¡µé¢æ’é™¤é¡µé¢ä¸ç”Ÿæ•ˆ"></a> æ— æ³•åŒ¹é…é¡µé¢ / æ’é™¤é¡µé¢ä¸ç”Ÿæ•ˆ</h2>
<p>è¿™ä¸€èˆ¬æ˜¯å› ä¸ºä½ çš„ç½‘ç«™çš„æ°¸ä¹…é“¾æ¥ç”Ÿæˆæ–¹å¼ä¸æˆ‘ä¸åŒã€‚</p>
<p>è¯¥é…ç½®é¡¹é€šå¸¸åœ¨<code>_config.yml</code> æ–‡ä»¶ä¸­å¯ä»¥æ‰¾åˆ°ã€‚æˆ‘çš„é…ç½®å¦‚ä¸‹ï¼š</p>
<figure class="shiki yaml"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color: #6A9955"># URL</span></span>
<span class="line"><span style="color: #6A9955">## è®¾ç½®ä½ çš„ç½‘ç«™ URLï¼Œä¾‹å¦‚ GitHub Pages ä¸Šè®¾ç½®ä¸º 'https://username.github.io/project'</span></span>
<span class="line"><span style="color: #569CD6">url</span><span style="color: #D4D4D4">: </span><span style="color: #CE9178">https://4rozeN.github.io</span><span style="color: #D4D4D4"> </span><span style="color: #6A9955"># ç½‘ç«™çš„å®Œæ•´ URL</span></span>
<span class="line"><span style="color: #569CD6">permalink</span><span style="color: #D4D4D4">: </span><span style="color: #CE9178">archives/:category/:abbrlink.html</span><span style="color: #D4D4D4"> </span><span style="color: #6A9955"># æ–‡ç« æ°¸ä¹…é“¾æ¥çš„æ ¼å¼</span></span>
<span class="line"><span style="color: #569CD6">abbrlink</span><span style="color: #D4D4D4">: </span><span style="color: #CE9178">alg</span><span style="color: #D4D4D4"> </span><span style="color: #6A9955"># ç®—æ³•ï¼šcrc16(default) and crc32 </span></span>
<span class="line"><span style="color: #569CD6">permalink_defaults</span><span style="color: #D4D4D4">: </span><span style="color: #CE9178">defaultPermaLink</span><span style="color: #D4D4D4"> </span><span style="color: #6A9955"># é»˜è®¤æ°¸ä¹…é“¾æ¥çš„åç§°</span></span>
<span class="line"><span style="color: #569CD6">pretty_urls</span><span style="color: #D4D4D4">: </span><span style="color: #6A9955"># ä¼˜åŒ– URL ç¾è§‚æ€§</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #569CD6">trailing_index</span><span style="color: #D4D4D4">: </span><span style="color: #569CD6">true</span><span style="color: #D4D4D4"> </span><span style="color: #6A9955"># å¦‚æœè®¾ä¸º falseï¼Œå°†å»æ‰é“¾æ¥ç»“å°¾çš„ 'index.html'</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #569CD6">trailing_html</span><span style="color: #D4D4D4">: </span><span style="color: #569CD6">true</span><span style="color: #D4D4D4"> </span><span style="color: #6A9955"># å¦‚æœè®¾ä¸º falseï¼Œå°†å»æ‰é“¾æ¥ç»“å°¾çš„ '.html'</span></span></code></pre></div></div></figure>
<p>è¯¦è§ Hexo å®˜æ–¹æ–‡æ¡£ï¼š<a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io/zh-cn/docs/permalinks">ã€Hexoã€‘- æ°¸ä¹…é“¾æ¥ï¼ˆPermalinksï¼‰</a></p>
<p>ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ</p>
<p>æˆ‘çš„ä»£ç ä¸­ï¼Œå†™æ­»äº†éƒ¨åˆ†æ’é™¤åœ¨å¤–ä¸ä¼šè·Ÿéšæ—¥å¤œæ¨¡å¼åˆ‡æ¢èƒŒæ™¯å›¾çš„é¡µé¢ï¼Œè¿™äº›é¡µé¢éƒ½æ˜¯èƒ½å¤Ÿè¢«</p>
<figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color: #6A9955">// æ’é™¤åœ¨å¤–çš„é¡µé¢</span></span>
<span class="line"><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #4FC1FF">PAGE_EXCLUSIONS</span><span style="color: #D4D4D4"> = [</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #CE9178">"/links/"</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #CE9178">"/about/"</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #CE9178">"/categories/"</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #CE9178">"/tags/"</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #CE9178">"/collections/"</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">];</span></span>
<span class="line"><span style="color: #6A9955">// æ ¡éªŒ</span></span>
<span class="line"><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">isExcludedPage</span><span style="color: #D4D4D4"> = (</span><span style="color: #9CDCFE">path</span><span style="color: #D4D4D4">) </span><span style="color: #569CD6">=&gt;</span><span style="color: #D4D4D4"> {</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #C586C0">if</span><span style="color: #D4D4D4"> (</span><span style="color: #9CDCFE">path</span><span style="color: #D4D4D4"> === </span><span style="color: #CE9178">"/"</span><span style="color: #D4D4D4">) </span><span style="color: #C586C0">return</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">true</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #C586C0">return</span><span style="color: #D4D4D4"> </span><span style="color: #4FC1FF">PAGE_EXCLUSIONS</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">some</span><span style="color: #D4D4D4">((</span><span style="color: #9CDCFE">excluded</span><span style="color: #D4D4D4">) </span><span style="color: #569CD6">=&gt;</span><span style="color: #D4D4D4"> </span><span style="color: #9CDCFE">path</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">startsWith</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">excluded</span><span style="color: #D4D4D4">));</span></span>
<span class="line"><span style="color: #D4D4D4">};</span></span></code></pre></div></div></figure>
<p>æ ¡éªŒè¯­å¥åˆ¤æ–­ä¸ºçœŸè¿”å› <code>true</code> çš„ã€‚ä½†å¦‚æœä½ çš„ç½‘ç«™ä½¿ç”¨å¦‚ï¼š</p>
<ul>
<li><code>2013/07/14/hello-world/</code></li>
<li><code>2013-07-14-hello-world.html</code></li>
<li><code>foo/bar/hello-world/</code></li>
<li>â€¦â€¦</li>
</ul>
<p>ç­‰ç­‰æ–¹æ¡ˆï¼Œæˆ‘å¾ˆéš¾æ¯ä¸ªéƒ½é€‚é…ï¼Œåªå¾—ä½ è‡ªå·±è¿›è¡Œä¿®æ”¹ã€‚</p>
<p>ä¿®æ”¹å…¶å®ä¹Ÿå¾ˆç®€å•ï¼Œæ¯”å¦‚æ—¥æœŸç±»çš„æ°¸ä¹…é“¾æ¥ï¼š<code>/2025/04/26/xxx/</code></p>
<p>ä½ å¯ä»¥ä¿®æ”¹ <code>excludePages</code> ä¸­çš„å­—ç¬¦ä¸²ä¸ºæ­£åˆ™åŒ¹é…ç¬¦ï¼š<code>/^\/\d{4}\/\d{2}\/\d{2}\//</code></p>
<p>æ ¡éªŒå‡½æ•°ä¹Ÿå¯ä»¥ä¿®æ”¹ä¸ºï¼š</p>
<figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color: #6A9955">// ç”¨äºåˆ¤æ–­å½“å‰é¡µé¢æ˜¯å¦åœ¨æ’é™¤èŒƒå›´å†…</span></span>
<span class="line"><span style="color: #569CD6">const</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">isExcludedPage</span><span style="color: #D4D4D4"> = (</span><span style="color: #9CDCFE">path</span><span style="color: #D4D4D4">) </span><span style="color: #569CD6">=&gt;</span><span style="color: #D4D4D4"> {</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #C586C0">return</span><span style="color: #D4D4D4"> </span><span style="color: #9CDCFE">excludePathPatterns</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">some</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">pattern</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">=&gt;</span><span style="color: #D4D4D4"> </span><span style="color: #9CDCFE">pattern</span><span style="color: #D4D4D4">.</span><span style="color: #DCDCAA">test</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">path</span><span style="color: #D4D4D4">));</span></span>
<span class="line"><span style="color: #D4D4D4">};</span></span></code></pre></div></div></figure>
<p>æ€»ä¹‹ï¼Œæ–¹æ³•æœ‰å¾ˆå¤šã€‚å¦‚æœä½ æ²¡æœ‰è¿™æ–¹é¢çš„åŸºç¡€ï¼Œä½ ä¹Ÿå¯ä»¥å€ŸåŠ© AI å·¥å…·å®ç°ã€‚å½“ç„¶ï¼Œå¦‚æœä½ çš„ç½‘ç«™åˆšå»ºç«‹ï¼Œæ›´æ¢æ°¸ä¹…é“¾æ¥æ˜¯ä¸€ä»¶æŸå¤±éå¸¸å°çš„äº‹æƒ…ï¼Œå¦‚æœä½ ä¸æƒ³æŠ˜è…¾çš„è¯ï¼Œä½ ä¹Ÿå¯ä»¥æ›´æ¢æ°¸ä¹…é“¾æ¥æ¥é€‚é…ä»£ç ã€‚</p>
<div class="note warning flat"><p>âš ï¸ æ³¨æ„ï¼š<br>
æ›´æ¢æ°¸ä¹…é“¾æ¥æ„å‘³ç€æ‚¨çš„ç½‘ç«™åœ¨å„æœç´¢å¼•æ“ä¸­çš„æ”¶å½•ç´¢å¼•å°†ä¼šå¤±æ•ˆï¼Œé‡æ–°ç´¢å¼•å¯èƒ½éœ€è¦ä¸€æ®µæ—¶é—´ï¼Œé‡æ–°ç´¢å¼•å®Œæˆçš„æ—¶é—´å°†å–å†³äºæ‚¨ç½‘ç«™çš„æµé‡é«˜ä½ã€‚å½“ç„¶ï¼Œæ‚¨ä¹Ÿå¯ä»¥æ‰‹åŠ¨å‰å¾€æäº¤ç´¢å¼•è¯·æ±‚ï¼Œä½†è¿™åªæ˜¯èµ·åˆ°å‘ŠçŸ¥ä½œç”¨ï¼Œé‡æ–°ç´¢å¼•å®Œæˆçš„æ—¶é—´ä»ç„¶æœªçŸ¥ã€‚è‹¥æ‚¨ä»ä¸æ˜ç™½è¿™å°†æœ‰ä½•å½±å“ï¼Œå»ºè®®æ‚¨ä¸è¦æ›´æ¢æ°¸ä¹…é“¾æ¥ã€‚<br>
å¦‚æœæ‚¨æ„¿æ„æ›´æ¢æ°¸ä¹…é“¾æ¥ç”Ÿæˆæ–¹å¼ï¼Œæƒ³æš‚æ—¶è§£å†³æœç´¢å¼•æ“ç´¢å¼•é—®é¢˜ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ <code>hexo-generator-alias</code> æ’ä»¶ï¼Œå®ƒå¯ä»¥å¸®åŠ©ä½ å®ç°æ—§é“¾æ¥é‡å®šå‘åˆ°æ–°é“¾æ¥çš„æ•ˆæœã€‚</p>
</div>
<h2 id="æ¯›ç»ç’ƒåº•é¡µæ•ˆæœ"><a class="markdownIt-Anchor" href="#æ¯›ç»ç’ƒåº•é¡µæ•ˆæœ"></a> æ¯›ç»ç’ƒåº•é¡µæ•ˆæœ</h2>
<ol>
<li>
<p>ä¿®æ”¹<code>_config.fluid.yml</code> æ–‡ä»¶çš„ä¸»é¢æ¿èƒŒæ™¯è‰²</p>
<figure class="shiki diff"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color: #6A9955"># ä¸»é¢æ¿èƒŒæ™¯è‰²</span></span>
<span class="line"><span style="color: #6A9955"># Color of main board</span></span>
<span class="line"><span style="color: #CE9178">-board_color: "#ffffff"</span></span>
<span class="line"><span style="color: #CE9178">-board_color_dark: "#252d38"</span></span>
<span class="line"><span style="color: #B5CEA8">+board_color: "#ffffff80"</span></span>
<span class="line"><span style="color: #B5CEA8">+board_color_dark: "#00000080"</span></span></code></pre></div></div></figure>
</li>
<li>
<p><code>source/css</code> ç›®å½•ä¸‹æ–°å»º <code>glassBg.css</code> æ–‡ä»¶</p>
<figure class="shiki css"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color: #6A9955">/* æ­£æ–‡åº•é¡µæ¯›ç»ç’ƒæ•ˆæœ */</span></span>
<span class="line"><span style="color: #D7BA7D">#board</span><span style="color: #D4D4D4"> {</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">-webkit-backdrop-filter</span><span style="color: #D4D4D4">: </span><span style="color: #DCDCAA">blur</span><span style="color: #D4D4D4">(</span><span style="color: #B5CEA8">10px</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">backdrop-filter</span><span style="color: #D4D4D4">: </span><span style="color: #DCDCAA">blur</span><span style="color: #D4D4D4">(</span><span style="color: #B5CEA8">10px</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">}</span></span>
<span class="line"><span style="color: #6A9955">/* ä¾§è¾¹ç›®å½•æ¯›ç»ç’ƒæ•ˆæœ */</span></span>
<span class="line"><span style="color: #D7BA7D">#toc</span><span style="color: #D4D4D4"> {</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">padding</span><span style="color: #D4D4D4">: </span><span style="color: #B5CEA8">10px</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">top</span><span style="color: #D4D4D4">: </span><span style="color: #B5CEA8">4rem</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">background-color</span><span style="color: #D4D4D4">: </span><span style="color: #DCDCAA">var</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">--board-bg-color</span><span style="color: #D4D4D4">);</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">border-radius</span><span style="color: #D4D4D4">: </span><span style="color: #B5CEA8">10px</span><span style="color: #D4D4D4">;</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">-webkit-backdrop-filter</span><span style="color: #D4D4D4">: </span><span style="color: #DCDCAA">blur</span><span style="color: #D4D4D4">(</span><span style="color: #DCDCAA">var</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">--background-blur</span><span style="color: #D4D4D4">));</span></span>
<span class="line"><span style="color: #D4D4D4">  </span><span style="color: #9CDCFE">backdrop-filter</span><span style="color: #D4D4D4">: </span><span style="color: #DCDCAA">blur</span><span style="color: #D4D4D4">(</span><span style="color: #DCDCAA">var</span><span style="color: #D4D4D4">(</span><span style="color: #9CDCFE">--background-blur</span><span style="color: #D4D4D4">));</span></span>
<span class="line"><span style="color: #D4D4D4">}</span></span></code></pre></div></div></figure>
</li>
</ol>
<p>ä¾§è¾¹çš„ç›®å½•åŒºåŸŸæ¯›ç»ç’ƒæ•ˆæœå¦‚æœä¸éœ€è¦å¯ä»¥åˆ é™¤ã€‚</p>
<h2 id="ä¸€äº›å¥½ç”¨çš„æ’ä»¶"><a class="markdownIt-Anchor" href="#ä¸€äº›å¥½ç”¨çš„æ’ä»¶"></a> ä¸€äº›å¥½ç”¨çš„æ’ä»¶</h2>
<p>Hexo å®˜æ–¹æ¨èæ’ä»¶å°±è¶³å¤Ÿï¼š<a target="_blank" rel="noopener external nofollow noreferrer" href="https://fluid-dev.github.io/hexo-fluid-docs/advance/#hexo-%E6%8F%92%E4%BB%B6">https://fluid-dev.github.io/hexo-fluid-docs/advance/#hexo - æ’ä»¶</a></p>
<h2 id="è‡´è°¢"><a class="markdownIt-Anchor" href="#è‡´è°¢"></a> è‡´è°¢</h2>
<p>æ„Ÿè°¢ <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/banyee19">@banyee19</a> åœ¨æ—¥å¤œèƒŒæ™¯å›¾åˆ‡æ¢æ–¹é¢çš„æ¢ç©¶ï¼Œæˆ‘ä¸€åº¦ä»¥ä¸ºæˆ‘çš„åˆ‡æ¢æ•ˆæœæ˜¯æ­£å¸¸çš„ï¼Œä½†ä½¿ç”¨å…¶ä»–è®¾å¤‡è¿›è¡ŒæŸ¥çœ‹åæ‰å‘ç°æ•ˆæœæ— æ³•æ­£ç¡®å®ç°ï¼Œæ•…æ­¤é‡æ„ã€‚</p>
<p>ç›¸å…³æ–‡ç« ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://kznep19.blog/2025/04/26/%E7%99%BD%E5%A4%A9%E9%BB%91%E5%A4%9C%E8%83%8C%E6%99%AF%E5%9B%BE%E5%88%87%E6%8D%A2/">Hexo Fluid èƒŒæ™¯å›¾éšæ—¥å¤œæ¨¡å¼åˆ‡æ¢</a> by <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/banyee19">@banyee19</a></li>
</ul>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="https://4rozen.github.io/">4rozeN</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="https://4rozen.github.io/posts/60191">https://4rozen.github.io/posts/60191</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥æº <a href="https://4rozeN.github.io" target="_blank">æ—ä¹‹ä»‹ | 4rozeN</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E7%BE%8E%E5%8C%96/">ç¾åŒ–</a><a class="post-meta__tags" href="/tags/Hexo/">Hexo</a><a class="post-meta__tags" href="/tags/fluid/">fluid</a><a class="post-meta__tags" href="/tags/%E6%97%A5%E5%A4%9C%E5%88%87%E6%8D%A2%E8%83%8C%E6%99%AF/">æ—¥å¤œåˆ‡æ¢èƒŒæ™¯</a><a class="post-meta__tags" href="/tags/CSS/">CSS</a><a class="post-meta__tags" href="/tags/JavaScript/">JavaScript</a></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related  no-desc" href="/posts/45101" title="ä¸€æ–‡ææ¸… Strapi5 çš„å®‰è£…ä¸ä½¿ç”¨ | è¸©å‘çˆ½ (bushi"><img class="cover" src= "https://ali-4rozen-oss.oss-cn-guangzhou.aliyuncs.com/blog/loading/loading.gif" data-lazy-src="https://ali-4rozen-oss.oss-cn-guangzhou.aliyuncs.com/blog/cover/%E5%90%8E%E7%AB%AF/strapi%E7%AC%94%E8%AE%B0.webp" onerror="onerror=null;src='https://ali-4rozen-oss.oss-cn-guangzhou.aliyuncs.com/blog/avatar/emo.webp'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">ä¸Šä¸€ç¯‡</div><div class="info-item-2">ä¸€æ–‡ææ¸… Strapi5 çš„å®‰è£…ä¸ä½¿ç”¨ | è¸©å‘çˆ½ (bushi</div></div></div></a><a class="pagination-related  no-desc" href="/posts/57159" title="åç¡•å¥¥åˆ›ä¸­å¿ƒä»¥åŠå…¶ä»–æœåŠ¡ç»„ä»¶å½»åº•åˆ é™¤å¸è½½"><img class="cover" src= "https://ali-4rozen-oss.oss-cn-guangzhou.aliyuncs.com/blog/loading/loading.gif" data-lazy-src="https://ali-4rozen-oss.oss-cn-guangzhou.aliyuncs.com/blog/cover/%E9%9A%8F%E6%83%B3%E9%9A%8F%E8%AE%B0/%E5%A5%A5%E5%88%9B%E5%8D%B8%E8%BD%BD.webp" onerror="onerror=null;src='https://ali-4rozen-oss.oss-cn-guangzhou.aliyuncs.com/blog/avatar/emo.webp'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">ä¸‹ä¸€ç¯‡</div><div class="info-item-2">åç¡•å¥¥åˆ›ä¸­å¿ƒä»¥åŠå…¶ä»–æœåŠ¡ç»„ä»¶å½»åº•åˆ é™¤å¸è½½</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><a class="pagination-related no-desc" href="/posts/38001" title="ä½¿ç”¨ CSS å’Œ JS å®ç°åšå®¢å¯¼èˆªæ çº¿æ¡åŠ¨ç”»æ•ˆæœ"><img class="cover" src= "https://ali-4rozen-oss.oss-cn-guangzhou.aliyuncs.com/blog/loading/loading.gif" data-lazy-src="https://ali-4rozen-oss.oss-cn-guangzhou.aliyuncs.com/blog/cover/Hexo/%E8%B7%AF%E5%BE%84%E5%8A%A8%E7%94%BB.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-11-01</div><div class="info-item-2">ä½¿ç”¨ CSS å’Œ JS å®ç°åšå®¢å¯¼èˆªæ çº¿æ¡åŠ¨ç”»æ•ˆæœ</div></div></div></a><a class="pagination-related no-desc" href="/posts/41513" title="Hexo åšå®¢ Fluid ä¸»é¢˜å®ç°ä»£ç æŠ˜å å’Œæ–‡å­—é®ç›–æ•ˆæœ"><img class="cover" src= "https://ali-4rozen-oss.oss-cn-guangzhou.aliyuncs.com/blog/loading/loading.gif" data-lazy-src="https://ali-4rozen-oss.oss-cn-guangzhou.aliyuncs.com/blog/cover/Hexo/Hexo%E7%BE%8E%E5%8C%96.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-11-01</div><div class="info-item-2">Hexo åšå®¢ Fluid ä¸»é¢˜å®ç°ä»£ç æŠ˜å å’Œæ–‡å­—é®ç›–æ•ˆæœ</div></div></div></a><a class="pagination-related no-desc" href="/posts/8736" title="fluid åˆ›å»ºè‡ªå®šä¹‰å¯¼èˆªé¡µ"><img class="cover" src= "https://ali-4rozen-oss.oss-cn-guangzhou.aliyuncs.com/blog/loading/loading.gif" data-lazy-src="https://ali-4rozen-oss.oss-cn-guangzhou.aliyuncs.com/blog/cover/Hexo/Hexo%E9%AD%94%E6%94%B9.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-05-15</div><div class="info-item-2">fluid åˆ›å»ºè‡ªå®šä¹‰å¯¼èˆªé¡µ</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> è¯„è®º</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src= "https://ali-4rozen-oss.oss-cn-guangzhou.aliyuncs.com/blog/loading/loading.gif" data-lazy-src="https://ali-4rozen-oss.oss-cn-guangzhou.aliyuncs.com/blog/avatar/avatar.jpg" onerror="this.onerror=null;this.src='https://ali-4rozen-oss.oss-cn-guangzhou.aliyuncs.com/blog/avatar/emo.webp'" alt="avatar"/></div><div class="author-info-name">4rozeN</div><div class="author-info-description">Coding noob è‡ªè¿›é˜¶</div><div class="site-data"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">30</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">48</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">7</div></a></div><div class="card-info-social-icons"><a class="social-icon" href="/rss2.xml" target="_blank" title="RSS"><i class="fas fa-rss" style="color: #ff6600;"></i></a><a class="social-icon" href="https://github.com/4rozeN" rel="external nofollow noreferrer" target="_blank" title="Github"><i class="fab fa-github" style="color: #5F6E7CFF;"></i></a><a class="social-icon" href="https://steamcommunity.com/id/430426/" rel="external nofollow noreferrer" target="_blank" title="Steam"><i class="fab fa-steam" style="color: #5F6E7CFF;"></i></a><a class="social-icon" href="mailto:mail4chen@foxmail.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>å…¬å‘Š</span></div><div class="announcement_content">æœ€è¿‘åœ¨åŠªåŠ›å­¦ä¹ Fabric moddingå’Œå…¶ä»–å†…å®¹ï¼Œä¸çŸ¥å¤©åœ°ä¸ºä½•ç‰©ã€‚</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E8%83%8C%E6%99%AF%E5%9B%BE%E5%85%A8%E5%B1%8F%E6%95%88%E6%9E%9C"><span class="toc-number">1.</span> <span class="toc-text"> å®ç°èƒŒæ™¯å›¾å…¨å±æ•ˆæœ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E8%83%8C%E6%99%AF%E5%9B%BE%E9%9A%8F%E6%97%A5%E5%A4%9C%E4%B8%BB%E9%A2%98%E5%88%87%E6%8D%A2%E6%95%88%E6%9E%9C"><span class="toc-number">2.</span> <span class="toc-text"> å®ç°èƒŒæ™¯å›¾éšæ—¥å¤œä¸»é¢˜åˆ‡æ¢æ•ˆæœ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A2%84%E5%8A%A0%E8%BD%BD%E7%9A%84%E5%8F%AF%E8%83%BD%E9%97%AE%E9%A2%98"><span class="toc-number">3.</span> <span class="toc-text"> é¢„åŠ è½½çš„å¯èƒ½é—®é¢˜</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%AF%E8%83%BD%E7%9A%84%E9%97%AE%E9%A2%98%E6%9D%A5%E6%BA%90"><span class="toc-number">3.1.</span> <span class="toc-text"> å¯èƒ½çš„é—®é¢˜æ¥æº</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95"><span class="toc-number">3.2.</span> <span class="toc-text"> è§£å†³åŠæ³•</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%9E%E9%A2%84%E6%9C%9F%E7%9A%84%E5%88%87%E6%8D%A2%E6%95%88%E6%9E%9C"><span class="toc-number">4.</span> <span class="toc-text"> éé¢„æœŸçš„åˆ‡æ¢æ•ˆæœ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A0%E6%B3%95%E5%8C%B9%E9%85%8D%E9%A1%B5%E9%9D%A2%E6%8E%92%E9%99%A4%E9%A1%B5%E9%9D%A2%E4%B8%8D%E7%94%9F%E6%95%88"><span class="toc-number">5.</span> <span class="toc-text"> æ— æ³•åŒ¹é…é¡µé¢ &#x2F; æ’é™¤é¡µé¢ä¸ç”Ÿæ•ˆ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%AF%9B%E7%8E%BB%E7%92%83%E5%BA%95%E9%A1%B5%E6%95%88%E6%9E%9C"><span class="toc-number">6.</span> <span class="toc-text"> æ¯›ç»ç’ƒåº•é¡µæ•ˆæœ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E4%BA%9B%E5%A5%BD%E7%94%A8%E7%9A%84%E6%8F%92%E4%BB%B6"><span class="toc-number">7.</span> <span class="toc-text"> ä¸€äº›å¥½ç”¨çš„æ’ä»¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%B4%E8%B0%A2"><span class="toc-number">8.</span> <span class="toc-text"> è‡´è°¢</span></a></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2024 - 2025 By 4rozeN</div><div class="footer_custom_text"><span id="performance-info"></span>
</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button><a id="to_comment" href="#post-comment" title="å‰å¾€è¯„è®º"><i class="fas fa-comments"></i></a><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button id="darkmode" type="button" title="æ—¥é—´å’Œå¤œé—´æ¨¡å¼åˆ‡æ¢"><i class="fas fa-adjust"></i></button><button id="translateLink" type="button" title="ç®€ç¹è½¬æ¢">ç¹</button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.bootcdn.net/ajax/libs/instant.page/5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.bootcdn.net/ajax/libs/vanilla-lazyload/19.1.3/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"><script>(async () => {
  const showKatex = () => {
    document.querySelectorAll('#article-container .katex').forEach(el => el.classList.add('katex-show'))
  }

  if (!window.katex_js_css) {
    window.katex_js_css = true
    await btf.getCSS('https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css')
    if (true) {
      await btf.getScript('https://cdn.jsdelivr.net/npm/katex/dist/contrib/copy-tex.min.js')
    }
  }

  showKatex()
})()</script><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'
  const option = null

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://4rozen-blog.netlify.app/.netlify/functions/twikoo',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const init = (el = document, path = location.pathname) => {
    twikoo.init({
      el: el.querySelector('#twikoo-wrap'),
      envId: 'https://4rozen-blog.netlify.app/.netlify/functions/twikoo',
      region: '',
      onCommentLoaded: () => {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      },
      ...option,
      path: isShuoshuo ? path : (option && option.path) || path
    })

    

    isShuoshuo && (window.shuoshuoComment.destroyTwikoo = () => {
      if (el.children.length) {
        el.innerHTML = ''
        el.classList.add('no-comment')
      }
    })
  }

  const loadTwikoo = (el, path) => {
    if (typeof twikoo === 'object') setTimeout(() => init(el, path), 0)
    else btf.getScript('https://registry.npmmirror.com/twikoo/1.6.44/files/dist/twikoo.min.js').then(() => init(el, path))
  }

  if (isShuoshuo) {
    'Twikoo' === 'Twikoo'
      ? window.shuoshuoComment = { loadComment: loadTwikoo }
      : window.loadOtherComment = loadTwikoo
    return
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script></div><script src="/js/rightmenu.js"></script><canvas id="universe"></canvas><script src="/js/ripple-toggle.js"></script><script src="/js/star.js"></script><script src="/js/watch.js"></script><script src="/js/butterfly.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.bootcdn.net/ajax/libs/canvas-nest.js/2.0.4/canvas-nest.js"></script><script src="https://lib.baomitu.com/pjax/0.2.8/pjax.min.js"></script><script>(() => {
  const pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

  window.pjax = new Pjax({
    elements: 'a:not([target="_blank"])',
    selectors: pjaxSelectors,
    cacheBust: false,
    analytics: false,
    scrollRestoration: false
  })

  const triggerPjaxFn = (val) => {
    if (!val) return
    Object.values(val).forEach(fn => fn())
  }

  document.addEventListener('pjax:send', () => {
    // removeEventListener
    btf.removeGlobalFnEvent('pjaxSendOnce')
    btf.removeGlobalFnEvent('themeChange')

    // reset readmode
    const $bodyClassList = document.body.classList
    if ($bodyClassList.contains('read-mode')) $bodyClassList.remove('read-mode')

    triggerPjaxFn(window.globalFn.pjaxSend)
  })

  document.addEventListener('pjax:complete', () => {
    btf.removeGlobalFnEvent('pjaxCompleteOnce')
    document.querySelectorAll('script[data-pjax]').forEach(item => {
      const newScript = document.createElement('script')
      const content = item.text || item.textContent || item.innerHTML || ""
      Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
      newScript.appendChild(document.createTextNode(content))
      item.parentNode.replaceChild(newScript, item)
    })

    triggerPjaxFn(window.globalFn.pjaxComplete)
  })

  document.addEventListener('pjax:error', e => {
    if (e.request.status === 404) {
      const usePjax = true
      true 
        ? (usePjax ? pjax.loadUrl('/404') : window.location.href = '/404')
        : window.location.href = e.request.responseURL
    }
  })
})()</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  æ•°æ®åŠ è½½ä¸­</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div><!-- hexo injector body_end start -->
<script src="https://cdn.jsdelivr.net/npm/hexo-shiki-plugin@latest/lib/codeblock.js"></script>

  <script>
  const CODE_CONFIG = {
    beautify: true,
    highlightCopy: true,
    highlightLang: true,
    highlightHeightLimit: 360,
    isHighlightShrink: false,
    copy: {
      success: 'å¤åˆ¶æˆåŠŸ',
      error: 'å¤åˆ¶å¤±è´¥',
      noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒå¤åˆ¶åŠŸèƒ½',
    }
  };
  console.log(
    `%c hexo-shiki-plugin %c v1.0.27 %c https://github.com/nova1751/hexo-shiki-plugin`,
    "color: #fff; background: #5f5f5f",
    "color: #fff; background: #80c8f8",
    ""
  );
  </script>
  <!-- hexo injector body_end end --></body></html>