<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>一文搞清 Strapi5 的安装与使用 | 踩坑爽 (bushi | 林之介 | 4rozeN</title><meta name="author" content="4rozeN"><meta name="copyright" content="4rozeN"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="我的 Strapi 版本：v5.0.0 节点版本：v20.13.1 数据库：MySQL8    数据库 受到推崇的 最低限度      MySQL 8.0 8.0    玛丽亚数据库  10.6 10.5   PostgreSQL 14.0 12.0   SQLite 3 3    Strapi 官方文档地址：https://strapi.nodejs.cn/dev-docs/installat"><meta property="og:type" content="article"><meta property="og:title" content="一文搞清 Strapi5 的安装与使用 | 踩坑爽 (bushi"><meta property="og:url" content="https://4rozen.github.io/archives/%E5%90%8E%E7%AB%AF/45101.html"><meta property="og:site_name" content="林之介 | 4rozeN"><meta property="og:description" content="我的 Strapi 版本：v5.0.0 节点版本：v20.13.1 数据库：MySQL8    数据库 受到推崇的 最低限度      MySQL 8.0 8.0    玛丽亚数据库  10.6 10.5   PostgreSQL 14.0 12.0   SQLite 3 3    Strapi 官方文档地址：https://strapi.nodejs.cn/dev-docs/installat"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://ali-4rozen-oss.oss-cn-guangzhou.aliyuncs.com/blog/cover/%E5%90%8E%E7%AB%AF/strapi%E7%AC%94%E8%AE%B0.webp"><meta property="article:published_time" content="2024-07-25T10:00:35.000Z"><meta property="article:modified_time" content="2025-07-18T09:13:13.119Z"><meta property="article:author" content="4rozeN"><meta property="article:tag" content="Strapi"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://ali-4rozen-oss.oss-cn-guangzhou.aliyuncs.com/blog/cover/%E5%90%8E%E7%AB%AF/strapi%E7%AC%94%E8%AE%B0.webp"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "一文搞清 Strapi5 的安装与使用 | 踩坑爽 (bushi",
  "url": "https://4rozen.github.io/archives/%E5%90%8E%E7%AB%AF/45101.html",
  "image": "https://ali-4rozen-oss.oss-cn-guangzhou.aliyuncs.com/blog/cover/%E5%90%8E%E7%AB%AF/strapi%E7%AC%94%E8%AE%B0.webp",
  "datePublished": "2024-07-25T10:00:35.000Z",
  "dateModified": "2025-07-18T09:13:13.119Z",
  "author": [
    {
      "@type": "Person",
      "name": "4rozeN",
      "url": "https://4rozen.github.io/"
    }
  ]
}</script><link rel="shortcut icon" href="/img/ico/favicon.ico"><link rel="canonical" href="https://4rozen.github.io/archives/%E5%90%8E%E7%AB%AF/45101.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="google-site-verification" content="ggjgSh07y0_dbMruvoZhis-cgZn-t6ujdG7N1z7ZA88"><meta name="msvalidate.01" content="F0E34077A7291AC38724F6A3804B1B29"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.7.2/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media=&quot;all&quot;"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media=&quot;all&quot;"><script>(()=>{const e={set:(e,t,o)=>{if(!o)return;const n=Date.now()+864e5*o;localStorage.setItem(e,JSON.stringify({value:t,expiry:n}))},get:e=>{const t=localStorage.getItem(e);if(!t)return;const{value:o,expiry:n}=JSON.parse(t);if(!(Date.now()>n))return o;localStorage.removeItem(e)}};window.btf={saveToLocal:e,getScript:(e,t={})=>new Promise((o,n)=>{const a=document.createElement("script");a.src=e,a.async=!0,Object.entries(t).forEach(([e,t])=>a.setAttribute(e,t)),a.onload=a.onreadystatechange=()=>{a.readyState&&!/loaded|complete/.test(a.readyState)||o()},a.onerror=n,document.head.appendChild(a)}),getCSS:(e,t)=>new Promise((o,n)=>{const a=document.createElement("link");a.rel="stylesheet",a.href=e,t&&(a.id=t),a.onload=a.onreadystatechange=()=>{a.readyState&&!/loaded|complete/.test(a.readyState)||o()},a.onerror=n,document.head.appendChild(a)}),addGlobalFn:(e,t,o=!1,n=window)=>{const a=n.globalFn||{};a[e]=a[e]||{},a[e][o||Object.keys(a[e]).length]=t,n.globalFn=a}};const t=()=>{document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},o=()=>{document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};btf.activateDarkMode=t,btf.activateLightMode=o;const n=e.get("theme"),a=(new Date).getHours();void 0===n?a<=6||a>=18?t():o():"light"===n?o():t();const r=e.get("aside-status");void 0!==r&&document.documentElement.classList.toggle("hide-aside","hide"===r);/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})()</script><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"/search.xml",preload:!1,top_n_per_article:1,unescape:!1,languages:{hits_empty:"未找到符合您查询的内容：${query}",hits_stats:"共找到 ${hits} 篇文章"}},translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"简"},highlight:void 0,copy:{success:"复制成功",error:"复制失败",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,post:!1},runtime:"天",dateSuffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:{limitCount:100,languages:{author:"作者: 4rozeN",link:"链接: ",source:"来源: 林之介 | 4rozeN",info:"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},lightbox:"fancybox",Snackbar:{chs_to_cht:"已切换为繁体中文",cht_to_chs:"已切换为简体中文",day_to_night:"已切换为深色模式",night_to_day:"已切换为浅色模式",bgLight:"#49b1f5",bgDark:"#1f1f1f",position:"bottom-left"},infinitegrid:{js:"https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js",buttonText:"加载更多"},isPhotoFigcaption:!1,islazyloadPlugin:!0,isAnchor:!0,percent:{toc:!0,rightside:!1},autoDarkmode:!1}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"一文搞清 Strapi5 的安装与使用 | 踩坑爽 (bushi",isHighlightShrink:!1,isToc:!0,pageType:"post"}</script><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""><link href="https://fonts.googleapis.cn/css2?family=Fira+Code:wght@300..700&amp;family=Noto+Sans+SC:wght@100..900&amp;family=Noto+Serif+SC:wght@200..900&amp;display=swap" rel="stylesheet"><link rel="stylesheet" href="/css/figure.css"><link rel="stylesheet" href="/css/butterfly.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-shiki-plugin@latest/lib/codeblock.css"><style>:root{--hl-color:#abb2bf;--hl-bg:#282c34;--hltools-bg:#21252b;--hltools-color:#bbbbbc;--hlnumber-bg:#282c34;--hlnumber-color:#495162;--hlscrollbar-bg:#373c47;--hlexpand-bg:linear-gradient(180deg,rgba(40,44,52,0.1),rgba(40,44,52,0.9))}</style><style>.code-expand-btn:not(.expand-done)~* div.codeblock,.code-expand-btn:not(.expand-done)~div.codeblock{overflow:hidden;height:360px}</style><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/rss2.xml" title="林之介 | 4rozeN" type="application/rss+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/loading/loading.gif" data-lazy-src="/img/avatar/avatar.jpg" onerror="this.onerror=null,this.src=&quot;/img/avatar/emo.webp&quot;" alt="avatar"></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">25</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">42</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><div class="menus_items"><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-book"></i><span> 文章</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 全部文章</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类列表</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签列表</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-user"></i><span> 个人</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image:url(https://ali-4rozen-oss.oss-cn-guangzhou.aliyuncs.com/blog/cover/%E5%90%8E%E7%AB%AF/strapi%E7%AC%94%E8%AE%B0.webp)"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src="/img/loading/loading.gif" data-lazy-src="/img/nav/mySVG.svg" alt="Logo"></a><a class="nav-page-title" href="/"><span class="site-name">一文搞清 Strapi5 的安装与使用 | 踩坑爽 (bushi</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-book"></i><span> 文章</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 全部文章</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类列表</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签列表</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-user"></i><span> 个人</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">一文搞清 Strapi5 的安装与使用 | 踩坑爽 (bushi</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-07-25T10:00:35.000Z" title="发表于 2024-07-25 18:00:35">2024-07-25</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-07-18T09:13:13.119Z" title="更新于 2025-07-18 17:13:13">2025-07-18</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%90%8E%E7%AB%AF/">后端</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">5.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>20分钟</span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><div id="post-outdate-notice" data="{&quot;limitDay&quot;:15,&quot;messagePrev&quot;:&quot;文章最后编辑于&quot;,&quot;messageNext&quot;:&quot;天前。&quot;,&quot;postUpdate&quot;:&quot;2025-07-18 17:13:13&quot;}" hidden=""></div><link rel="stylesheet external nofollow noreferrer" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/hint.css/2.7.0/hint.min.css"><blockquote><p>我的 Strapi 版本：v5.0.0</p><p>节点版本：v20.13.1</p><p>数据库：MySQL8</p><table><thead><tr><th>数据库</th><th>受到推崇的</th><th>最低限度</th></tr></thead><tbody><tr><td>MySQL</td><td>8.0</td><td>8.0</td></tr><tr><td>玛丽亚数据库</td><td>10.6</td><td>10.5</td></tr><tr><td>PostgreSQL</td><td>14.0</td><td>12.0</td></tr><tr><td>SQLite</td><td>3</td><td>3</td></tr></tbody></table><p>Strapi 官方文档地址：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://strapi.nodejs.cn/dev-docs/installation/cli">https://strapi.nodejs.cn/dev-docs/installation/cli</a></p></blockquote><meta name="referrer" content="no-referrer"><meta name="description" content="从安装到使用，搞清Strapi5用作后端数据服务器的一切坑">## 前言<p>本篇文章主要是从安装到使用，说说我在 Windows | WindowsServer 上使用 Strapi5 作后端数据服务器时碰到的一切坑。</p><h2 id="安装strapi"><a class="markdownIt-Anchor" href="#安装strapi"></a> 安装 Strapi</h2><h3 id="检查本地环境"><a class="markdownIt-Anchor" href="#检查本地环境"></a> 检查本地环境</h3><p>请转到 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://strapi.nodejs.cn/dev-docs/installation/cli">Strapi 官方文档</a>，对照官方文档要求检查你本地的 <code>Node.js</code> 和 <code>npm</code> 版本。我的环境如下：</p><ul><li><p>Node.js 版本：</p><figure class="shiki bash"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">$</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">node</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">-v</span></span>
<span class="line"><span style="color:#dcdcaa">v20.13.1</span></span></code></pre></div></div></figure></li><li><p>npm 包管理器版本</p><figure class="shiki bash"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">$</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">npm</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">-v</span></span>
<span class="line"><span style="color:#dcdcaa">10.8.2</span></span></code></pre></div></div></figure></li></ul><p>官方文档中使用 Python 是为了支持它默认的 SQLite 数据库，我这里使用的是 PHPStudy 集成的 MySQL8, 数据库，所以 Python 环境是不必须的。</p><blockquote><p>✋ 提醒</p><p>Strapi 不支持 MongoDB。</p></blockquote><h3 id="安装yarn可选"><a class="markdownIt-Anchor" href="#安装yarn可选"></a> 安装 yarn（可选）</h3><p>我之后投入了 yarn 的怀抱，所以这里可以安装一下 yarn 作为包管理器，<strong>非必须！</strong></p><figure class="shiki bash"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">npm</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">install</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">-g</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">yarn</span></span></code></pre></div></div></figure><p>卸载命令是</p><figure class="shiki bash"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">npm</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">uninstall</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">yarn</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">-g</span></span></code></pre></div></div></figure><p>我的 yarn 版本是</p><figure class="shiki bash"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">$</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">yarn</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">-v</span></span>
<span class="line"><span style="color:#dcdcaa">1.22.22</span></span></code></pre></div></div></figure><h2 id="创建strapi项目"><a class="markdownIt-Anchor" href="#创建strapi项目"></a> 创建 Strapi 项目</h2><p>在一个你准备好的目录中，使用终端 <code>cmd</code> 或 <code>powershell</code> 执行</p><figure class="shiki bash"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">yarn</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">create</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">strapi</span></span></code></pre></div></div></figure><blockquote><p>✋ 注意</p><p>Yarn does not support passing the version tag such as <code>@latest</code>, as opposed to npm. If you experience unexpected results with yarn and the latest version of Strapi is not installed, you might need to <a target="_blank" rel="noopener external nofollow noreferrer" href="https://yarn.nodejs.cn/cli/cache/clean">run the <code>yarn cache clean</code> command</a> to clean your Yarn cache.</p><p>Yarn 不支持传递版本标签，如 <code>@latest</code>, 这与 npm 相反。如果您在使用 yarn 时遇到意外结果，没有安装最新版本的 Strapi，您可能需要运行 [yarn cache clean](<a target="_blank" rel="noopener external nofollow noreferrer" href="https://yarn">https://yarn</a> . nodejs . cn/CLI/cache/clean) 命令来清理 Yarn 缓存。</p></blockquote><p>或者使用 npm</p><figure class="shiki bash"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">npx</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">create-strapi@latest</span></span></code></pre></div></div></figure><p>我推荐创建时，使用 npm 以保证安装最新版本的 Strapi</p><p>以下是我的安装选择：</p><figure class="shiki bash"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#6a9955"># E:\Coding\StrapiProjects\demo1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#dcdcaa">$</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">npx</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">create-strapi@latest</span></span>
<span class="line"><span style="color:#dcdcaa">Need</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">to</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">install</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">the</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">following</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">packages:</span></span>
<span class="line"><span style="color:#dcdcaa">create-strapi@5.0.5</span></span>
<span class="line"><span style="color:#dcdcaa">Ok</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">to</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">proceed?</span><span style="color:#d4d4d4"> (y) y</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">Strapi</span><span style="color:#d4d4d4">   </span><span style="color:#ce9178">v5.0.5</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">�</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">Let's create your new project</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ce9178">? What is the name of your project? demo1</span></span>
<span class="line"><span style="color:#ce9178">? What is the name of your project? demo1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ce9178">We can't</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">find</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">any</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">auth</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">credentials</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">in</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">your</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">Strapi</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">config.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#dcdcaa">Create</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">a</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">free</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">account</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">on</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">Strapi</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">Cloud</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">and</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">benefit</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">from:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#dcdcaa">-</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">✦</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">Blazing-fast</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">✦</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">deployment</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">for</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">your</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">projects</span></span>
<span class="line"><span style="color:#dcdcaa">-</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">✦</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">Exclusive</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">✦</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">access</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">to</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">resources</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">to</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">make</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">your</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">project</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">successful</span></span>
<span class="line"><span style="color:#dcdcaa">-</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">An</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">✦</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">Awesome</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">✦</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">community</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">and</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">full</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">enjoyment</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">of</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">Strapi's ecosystem</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ce9178">Start your 14-day free trial now!</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#ce9178">? Please log in or sign up. Skip</span></span>
<span class="line"><span style="color:#ce9178">? Do you want to use the default database (sqlite) ? (Y/n) n</span></span>
<span class="line"><span style="color:#ce9178">? Choose your default database client mysql</span></span>
<span class="line"><span style="color:#ce9178">? Database name: demo1</span></span>
<span class="line"><span style="color:#ce9178">? Host: localhost</span></span>
<span class="line"><span style="color:#ce9178">? Port: 3306</span></span>
<span class="line"><span style="color:#ce9178">? Username: root</span></span>
<span class="line"><span style="color:#ce9178">? Password: ****</span></span>
<span class="line"><span style="color:#ce9178">? Enable SSL connection: (y/N) N</span></span>
<span class="line"><span style="color:#ce9178">? Start with an example structure &amp; data? (y/N) N</span></span>
<span class="line"><span style="color:#ce9178">? Start with Typescript? (Y/n) n</span></span>
<span class="line"><span style="color:#ce9178">? Install dependencies with npm? (Y/n) Y</span></span>
<span class="line"><span style="color:#ce9178">? Initialize a git repository? (Y/n) n</span></span></code></pre></div></div></figure><ul><li><code>? Please log in or sign up. Skip</code>：意思是让你进行在线登录，我选择跳过</li><li><code>? Do you want to use the default database (sqlite) ? (Y/n) n</code>：是否使用默认的 sqlite 数据库，我选择否</li><li><code>? Choose your default database client mysql</code>：出现三个选项让你选择，我选择 mysql</li><li><code>? Database name: demo1</code>：输入要连接的数据库名字（准备好一个空表的数据库）</li><li><code>? Host: localhost</code>：数据库的 host 地址，本地就是 localhost，远程填公网 ip</li><li><code>? Port: 3306</code>：数据库端口，我选择默认端口 3306</li><li><code>? Enable SSL connection: (y/N) N</code>：是否启用 SSL 连接？可自行决定（<a target="_blank" rel="noopener external nofollow noreferrer" href="https://wiki.sqlfans.cn/mysql/mysql-bp-ssl-enable.html">什么是数据库 SSL 连接？</a>）</li><li><code>? Start with an example structure &amp; data? (y/N) N</code>：是否需要安装时附带简单数据？我自行决定数据，所以选否</li><li><code>? Start with Typescript? (Y/n) n</code>：项目需要 TypeScript 吗？可自行决定</li><li><code>? Install dependencies with npm? (Y/n) Y</code>：是否使用 npm 安装依赖？我选择是，省去手动安装依赖的命令</li><li><code>? Initialize a git repository? (Y/n) n</code>：是否初始化一个 git 仓库？可自行决定</li></ul><p>经过些许等待，看到以下画面说明成功了：</p><p><img src="/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410111812868.png" alt="image-20241011181201688"></p><p>如果你在安装时选择了不自动安装依赖，进入项目内是没有 node-modules 包的，可手动安装</p><figure class="shiki bash"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">npm</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">install</span></span></code></pre></div></div></figure><p>安装好依赖之后请先别着急启动，接着看汉化步骤（如果你英语好，也请看看汉化小节的最后，运行命令在那里）</p><h2 id="strapi汉化"><a class="markdownIt-Anchor" href="#strapi汉化"></a> Strapi 汉化</h2><p><img src="/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202409210045773.png" alt="image-20240921004508650"></p><p>项目运行登录进面板之后点击左下角的 profile 进行设置</p><p><img src="/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202409210109467.png" alt="image-20240921010929358"></p><h2 id="运行strapi应用"><a class="markdownIt-Anchor" href="#运行strapi应用"></a> 运行 Strapi 应用</h2><figure class="shiki sh"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">npm</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">run</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">develop</span></span></code></pre></div></div></figure><p>或</p><figure class="shiki sh"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">yarn</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">develop</span></span></code></pre></div></div></figure><h2 id="strapi运行-mysql建表报错"><a class="markdownIt-Anchor" href="#strapi运行-mysql建表报错"></a> Strapi 运行 - MySQL 建表报错</h2><blockquote><p>Error: alter table <code>i18n_locale</code> add index <code>i18n_locale_documents_idx</code>(<code>document_id</code>, <code>locale</code>, <code>published_at</code>)<br>Specified key was too long; max key length is 1000 bytes</p></blockquote><p>类似上述报错，这是因为 MySQL 对于 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://so.csdn.net/so/search?q=InnoDB%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E&amp;spm=1001.2101.3001.7020">InnoDB 存储引擎</a>有一个索引键长度的限制，这个限制基于字符集的不同而不同。在使用 <code>utf8</code> 字符集时，每个字符可能占用 <code>3</code> 个字节，那么对于 <code>innodb</code> 表，索引键的最大长度大约为 <code>1000</code> 个字符左右（因为 <code>3072 / 3 ≈ 1024</code>）。若字符集是 <code>utf8mb4</code>，每个字符可能占用 <code>4</code> 个字节，所以最大长度会进一步减少到 <code>768</code> 个字符左右（<code>3072 / 4 = 768</code>）</p><blockquote><p>uf8mb4 字符集:<br>要在 Mysql 中保存 4 字节长度的 UTF-8 字符，需要使用 utf8mb4 字符集（mb4 就是 most bytes 4 的意思，专门用来兼容四字节的 unicode），但只有 5.5.3 版本以后的才支持。<br>为了获取更好的兼容性，应该总是使用 utf8mb4 而非 utf8. 对于 CHAR 类型数据，utf8mb4 会多消耗一些空间，根据 Mysql 官方建议，使用 VARCHAR 替代 CHAR。其实，utf8mb4 是 utf8 的超集，理论上原来使用 utf8，然后将字符集修改为 utf8mb4，也会不会对已有的 utf8 编码读取产生任何问题。当然，为了节省空间一般情况下使用 utf8 也就够了。</p></blockquote><h3 id="解决办法"><a class="markdownIt-Anchor" href="#解决办法"></a> 解决办法</h3><p>由于我使用的是 PHPstudy 集成的 MySQL8 所以直接找到 PHPstudy 将引擎改为 InnoDB 就好了</p><p><img src="/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202409210102415.png" alt="image-20240921010242363"></p><h2 id="strapi启动项目登录凭证"><a class="markdownIt-Anchor" href="#strapi启动项目登录凭证"></a> Strapi 启动项目登录凭证</h2><p>正确启动之后，会自动打开浏览器访问 admin 管理面板的注册页面，请自行注册。</p><p>注册产生的凭证决定你是否能登录上 Strapi 的管理面板，请妥善保存你的登录信息。</p><p>可只保存关键信息，下面是我的示例：</p><table><thead><tr><th>配置项</th><th>值</th></tr></thead><tbody><tr><td>name</td><td>4rozen</td></tr><tr><td>姓氏</td><td>Chen</td></tr><tr><td>电子邮件</td><td><code>maril4chen@foxmail.com</code></td></tr><tr><td>密码</td><td>Strapi1005</td></tr></tbody></table><h2 id="了解strapi的身份管理机制"><a class="markdownIt-Anchor" href="#了解strapi的身份管理机制"></a> 了解 Strapi 的身份管理机制</h2><p>Strapi 可以设置普通注册用户为 Authenticaed 或 public 分组</p><img src="/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202409231751921.png" alt="image-20240923175122837" style="zoom:67%"><p>由于进行普通注册会默认得到 jwt 令牌，所以我们可以设置为 Authenticaed 分组</p><p>这里你一定会疑惑 Strapi 的身份机制到底是什么？</p><p>对普通用户简单来说有以下身份：</p><ol><li>public：未经过身份验证的用户所在分组，访问接口只能访问公共接口</li><li>Authenticaed：经过身份验证的用户所在分组，访问接口更多</li></ol><blockquote><p>身份验证发生在登录或者是注册，能完成其中之一都可以算作身份验证通过</p></blockquote><p>每一个用户登录之前都是 public 用户，在注册后就成为了 Authenticaed user 经过验证的用户。</p><p>Strapi 使用 Roles 来对普通注册的 user 用户进行分组，在 content manager 中有默认创建的 Users 表，可以点击用户进行设置，分为以下身份：</p><ul><li><p>Authenticaed：身份验证通过的用户</p></li><li><p>public：路人</p></li></ul><p><img src="/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202409231812271.png" alt="image-20240923181205208"></p><p>Strapi 同样也对通过后台 admin 进行注册的管理员用户使用 Roles 来进行管理，分为：</p><ul><li>Author：作者可以管理他们创建的内容。</li><li>Editor：编辑者可以管理和发布内容，包括其他用户的内容。</li><li>Super Admin：超级用户可以访问和管理所有功能和设置。</li></ul><p><img src="/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202409231817758.png" alt="image-20240923181701691"></p><p><strong>第一次注册进来默认是 Super Admin 超级管理员。</strong></p><p>如果有更多人，点击 Administration panel 管理面板中的 Roles 角色可以进行分组管理。</p><h2 id="如何创建表结构"><a class="markdownIt-Anchor" href="#如何创建表结构"></a> 如何创建表结构</h2><p>可能看到上面的身份管理你一脸懵，没关系，我们先来创建一个用于存放商品信息的示例表：</p><ol><li><p>点击左侧侧边栏的 Content-Type Builder 内容构建<br><img src="/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410111826492.png" alt="image-20241011182621412"></p></li><li><p>点击 Create new collection type 创建内容集合类型的复杂数据表，这种表结构支持表与表之间的引用关联，这有助于我们创建符合数据要求的数据结构<br><img src="/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410111828046.png" alt="image-20241011182837966"></p></li><li><p>填写单数形式的表名，当然复数形式的表名也可以<br><img src="/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410111832024.png" alt="image-20241011183217936" style="zoom:67%"></p></li><li><p>点击 ADVANCED SETTINGS 高级设置<br><img src="/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410111834339.png" alt="image-20241011183455258" style="zoom:67%"></p></li><li><p>点击 Continue 继续，此时需要你进行表的字段设置，比如设置商品名和商品图如下：<br><img src="/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410111837231.png" alt="image-20241011183733123" style="zoom:67%"></p><p>具体设置 Text 类型的商品名如下：</p><p><img src="/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410111841019.png" alt="image-20241011184132933" style="zoom:67%"><img src="/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410111843156.png" alt="image-20241011184331055" style="zoom:67%"></p><p>设置商品图片如下：</p><p><img src="/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410111845558.png" alt="image-20241011184512477" style="zoom:67%"><img src="/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410111846054.png" alt="image-20241011184637966" style="zoom:67%"><img src="/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410111847286.png" alt="image-20241011184717164" style="zoom:67%"></p><p>添加成功之后别忘记点击 Save 保存</p><p><img src="/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410111848805.png" alt="image-20241011184806683"></p><p>之后 Strapi 将进行重启，不出意外将成功创建 Good 数据表和我们刚才添加的字段：</p><p><img src="/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410111853588.png" alt="image-20241011185353508"></p></li><li><p>填充数据：点击左侧边栏的 Content Manager 内容管理选择刚才我们创建的数据表 good 并点击右上角的 Create new entry 创建实体就行了。</p></li></ol><h2 id="strapi接口权限设置"><a class="markdownIt-Anchor" href="#strapi接口权限设置"></a> Strapi 接口权限设置</h2><p>数据表有了，怎么通过接口调试呢？</p><p>Strapi 的接口要想调试，首先得给予权限。</p><ol><li><p>找到左侧侧边栏的 setting 然后点击 Roles<br><img src="/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410111953074.png" alt="image-20241011195314924"></p><p><code>Authenticated</code> 为经过注册等身份验证手段的用户，而 Public 为公共用户。这将以此分割接口权限，<code>Public</code> 为随便就能访问的接口，<code>Authenticated</code> 为身份验证之后才能使用的接口</p></li><li><p>除了登录注册接口，我们可能会希望所有接口能够经过权限验证才能通行。但是我这里为了演示，就将 <code>good</code> 表的接口给 <code>Public</code> 用户开通：<br><img src="/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410111958468.png" alt="image-20241011195836369" style="zoom:67%"><img src="/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410112000118.png" alt="image-20241011200008789"></p></li><li><p>别忘记右上角点击保存。我这里直接使用浏览器进行接口测试：</p><img src="/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410112008460.png" alt="image-20241011200804395" style="zoom:67%"></li></ol><p>如果想接口限权，只允许身份验证的用户才能使用的话，就请给 <code>Authenticated</code> 用户开权限而不是 Public</p><h2 id="strapi接口文档查看"><a class="markdownIt-Anchor" href="#strapi接口文档查看"></a> Strapi 接口文档查看</h2><blockquote><p>说到接口，这里推荐安装 document 插件进行可视化查看，因为 Strapi 默认不提供可视化的接口文档，只提供接口路由可供查看。</p><p>插件官方文档：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://docs.strapi.io/dev-docs/plugins/documentation">https://docs.strapi.io/dev-docs/plugins/documentation</a></p></blockquote><p>安装接口文档插件命令</p><figure class="shiki sh"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">yarn</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">add</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">@strapi/plugin-documentation</span></span>
<span class="line"><span style="color:#6a9955"># 或者npm</span></span>
<span class="line"><span style="color:#dcdcaa">npm</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">install</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">@strapi/plugin-documentation</span></span></code></pre></div></div></figure><p>接口文档访问地址</p><figure class="shiki http"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#d4d4d4">http://localhost:1337/documentation/v1.0.0#/</span></span></code></pre></div></div></figure><p>其中 Users-Permissions - Auth 为认证用户和普通用户的接口，下面的 User-Permissions 则是管理员端的相关接口。</p><p><img src="/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202409231908943.png" alt="image-20240923190855795"></p><h2 id="配置邮箱发信插件"><a class="markdownIt-Anchor" href="#配置邮箱发信插件"></a> 配置邮箱发信插件</h2><p>Strapi 默认并不会自行配置邮件服务。</p><p>为了能够发送邮件（例如密码重置邮件），需要设置一个邮件提供商（如 SendGrid、Gmail、SMTP 等）。如果没有配置邮件提供商，本地 Strapi 无法实际发送邮件。</p><h3 id="安装-nodemailer-插件"><a class="markdownIt-Anchor" href="#安装-nodemailer-插件"></a> 安装 <code>nodemailer</code> 插件</h3><figure class="shiki sh"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#6a9955"># using yarn</span></span>
<span class="line"><span style="color:#dcdcaa">yarn</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">add</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">@strapi/provider-email-nodemailer</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a9955"># using npm</span></span>
<span class="line"><span style="color:#dcdcaa">npm</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">install</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">@strapi/provider-email-nodemailer</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">--save</span></span></code></pre></div></div></figure><h3 id="配置-email-provider"><a class="markdownIt-Anchor" href="#配置-email-provider"></a> <strong>配置 Email Provider</strong></h3><p>接下来，需要配置邮件提供商。</p><p>在 Strapi 中，邮件服务的配置文件位于 <code>config/plugins.js</code>。国内推荐 qq 或者网易邮箱（自行搜索邮箱开通 SMTP），这里介绍网易邮箱配置：</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#4ec9b0">module</span><span style="color:#d4d4d4">.</span><span style="color:#4ec9b0">exports</span><span style="color:#d4d4d4"> = ({ </span><span style="color:#9cdcfe">env</span><span style="color:#d4d4d4"> }) </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> ({</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#6a9955">// ...</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">email:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">config:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">provider:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'nodemailer'</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">providerOptions:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">host:</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">env</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'SMTP_HOST'</span><span style="color:#d4d4d4">), </span><span style="color:#6a9955">// 网易邮箱SMTP服务器地址</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">port:</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">env</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'SMTP_PORT'</span><span style="color:#d4d4d4">), </span><span style="color:#6a9955">// SSL端口</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">secure:</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">true</span><span style="color:#d4d4d4">, </span><span style="color:#6a9955">// 使用SSL</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">auth:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">user:</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">env</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'SMTP_USERNAME'</span><span style="color:#d4d4d4">), </span><span style="color:#6a9955">// 网易邮箱账号</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">pass:</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">env</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'SMTP_PASSWORD'</span><span style="color:#d4d4d4">), </span><span style="color:#6a9955">// 授权码</span></span>
<span class="line"><span style="color:#d4d4d4">        },</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#6a9955">// 其他自定义Nodemailer选项</span></span>
<span class="line"><span style="color:#d4d4d4">      },</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">settings:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">defaultFrom:</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">env</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'SMTP_USERNAME'</span><span style="color:#d4d4d4">),</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">defaultReplyTo:</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">env</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'SMTP_PASSWORD'</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">      },</span></span>
<span class="line"><span style="color:#d4d4d4">    },</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#6a9955">// ...</span></span>
<span class="line"><span style="color:#d4d4d4">});</span></span></code></pre></div></div></figure><h3 id="获取-smtp-授权码"><a class="markdownIt-Anchor" href="#获取-smtp-授权码"></a> 获取 SMTP 授权码</h3><ol><li>登录 163 邮箱。</li><li>打开 <strong>设置</strong> -&gt; <strong>POP3/SMTP/IMAP</strong>。</li><li>开启 <strong>SMTP</strong> 服务，并生成授权码（<strong>授权码只展示一次，请妥善保存</strong>）。</li></ol><p>在你的 <code>.env</code> 文件中设置相应的环境变量</p><figure class="shiki bash"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#6a9955"># Mail</span></span>
<span class="line"><span style="color:#9cdcfe">SMTP_HOST</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">smtp.163.com</span></span>
<span class="line"><span style="color:#9cdcfe">SMTP_PORT</span><span style="color:#d4d4d4">=</span><span style="color:#b5cea8">465</span></span>
<span class="line"><span style="color:#9cdcfe">SMTP_USERNAME</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">your_mail0@163.com</span></span>
<span class="line"><span style="color:#9cdcfe">SMTP_PASSWORD</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">JBxxxxxxxxxxxxtreB</span></span></code></pre></div></div></figure><h3 id="修改template模板"><a class="markdownIt-Anchor" href="#修改template模板"></a> 修改 template 模板</h3><p><strong>将模板中的发件人和刚才配置的插件文件中的发件人一致</strong></p><p><img src="/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202409232306287.png" alt="image-20240923230633136"></p><p>否则你可能遇到错误</p><figure class="shiki bash"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">Error:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">Mail</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">command</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">failed:</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">501</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">Mail</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">address</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">must</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">be</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">same</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">as</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">authorization</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">user.</span></span></code></pre></div></div></figure><h2 id="api-查询媒体数据"><a class="markdownIt-Anchor" href="#api-查询媒体数据"></a> API - 查询媒体数据</h2><p>在查询某些包含关系、媒体字段（图片、视频等）、组件或动态区域的接口时，如果不在查询参数中加上 <code>populate</code> 参数，Strapi 将默认不会查询返回，这是出于性能考虑。</p><p>例如 <code>/api/users/me</code> 接口，假设 Users 表中还包含一个 avatar 头像字段，则想要接口返回头像数据，应该是如下查询（<code>*</code> 表示查询所有关系）</p><figure class="shiki http"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#d4d4d4">http://localhost:1337/api/users/me?populate=*</span></span></code></pre></div></div></figure><p><img src="/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202409242108207.png" alt="image-20240924210837091"></p><blockquote><p>populate 参数中文文档参考：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://strapi.nodejs.cn/dev-docs/api/rest/populate-select/">https://strapi.nodejs.cn/dev-docs/api/rest/populate-select/</a></p></blockquote><h2 id="api-查询特定字段"><a class="markdownIt-Anchor" href="#api-查询特定字段"></a> API - 查询特定字段</h2><p>查询请求可以接受 <code>fields</code> 参数来<strong>仅选择</strong>某些字段。默认情况下，仅返回以下 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://strapi.nodejs.cn/dev-docs/backend-customization/models#model-attributes">字段类型</a>：</p><ul><li>字符串类型：字符串、文本、富文本、枚举、电子邮件、密码和 uid，</li><li>日期类型：日期、时间、日期时间和时间戳，</li><li>号码类型：整数、大整数、浮点数和小数，</li><li>通用类型：布尔值、数组和 JSON。</li></ul><blockquote><p>字段选择不适用于关系、媒体、组件或动态区域字段。要填充这些字段，请使用 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://strapi.nodejs.cn/dev-docs/api/rest/populate-select/#population"><code>populate</code> 参数</a>。</p></blockquote><p>该参数可以限制响应的数据字段，可以使得某些数据不被暴露，一定程度提高安全性和数据简洁性。</p><p>例如 <code>/api/users/me</code> 接口，查询所有的关系返回数据为</p><figure class="shiki json"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#d4d4d4">{</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"id"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">11</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"documentId"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"dtree1c2woi3njmz56xmttcm"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"username"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"xiaowu1"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"email"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"1681237971@qq.com"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"provider"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"local"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"confirmed"</span><span style="color:#d4d4d4">: </span><span style="color:#569cd6">true</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"blocked"</span><span style="color:#d4d4d4">: </span><span style="color:#569cd6">false</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"createdAt"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"2024-09-23T16:06:23.045Z"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"updatedAt"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"2024-09-24T12:51:20.561Z"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"publishedAt"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"2024-09-24T12:51:20.528Z"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"locale"</span><span style="color:#d4d4d4">: </span><span style="color:#569cd6">null</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"avatar"</span><span style="color:#d4d4d4">: {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"id"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">32</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"documentId"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"nq7hj2shguktf5begtsluvup"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"name"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"头像.jpg"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"alternativeText"</span><span style="color:#d4d4d4">: </span><span style="color:#569cd6">null</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"caption"</span><span style="color:#d4d4d4">: </span><span style="color:#569cd6">null</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"width"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">350</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"height"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">350</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"formats"</span><span style="color:#d4d4d4">: {</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"thumbnail"</span><span style="color:#d4d4d4">: {</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"ext"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">".jpg"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"url"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"/uploads/thumbnail__993e719107.jpg"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"hash"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"thumbnail__993e719107"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"mime"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"image/jpeg"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"name"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"thumbnail_头像.jpg"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"path"</span><span style="color:#d4d4d4">: </span><span style="color:#569cd6">null</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"size"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">7.37</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"width"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">156</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"height"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">156</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"sizeInBytes"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">7369</span></span>
<span class="line"><span style="color:#d4d4d4">            }</span></span>
<span class="line"><span style="color:#d4d4d4">        },</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"hash"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"_993e719107"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"ext"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">".jpg"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"mime"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"image/jpeg"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"size"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">20.89</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"url"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"/uploads/_993e719107.jpg"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"previewUrl"</span><span style="color:#d4d4d4">: </span><span style="color:#569cd6">null</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"provider"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"local"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"provider_metadata"</span><span style="color:#d4d4d4">: </span><span style="color:#569cd6">null</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"createdAt"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"2024-09-24T12:51:16.512Z"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"updatedAt"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"2024-09-24T12:51:16.512Z"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"publishedAt"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"2024-09-24T12:51:16.513Z"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"locale"</span><span style="color:#d4d4d4">: </span><span style="color:#569cd6">null</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span></code></pre></div></div></figure><p>如果带上下面的请求参数</p><figure class="shiki bash"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">GET</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">/api/users/me?fields=username,email,createdAt,updatedAt,id</span><span style="color:#d4d4d4">&amp;</span><span style="color:#dcdcaa">populate[avatar][fields]</span><span style="color:#d4d4d4">=id,height,width,name,updatedAt,ext</span></span></code></pre></div></div></figure><p>则返回数据为</p><figure class="shiki json"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#d4d4d4">{</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"id"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">11</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"documentId"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"dtree1c2woi3njmz56xmttcm"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"username"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"xiaowu1"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"email"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"1681237971@qq.com"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"createdAt"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"2024-09-23T16:06:23.045Z"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"updatedAt"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"2024-09-24T12:51:20.561Z"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"avatar"</span><span style="color:#d4d4d4">: {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"id"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">32</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"documentId"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"nq7hj2shguktf5begtsluvup"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"height"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">350</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"width"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">350</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"name"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"头像.jpg"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"updatedAt"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"2024-09-24T12:51:16.512Z"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"ext"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">".jpg"</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span></code></pre></div></div></figure><h3 id="参数解释"><a class="markdownIt-Anchor" href="#参数解释"></a> 参数解释</h3><figure class="shiki bash"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">GET</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">/api/users/me?fields=username,email,createdAt,updatedAt,id</span><span style="color:#d4d4d4">&amp;</span><span style="color:#dcdcaa">populate[avatar][fields]</span><span style="color:#d4d4d4">=id,height,width,name,updatedAt,ext</span></span></code></pre></div></div></figure><p><code>fields</code> 关键字表示要进行第一级的字段选取，<code>populate[第一个参数][第二个参数]</code> 的第一个中括号参数为第二级字段的根节点（这里是 <code>avatar</code>），接着第二个中括号写 <code>fields</code> 关键字，表示要进行选取的字段名，这里是 <code>id,height,width,name,updatedAt,ext</code></p><h2 id="api-文件上传"><a class="markdownIt-Anchor" href="#api-文件上传"></a> API - 文件上传</h2><p>Strapi 的文件上传除了在管理面板中进行上传之外，还可以通过接口的方式进行上传（Strapi 支持 blob、base64 上传，请提前给予权限）</p><p><img src="/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202409260028631.png" alt="image-20240926002852546"></p><p>请在接口前加上 /api，即：</p><figure class="shiki http"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#d4d4d4">http://localhost:1337/api/upload</span></span></code></pre></div></div></figure><p><img src="/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202409260029602.png" alt="image-20240926002913544"></p><p>例如在 apifox 中进行测试：</p><p><img src="/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202409260033256.png" alt="image-20240926003359170"></p><h2 id="api-更新包含媒体字段的数据"><a class="markdownIt-Anchor" href="#api-更新包含媒体字段的数据"></a> API - 更新包含媒体字段的数据</h2><p>那么如果我创建了一个数据表其中包含一个媒体字段，如何更新该表中的数据？</p><p>假设该表如下：</p><p><img src="/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202409260036848.png" alt="image-20240926003626793"></p><p>请求接口为：</p><figure class="shiki bash"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">POST</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">/api/articles/:id</span></span></code></pre></div></div></figure><p>访问接口文档插件的地址，你会发现它的示例如下：</p><figure class="shiki json"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#d4d4d4">{</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">"data"</span><span style="color:#d4d4d4">: {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"title"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"string"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"content"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"string"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"cover_img"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"string or id"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"state"</span><span style="color:#d4d4d4">: </span><span style="color:#569cd6">true</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"article_category"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"string or id"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"author"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"string or id"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"locale"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"string"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"localizations"</span><span style="color:#d4d4d4">: [</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#ce9178">"string or id"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#ce9178">"string or id"</span></span>
<span class="line"><span style="color:#d4d4d4">    ]</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span></code></pre></div></div></figure><p><code>"cover_img": "string or id"</code></p><p>string 或者 id？string 说是网络地址我都能理解，id 是什么？</p><ul><li>实际上该接口仅仅允许你<strong>通过已经上传的图片 id 进行设置 cover_img</strong></li></ul><p><strong>也就是说你要先将更换好的图片进行上传，然后得到它的 id，再将该 id 赋值给 cover_img 才行</strong></p><p><s>折腾了我一晚上，各种曲线救国写的累死人，没想到随意一个测试，原来是这样的…… 哈哈😎😎</s></p><h2 id="api-strapi条件查询"><a class="markdownIt-Anchor" href="#api-strapi条件查询"></a> API-Strapi 条件查询</h2><p>Strapi 如何进行条件查询？</p><blockquote><p>参考文档：</p><ul><li>文档服务 API 可用方法：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://strapi.nodejs.cn/dev-docs/api/document-service">https://strapi.nodejs.cn/dev-docs/api/document-service</a></li><li>文档服务 API 过滤器：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://strapi.nodejs.cn/dev-docs/api/document-service/filters">https://strapi.nodejs.cn/dev-docs/api/document-service/filters</a></li></ul></blockquote><p>总之，Strapi 提供了一些常见的查询操作符，我们可以通过这些操作符进行各种条件查询。常用操作符包括：</p><table><thead><tr><th>操作符</th><th>含义</th><th>示例</th></tr></thead><tbody><tr><td><code>$eq</code></td><td>等于</td><td><code>filters[title][$eq]=Vue.js Tutorial</code></td></tr><tr><td><code>$ne</code></td><td>不等于</td><td><code>filters[title][$ne]=Vue.js Tutorial</code></td></tr><tr><td><code>$lt</code></td><td>小于</td><td><code>filters[views][$lt]=1000</code></td></tr><tr><td><code>$lte</code></td><td>小于等于</td><td><code>filters[views][$lte]=1000</code></td></tr><tr><td><code>$gt</code></td><td>大于</td><td><code>filters[views][$gt]=1000</code></td></tr><tr><td><code>$gte</code></td><td>大于等于</td><td><code>filters[views][$gte]=1000</code></td></tr><tr><td><code>$contains</code></td><td>包含（字符串部分匹配）</td><td><code>filters[title][$contains]=Vue</code></td></tr><tr><td><code>$startsWith</code></td><td>以指定字符串开头</td><td><code>filters[title][$startsWith]=Vue</code></td></tr><tr><td><code>$endsWith</code></td><td>以指定字符串结尾</td><td><code>filters[title][$endsWith]=Tutorial</code></td></tr><tr><td><code>$null</code></td><td>字段值为空</td><td><code>filters[coverImage][$null]=true</code></td></tr><tr><td><code>$in</code></td><td>在给定数组中</td><td><code>filters[category][$in][0]=News</code></td></tr><tr><td><code>$between</code></td><td>在两个值之间</td><td><code>filters[views][$between][0]=10&amp;filters[views][$between][1]=100</code></td></tr></tbody></table><p>示例</p><p>查询 <code>views</code> 字段在 100 和 1000 之间的文章：</p><figure class="shiki bash"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">GET</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">/api/articles?filters[views][</span><span style="color:#9cdcfe">$gte</span><span style="color:#ce9178">]=</span><span style="color:#b5cea8">100</span><span style="color:#d4d4d4">&amp;</span><span style="color:#dcdcaa">filters[views][$lte]</span><span style="color:#d4d4d4">=1000</span></span></code></pre></div></div></figure><p>查询 <code>category</code> 是 "Tech" 或 "News" 的文章：</p><figure class="shiki bash"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">GET</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">/api/articles?filters[category][</span><span style="color:#9cdcfe">$in</span><span style="color:#ce9178">][</span><span style="color:#b5cea8">0</span><span style="color:#ce9178">]=Tech</span><span style="color:#d4d4d4">&amp;</span><span style="color:#dcdcaa">filters[category][$in][1]</span><span style="color:#d4d4d4">=News</span></span></code></pre></div></div></figure><p>假设数据如下（接口是：/api/articles）</p><figure class="shiki json"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#d4d4d4">{</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"data"</span><span style="color:#d4d4d4">: [</span></span>
<span class="line"><span style="color:#d4d4d4">        {</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"id"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">2</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"documentId"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"fuki5p5xzjnk5n7vfvwzv9c4"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"title"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"CTF-WP"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"content"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"&lt;p&gt;这是一份测试内容数据321&lt;/p&gt;"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"state"</span><span style="color:#d4d4d4">: </span><span style="color:#569cd6">true</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"createdAt"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"2024-09-25T05:29:27.298Z"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"updatedAt"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"2024-09-25T17:15:03.198Z"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"publishedAt"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"2024-09-25T17:15:03.188Z"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"cover_img"</span><span style="color:#d4d4d4">: {</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"id"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">45</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"documentId"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"nzpwo3hy9qkesr5l0uqd1k02"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"name"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"1607569780_678488.jpg"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"alternativeText"</span><span style="color:#d4d4d4">: </span><span style="color:#569cd6">null</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"caption"</span><span style="color:#d4d4d4">: </span><span style="color:#569cd6">null</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"width"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">1920</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"height"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">1080</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"ext"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">".jpg"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"mime"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"image/jpeg"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"url"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"/uploads/1607569780_678488_991350393d.jpg"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"createdAt"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"2024-09-25T17:15:03.111Z"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"updatedAt"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"2024-09-25T17:15:03.111Z"</span></span>
<span class="line"><span style="color:#d4d4d4">            },</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"article_category"</span><span style="color:#d4d4d4">: {</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"id"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">6</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"documentId"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"qznn6b3nxzqxyv9qlzyu6t65"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"category_name"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"mod修改"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"category_alias"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"mod"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"createdAt"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"2024-09-25T07:58:18.423Z"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"updatedAt"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"2024-09-25T07:58:18.423Z"</span></span>
<span class="line"><span style="color:#d4d4d4">            }</span></span>
<span class="line"><span style="color:#d4d4d4">        },</span></span>
<span class="line"><span style="color:#d4d4d4">        {</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"id"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">4</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"documentId"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"hevczglj0hqyjc5h5zva0cb9"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"title"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"这是测试新增文章的标"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"content"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"&lt;p&gt;托尔斯泰&lt;/p&gt;"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"state"</span><span style="color:#d4d4d4">: </span><span style="color:#569cd6">true</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"createdAt"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"2024-09-25T17:33:11.929Z"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"updatedAt"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"2024-09-25T17:33:11.929Z"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"publishedAt"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"2024-09-25T17:33:11.924Z"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"cover_img"</span><span style="color:#d4d4d4">: {</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"id"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">48</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"documentId"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"curr9bdzmqaxi6hz9sw2f7q8"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"name"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"d6ef9eb44aed2e7335cd59efc201a18b86d6fa60.jpg"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"alternativeText"</span><span style="color:#d4d4d4">: </span><span style="color:#569cd6">null</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"caption"</span><span style="color:#d4d4d4">: </span><span style="color:#569cd6">null</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"width"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">1920</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"height"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">1200</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"ext"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">".jpg"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"mime"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"image/jpeg"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"url"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"/uploads/d6ef9eb44aed2e7335cd59efc201a18b86d6fa60_41d5dbc6ce.jpg"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"createdAt"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"2024-09-25T17:33:11.737Z"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"updatedAt"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"2024-09-25T17:33:11.737Z"</span></span>
<span class="line"><span style="color:#d4d4d4">            },</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"article_category"</span><span style="color:#d4d4d4">: {</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"id"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">5</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"documentId"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"dchbyr5f11zshu2gb2thyxvh"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"category_name"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"随想"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"category_alias"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"suixiang"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"createdAt"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"2024-09-25T07:57:58.692Z"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"updatedAt"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"2024-09-25T07:57:58.692Z"</span></span>
<span class="line"><span style="color:#d4d4d4">            }</span></span>
<span class="line"><span style="color:#d4d4d4">        }</span></span>
<span class="line"><span style="color:#d4d4d4">    ],</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"meta"</span><span style="color:#d4d4d4">: {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"pagination"</span><span style="color:#d4d4d4">: {</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"page"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"pageSize"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">25</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"pageCount"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"total"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">2</span></span>
<span class="line"><span style="color:#d4d4d4">        }</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span></code></pre></div></div></figure><h3 id="根据分类id和文章发布状态进行查询"><a class="markdownIt-Anchor" href="#根据分类id和文章发布状态进行查询"></a> 根据分类 id 和文章发布状态进行查询</h3><p>怎么根据分类 id 和文章发布状态进行查询？比如我要查询文章所属分类为随想且发布状态为已发布</p><figure class="shiki bash"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">GET</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">/api/articles?filters[article_category][id][</span><span style="color:#9cdcfe">$eq</span><span style="color:#ce9178">]=</span><span style="color:#b5cea8">5</span><span style="color:#d4d4d4">&amp;</span><span style="color:#dcdcaa">filters[state][$eq]</span><span style="color:#d4d4d4">=</span><span style="color:#dcdcaa">true</span></span></code></pre></div></div></figure><h3 id="分页查询"><a class="markdownIt-Anchor" href="#分页查询"></a> 分页查询</h3><p>通过 <code>pagination</code> 参数在请求中实现分页查询。Strapi 的分页功能包括 <code>page</code>（页码）和 <code>pageSize</code>（每页显示的记录数），我们可以在 API 请求的 URL 中传递这些参数。例如：</p><p>查询第 2 页的数据，并且每页显示 5 条文章，URL 可以写成这样</p><figure class="shiki bash"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">GET</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">/api/articles?pagination[page]=</span><span style="color:#b5cea8">2</span><span style="color:#d4d4d4">&amp;</span><span style="color:#9cdcfe">pagination</span><span style="color:#d4d4d4">[</span><span style="color:#9cdcfe">pageSize</span><span style="color:#d4d4d4">]=</span><span style="color:#b5cea8">5</span></span></code></pre></div></div></figure><p>分页查询的结果中，Strapi 会在 <code>meta</code> 字段中返回有关分页的信息：</p><figure class="shiki json"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#d4d4d4">{</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">"data"</span><span style="color:#d4d4d4">: [ </span><span style="color:#f44747">...</span><span style="color:#d4d4d4"> ],  </span><span style="color:#6a9955">// 数据列表</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">"meta"</span><span style="color:#d4d4d4">: {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"pagination"</span><span style="color:#d4d4d4">: {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">"page"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">2</span><span style="color:#d4d4d4">,        </span><span style="color:#6a9955">// 当前页码</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">"pageSize"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">5</span><span style="color:#d4d4d4">,    </span><span style="color:#6a9955">// 每页显示条数</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">"pageCount"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">10</span><span style="color:#d4d4d4">,  </span><span style="color:#6a9955">// 总页数</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">"total"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">50</span><span style="color:#d4d4d4">       </span><span style="color:#6a9955">// 总记录数</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span></code></pre></div></div></figure><h3 id="模糊查询"><a class="markdownIt-Anchor" href="#模糊查询"></a> 模糊查询</h3><p>Strapi 支持通过 API 进行模糊查询，我们可以使用 <code>filters</code> 参数结合 <code>$contains</code> 运算符来实现模糊查询。例如：</p><p>根据文章标题（<code>title</code> 字段）进行模糊查询，查询包含某个关键词的文章列表，API 请求可以这样写：</p><figure class="shiki bash"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">GET</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">/api/articles?filters[title][</span><span style="color:#9cdcfe">$contains</span><span style="color:#ce9178">]=keyWord</span></span></code></pre></div></div></figure><p>我们甚至可以结合分页查询和模糊查询</p><figure class="shiki bash"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">/api/articles?filters[title][$contains]</span><span style="color:#d4d4d4">=</span><span style="color:#dcdcaa">test</span><span style="color:#d4d4d4">&amp;</span><span style="color:#9cdcfe">pagination</span><span style="color:#d4d4d4">[</span><span style="color:#9cdcfe">page</span><span style="color:#d4d4d4">]=</span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">&amp;</span><span style="color:#9cdcfe">pagination</span><span style="color:#d4d4d4">[</span><span style="color:#9cdcfe">pageSize</span><span style="color:#d4d4d4">]=</span><span style="color:#b5cea8">5</span></span></code></pre></div></div></figure><h3 id="排序查询"><a class="markdownIt-Anchor" href="#排序查询"></a> 排序查询</h3><p>Strapi 支持通过 API 查询时对数据进行排序。我们可以使用 <code>sort</code> 参数来指定排序字段和顺序。</p><h4 id="单字段排序查询"><a class="markdownIt-Anchor" href="#单字段排序查询"></a> 单字段排序查询</h4><p>单字段排序查询例如：</p><p>根据 <code>updatedAt</code> 字段进行排序，可以按照如下方式查询最新更新的文章</p><figure class="shiki bash"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">GET</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">/api/articles?sort=updatedAt:desc</span></span></code></pre></div></div></figure><p><code>sort=updatedAt:desc</code>：按照 <code>updatedAt</code> 字段降序排列（最新的文章在前）</p><ul><li><code>desc</code>：降序排列，从新到旧。</li><li><code>asc</code>：升序排列，从旧到新。</li></ul><h4 id="多字段排序"><a class="markdownIt-Anchor" href="#多字段排序"></a> 多字段排序</h4><p>例如，首先按 <code>state</code>（状态），然后按 <code>updatedAt</code>：</p><figure class="shiki bash"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">GET</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">/api/articles?sort=state:asc,updatedAt:desc</span></span></code></pre></div></div></figure><p>这将先按 <code>state</code> 升序排列，再按 <code>updatedAt</code> 降序排列。</p><h4 id="结合分页和过滤"><a class="markdownIt-Anchor" href="#结合分页和过滤"></a> 结合分页和过滤</h4><p>甚至可以将排序与分页、过滤结合使用。例如，查询标题中包含 <code>test</code> 的文章，按 <code>updatedAt</code> 从新到旧排序，并分页显示：</p><figure class="shiki bash"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">GET</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">/api/articles?filters[title][</span><span style="color:#9cdcfe">$contains</span><span style="color:#ce9178">]=test</span><span style="color:#d4d4d4">&amp;</span><span style="color:#9cdcfe">sort</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">updatedAt:desc</span><span style="color:#d4d4d4">&amp;</span><span style="color:#9cdcfe">pagination</span><span style="color:#d4d4d4">[</span><span style="color:#9cdcfe">page</span><span style="color:#d4d4d4">]=</span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">&amp;</span><span style="color:#9cdcfe">pagination</span><span style="color:#d4d4d4">[</span><span style="color:#9cdcfe">pageSize</span><span style="color:#d4d4d4">]=</span><span style="color:#b5cea8">5</span></span></code></pre></div></div></figure><p>这会返回包含 <code>test</code> 关键词的文章，按更新时间降序排列，并分页显示。</p><h4 id="小结"><a class="markdownIt-Anchor" href="#小结"></a> 小结</h4><p>总之，Strapi 提供了多个过滤操作符，使得我们可以灵活地查询数据</p><ul><li><code>$eq</code>：精确匹配</li><li><code>$ne</code>：不等于</li><li><code>$lt</code>：小于</li><li><code>$lte</code>：小于或等于</li><li><code>$gt</code>：大于</li><li><code>$gte</code>：大于或等于</li><li><code>$contains</code>：包含（模糊查询）</li><li><code>$notContains</code>：不包含</li><li><code>$startsWith</code>：以指定字符串开头</li><li><code>$endsWith</code>：以指定字符串结尾</li></ul><h2 id="结语"><a class="markdownIt-Anchor" href="#结语"></a> 结语</h2><p>目前我碰到的问题基本就是这些，如果有更复杂的项目时，可能才会碰到更多问题……</p><blockquote><p>关于 Nginx 如何监听 Strapi 可以看看我的 <a href="https://4rozen.github.io/2023/10/26/Vue%E9%A1%B9%E7%9B%AE%E6%89%93%E5%8C%85+%E9%83%A8%E7%BD%B2%E5%88%B0GitHub%E4%B8%BAdemo.md/">Vue 打包</a>那篇文章：解决打包后的刷新 404 问题 -&gt;Github Pages 上的 history 路由模式的可行性 -&gt; 一个可能需要的配置参考</p></blockquote><p>我不得不说的是，Strapi 对于表与表之间的引用在 API 接口调试方面体验确实很糟糕，某些接口使用 <code>documentId</code> 有些接口却只认真实 <code>id</code></p><p>不过免费的可用，还能要求什么呢 (〃￣︶￣) 人 (￣︶￣〃)</p><link rel="stylesheet" href="/css/spoiler.css" type="text/css"></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://4rozen.github.io/">4rozeN</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://4rozen.github.io/archives/%E5%90%8E%E7%AB%AF/45101.html">https://4rozen.github.io/archives/%E5%90%8E%E7%AB%AF/45101.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://4rozeN.github.io" target="_blank">林之介 | 4rozeN</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Strapi/">Strapi</a></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related no-desc" href="/archives/%E6%88%91%E7%9A%84%E9%A1%B9%E7%9B%AE/63649.html" title="Simple Animated Guns 游玩指南 / 教程"><img class="cover" src="/img/loading/loading.gif" data-lazy-src="https://ali-4rozen-oss.oss-cn-guangzhou.aliyuncs.com/blog/cover/%E6%88%91%E7%9A%84%E9%A1%B9%E7%9B%AE/SAGtutorial.png" onerror="onerror=null,src=&quot;/img/avatar/emo.webp&quot;" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">Simple Animated Guns 游玩指南 / 教程</div></div></div></a><a class="pagination-related no-desc" href="/archives/Hexo/60191.html" title="Hexo fluid 全屏背景图随日夜模式切换以及正文底页毛玻璃效果"><img class="cover" src="/img/loading/loading.gif" data-lazy-src="https://ali-4rozen-oss.oss-cn-guangzhou.aliyuncs.com/blog/cover/Hexo/Hexo%E7%BE%8E%E5%8C%96.webp" onerror="onerror=null,src=&quot;/img/avatar/emo.webp&quot;" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">Hexo fluid 全屏背景图随日夜模式切换以及正文底页毛玻璃效果</div></div></div></a></nav><hr class="custom-hr"><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div><div class="comment-switch"><span class="first-comment">Twikoo</span><span id="switch-btn"></span><span class="second-comment">Giscus</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div><div><div id="giscus-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/loading/loading.gif" data-lazy-src="/img/avatar/avatar.jpg" onerror="this.onerror=null,this.src=&quot;/img/avatar/emo.webp&quot;" alt="avatar"></div><div class="author-info-name">4rozeN</div><div class="author-info-description">Coding noob 自进阶</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">25</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">42</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><div class="card-info-social-icons"><a class="social-icon" href="/rss2.xml" target="_blank" title="RSS"><i class="fas fa-rss" style="color:#f60"></i></a><a class="social-icon" href="https://github.com/4rozeN" rel="external nofollow noreferrer" target="_blank" title="Github"><i class="fab fa-github" style="color:#5f6E7CFF"></i></a><a class="social-icon" href="https://steamcommunity.com/id/430426/" rel="external nofollow noreferrer" target="_blank" title="Steam"><i class="fab fa-steam" style="color:#5f6E7CFF"></i></a><a class="social-icon" href="mailto:mail4chen@foxmail.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fas fa-envelope" style="color:#4a7dbe"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">最近在努力学习Fabric modding和其他内容，不知天地为何物。</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85strapi"><span class="toc-number">1.</span> <span class="toc-text">安装 Strapi</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A3%80%E6%9F%A5%E6%9C%AC%E5%9C%B0%E7%8E%AF%E5%A2%83"><span class="toc-number">1.1.</span> <span class="toc-text">检查本地环境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85yarn%E5%8F%AF%E9%80%89"><span class="toc-number">1.2.</span> <span class="toc-text">安装 yarn（可选）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAstrapi%E9%A1%B9%E7%9B%AE"><span class="toc-number">2.</span> <span class="toc-text">创建 Strapi 项目</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#strapi%E6%B1%89%E5%8C%96"><span class="toc-number">3.</span> <span class="toc-text">Strapi 汉化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%90%E8%A1%8Cstrapi%E5%BA%94%E7%94%A8"><span class="toc-number">4.</span> <span class="toc-text">运行 Strapi 应用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#strapi%E8%BF%90%E8%A1%8C-mysql%E5%BB%BA%E8%A1%A8%E6%8A%A5%E9%94%99"><span class="toc-number">5.</span> <span class="toc-text">Strapi 运行 - MySQL 建表报错</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95"><span class="toc-number">5.1.</span> <span class="toc-text">解决办法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#strapi%E5%90%AF%E5%8A%A8%E9%A1%B9%E7%9B%AE%E7%99%BB%E5%BD%95%E5%87%AD%E8%AF%81"><span class="toc-number">6.</span> <span class="toc-text">Strapi 启动项目登录凭证</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%86%E8%A7%A3strapi%E7%9A%84%E8%BA%AB%E4%BB%BD%E7%AE%A1%E7%90%86%E6%9C%BA%E5%88%B6"><span class="toc-number">7.</span> <span class="toc-text">了解 Strapi 的身份管理机制</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E5%88%9B%E5%BB%BA%E8%A1%A8%E7%BB%93%E6%9E%84"><span class="toc-number">8.</span> <span class="toc-text">如何创建表结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#strapi%E6%8E%A5%E5%8F%A3%E6%9D%83%E9%99%90%E8%AE%BE%E7%BD%AE"><span class="toc-number">9.</span> <span class="toc-text">Strapi 接口权限设置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#strapi%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3%E6%9F%A5%E7%9C%8B"><span class="toc-number">10.</span> <span class="toc-text">Strapi 接口文档查看</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E9%82%AE%E7%AE%B1%E5%8F%91%E4%BF%A1%E6%8F%92%E4%BB%B6"><span class="toc-number">11.</span> <span class="toc-text">配置邮箱发信插件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-nodemailer-%E6%8F%92%E4%BB%B6"><span class="toc-number">11.1.</span> <span class="toc-text">安装 nodemailer 插件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-email-provider"><span class="toc-number">11.2.</span> <span class="toc-text">配置 Email Provider</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96-smtp-%E6%8E%88%E6%9D%83%E7%A0%81"><span class="toc-number">11.3.</span> <span class="toc-text">获取 SMTP 授权码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9template%E6%A8%A1%E6%9D%BF"><span class="toc-number">11.4.</span> <span class="toc-text">修改 template 模板</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#api-%E6%9F%A5%E8%AF%A2%E5%AA%92%E4%BD%93%E6%95%B0%E6%8D%AE"><span class="toc-number">12.</span> <span class="toc-text">API - 查询媒体数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#api-%E6%9F%A5%E8%AF%A2%E7%89%B9%E5%AE%9A%E5%AD%97%E6%AE%B5"><span class="toc-number">13.</span> <span class="toc-text">API - 查询特定字段</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%82%E6%95%B0%E8%A7%A3%E9%87%8A"><span class="toc-number">13.1.</span> <span class="toc-text">参数解释</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#api-%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-number">14.</span> <span class="toc-text">API - 文件上传</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#api-%E6%9B%B4%E6%96%B0%E5%8C%85%E5%90%AB%E5%AA%92%E4%BD%93%E5%AD%97%E6%AE%B5%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="toc-number">15.</span> <span class="toc-text">API - 更新包含媒体字段的数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#api-strapi%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2"><span class="toc-number">16.</span> <span class="toc-text">API-Strapi 条件查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AE%E5%88%86%E7%B1%BBid%E5%92%8C%E6%96%87%E7%AB%A0%E5%8F%91%E5%B8%83%E7%8A%B6%E6%80%81%E8%BF%9B%E8%A1%8C%E6%9F%A5%E8%AF%A2"><span class="toc-number">16.1.</span> <span class="toc-text">根据分类 id 和文章发布状态进行查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2"><span class="toc-number">16.2.</span> <span class="toc-text">分页查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2"><span class="toc-number">16.3.</span> <span class="toc-text">模糊查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%92%E5%BA%8F%E6%9F%A5%E8%AF%A2"><span class="toc-number">16.4.</span> <span class="toc-text">排序查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%95%E5%AD%97%E6%AE%B5%E6%8E%92%E5%BA%8F%E6%9F%A5%E8%AF%A2"><span class="toc-number">16.4.1.</span> <span class="toc-text">单字段排序查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%9A%E5%AD%97%E6%AE%B5%E6%8E%92%E5%BA%8F"><span class="toc-number">16.4.2.</span> <span class="toc-text">多字段排序</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%93%E5%90%88%E5%88%86%E9%A1%B5%E5%92%8C%E8%BF%87%E6%BB%A4"><span class="toc-number">16.4.3.</span> <span class="toc-text">结合分页和过滤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93"><span class="toc-number">16.4.4.</span> <span class="toc-text">小结</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%93%E8%AF%AD"><span class="toc-number">17.</span> <span class="toc-text">结语</span></a></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">©2024 - 2025 By 4rozeN</div><div class="footer_custom_text"><span id="performance-info"></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/instant.page/5.1.0/instantpage.min.js" type="module"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/vanilla-lazyload/17.3.1/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"><script>(async()=>{window.katex_js_css||(window.katex_js_css=!0,await btf.getCSS("https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css"),await btf.getScript("https://cdn.jsdelivr.net/npm/katex/dist/contrib/copy-tex.min.js")),document.querySelectorAll("#article-container .katex").forEach(t=>t.classList.add("katex-show"))})()</script><script>(()=>{const o="shuoshuo"===GLOBAL_CONFIG_SITE.pageType,t=(t=document,e=location.pathname)=>{twikoo.init({el:t.querySelector("#twikoo-wrap"),envId:"https://4rozen-blog.netlify.app/.netlify/functions/twikoo",region:"",onCommentLoaded:()=>{btf.loadLightbox(document.querySelectorAll("#twikoo .tk-content img:not(.tk-owo-emotion)"))},path:e}),o&&(window.shuoshuoComment.destroyTwikoo=()=>{t.children.length&&(t.innerHTML="",t.classList.add("no-comment"))})},e=(o,e)=>{"object"==typeof twikoo?setTimeout(()=>t(o,e),0):btf.getScript("https://registry.npmmirror.com/twikoo/1.6.44/files/dist/twikoo.min.js").then(()=>t(o,e))};o?window.shuoshuoComment={loadComment:e}:e()})()</script><script>(()=>{const t="shuoshuo"===GLOBAL_CONFIG_SITE.pageType,e=t=>"dark"===t?"dark":"light",a=(a=document,s)=>{const n=t?{"data-mapping":"specific","data-term":s}:{"data-mapping":"pathname"},o=(t=>{const e=document.createElement("script");return Object.entries(t).forEach(([t,a])=>{e.setAttribute(t,a)}),e})({src:"https://giscus.app/client.js","data-repo":"4rozeN/4rozeN.github.io","data-repo-id":"R_kgDOMN8x0A","data-category-id":"DIC_kwDOMN8x0M4CjtvK","data-theme":e(document.documentElement.getAttribute("data-theme")),"data-reactions-enabled":"1",crossorigin:"anonymous",async:!0,...n});a.querySelector("#giscus-wrap").appendChild(o),t&&(window.shuoshuoComment.destroyGiscus=()=>{a.children.length&&(a.innerHTML="",a.classList.add("no-comment"))})};btf.addGlobalFn("themeChange",t=>{const a=document.querySelector("#giscus-wrap iframe");if(a){const s={giscus:{setConfig:{theme:e(t)}}};a.contentWindow.postMessage(s,"https://giscus.app")}},"giscus"),t?window.loadOtherComment=a:a()})()</script></div><canvas id="universe"></canvas><script id="canvas_nest" defer="" color="0,0,255" opacity="0.7" zindex="-1" count="99" mobile="false" src="https://lf26-cdn-tos.bytecdntp.com/cdn/expire-1-M/canvas-nest.js/2.0.4/canvas-nest.js"></script><script src="https://lib.baomitu.com/pjax/0.2.8/pjax.min.js"></script><script>(()=>{window.pjax=new Pjax({elements:'a:not([target="_blank"])',selectors:['meta[property="og:image"]','meta[property="og:title"]','meta[property="og:url"]','meta[property="og:description"]','link[rel="canonical"]',"head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"],cacheBust:!1,analytics:!1,scrollRestoration:!1});const e=e=>{e&&Object.values(e).forEach(e=>e())};document.addEventListener("pjax:send",()=>{btf.removeGlobalFnEvent("pjaxSendOnce"),btf.removeGlobalFnEvent("themeChange");const t=document.body.classList;t.contains("read-mode")&&t.remove("read-mode"),e(window.globalFn.pjaxSend)}),document.addEventListener("pjax:complete",()=>{btf.removeGlobalFnEvent("pjaxCompleteOnce"),document.querySelectorAll("script[data-pjax]").forEach(e=>{const t=document.createElement("script"),o=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach(e=>t.setAttribute(e.name,e.value)),t.appendChild(document.createTextNode(o)),e.parentNode.replaceChild(t,e)}),e(window.globalFn.pjaxComplete)}),document.addEventListener("pjax:error",e=>{if(404===e.request.status){!0?pjax.loadUrl("/404.html"):window.location.href="/404.html"}})})()</script><script async="" data-pjax="" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span> 数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div><hr><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div></div></div><script src="https://cdn.jsdelivr.net/npm/hexo-shiki-plugin@latest/lib/codeblock.js"></script><script>const CODE_CONFIG={beautify:!0,highlightCopy:!0,highlightLang:!0,highlightHeightLimit:360,isHighlightShrink:!1,copy:{success:"复制成功",error:"复制失败",noSupport:"浏览器不支持复制功能"}};console.log("%c hexo-shiki-plugin %c v1.0.27 %c https://github.com/nova1751/hexo-shiki-plugin","color: #fff; background: #5f5f5f","color: #fff; background: #80c8f8","")</script><script type="text/javascript" src="/js/bundle.js"></script></body></html>