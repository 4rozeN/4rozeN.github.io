<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="auto"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/img/avatar/avatar.jpg"><link rel="icon" href="/img/avatar/avatar.jpg"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="theme-color" content="#00000080"><meta name="author" content="4rozeN"><meta name="keywords" content="blog, programming, CTF, Vue, backend, Git, Uni-app"><meta name="description" content="我的 Strapi 版本：v5.0.0 节点版本：v20.13.1 数据库：MySQL8    数据库 受到推崇的 最低限度      MySQL 8.0 8.0    玛丽亚数据库  10.6 10.5   PostgreSQL 14.0 12.0   SQLite 3 3    Strapi 官方文档地址：https:&#x2F;&#x2F;strapi.nodejs.cn&#x2F;dev-docs&#x2F;installat"><meta property="og:type" content="article"><meta property="og:title" content="一文搞清 Strapi5 的安装与使用 | 踩坑爽 (bushi"><meta property="og:url" content="https://4rozen.github.io/archives/Back-End/45101.html"><meta property="og:site_name" content="4rozeN"><meta property="og:description" content="我的 Strapi 版本：v5.0.0 节点版本：v20.13.1 数据库：MySQL8    数据库 受到推崇的 最低限度      MySQL 8.0 8.0    玛丽亚数据库  10.6 10.5   PostgreSQL 14.0 12.0   SQLite 3 3    Strapi 官方文档地址：https:&#x2F;&#x2F;strapi.nodejs.cn&#x2F;dev-docs&#x2F;installat"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410111812868.png"><meta property="og:image" content="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202409210045773.png"><meta property="og:image" content="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202409210109467.png"><meta property="og:image" content="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202409210102415.png"><meta property="og:image" content="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202409231751921.png"><meta property="og:image" content="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202409231812271.png"><meta property="og:image" content="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202409231817758.png"><meta property="og:image" content="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410111826492.png"><meta property="og:image" content="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410111828046.png"><meta property="og:image" content="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410111832024.png"><meta property="og:image" content="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410111834339.png"><meta property="og:image" content="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410111837231.png"><meta property="og:image" content="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410111841019.png"><meta property="og:image" content="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410111843156.png"><meta property="og:image" content="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410111845558.png"><meta property="og:image" content="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410111846054.png"><meta property="og:image" content="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410111847286.png"><meta property="og:image" content="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410111848805.png"><meta property="og:image" content="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410111853588.png"><meta property="og:image" content="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410111953074.png"><meta property="og:image" content="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410111958468.png"><meta property="og:image" content="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410112000118.png"><meta property="og:image" content="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410112008460.png"><meta property="og:image" content="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202409231908943.png"><meta property="og:image" content="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202409232306287.png"><meta property="og:image" content="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202409242108207.png"><meta property="og:image" content="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202409260028631.png"><meta property="og:image" content="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202409260029602.png"><meta property="og:image" content="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202409260033256.png"><meta property="og:image" content="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202409260036848.png"><meta property="article:published_time" content="2024-07-25T10:00:35.000Z"><meta property="article:modified_time" content="2025-05-31T04:28:49.408Z"><meta property="article:author" content="4rozeN"><meta property="article:tag" content="Strapi"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410111812868.png"><meta name="referrer" content="no-referrer-when-downgrade"><meta name="google-site-verification" content="ggjgSh07y0_dbMruvoZhis-cgZn-t6ujdG7N1z7ZA88"><meta name="msvalidate.01" content="F0E34077A7291AC38724F6A3804B1B29"><meta name="referrer" content="no-referrer"><script src="https://kit.fontawesome.com/d51e98a2a3.js" crossorigin="anonymous"></script><title>一文搞清 Strapi5 的安装与使用 | 踩坑爽 (bushi - 4rozeN</title><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/katex@0.13.0/dist/katex.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css"><link rel="stylesheet" href="https://at.alicdn.com/t/font_1736178_kmeydafke9r.css"><link rel="stylesheet" href="/css/main.css"><link id="highlight-css" rel="stylesheet" href="/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css"><link rel="stylesheet" href="/css/icon.css"><link rel="stylesheet" href="/css/codeFloding.css"><link rel="stylesheet" href="/css/figure.css"><link rel="stylesheet" href="/css/sign.css"><link rel="stylesheet" href="/css/blockquote.css"><link rel="stylesheet" href="/css/backgroundize.css"><link rel="stylesheet" href="/css/catchPicking.css"><script id="fluid-configs">var Fluid=window.Fluid||{};Fluid.ctx=Object.assign({},Fluid.ctx);var CONFIG={hostname:"4rozen.github.io",root:"/",version:"1.9.8",typing:{enable:!0,typeSpeed:70,cursorChar:"|",loop:!1,scope:[]},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"right",visible:"hover",icon:"❡"},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!0,trickleSpeed:100}},code_language:{enable:!0,default:"TEXT"},copy_btn:!0,image_caption:{enable:!0},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:1},lazyload:{enable:!0,loading_img:"/img/loading/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!0,follow_dnt:!0,baidu:null,google:null,tencent:{sid:null,cid:null},leancloud:{app_id:null,app_key:null,server_url:null,path:"window.location.pathname",ignore_local:!1},umami:{src:null,website_id:null,domains:null,start_time:"2024-01-01T00:00:00.000Z",token:null,api_server:null},gtag:null,woyaola:null,cnzz:null},search_path:"/local-search.xml",include_content_in_search:!0};if(CONFIG.web_analytics.follow_dnt){var dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack;Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on"))}</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-shiki-plugin@latest/lib/codeblock.css"><style>:root{--hl-color:#abb2bf;--hl-bg:#282c34;--hltools-bg:#21252b;--hltools-color:#bbbbbc;--hlnumber-bg:#282c34;--hlnumber-color:#495162;--hlscrollbar-bg:#373c47;--hlexpand-bg:linear-gradient(180deg,rgba(40,44,52,0.1),rgba(40,44,52,0.9))}</style><style>.code-expand-btn:not(.expand-done)~* div.codeblock,.code-expand-btn:not(.expand-done)~div.codeblock{overflow:hidden;height:360px}</style><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/rss2.xml" title="4rozeN" type="application/rss+xml">
</head><body><div id="web_bg"></div><header><div class="header-inner" style="height:90vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>4rozeN</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/" target="_self"><i class="iconfont icon-home-fill"></i> <span>首页</span></a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="iconfont icon-navicon-wzgl"></i> <span>文章</span></a><div class="dropdown-menu" aria-labelledby="navbarDropdown"><a class="dropdown-item" href="/archives/" target="_self"><i class="iconfont icon-archive-fill"></i> <span>归档</span> </a><a class="dropdown-item" href="/categories/" target="_self"><i class="iconfont icon-category-fill"></i> <span>分类</span> </a><a class="dropdown-item" href="/tags/" target="_self"><i class="iconfont icon-tags-fill"></i> <span>标签</span></a></div></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="iconfont icon-shejiao"></i> <span>社交</span></a><div class="dropdown-menu" aria-labelledby="navbarDropdown"><a class="dropdown-item" href="/rss2.xml" target="_self"><i class="iconfont icon-rss"></i> <span>RSS</span> </a><a class="dropdown-item" href="/links/" target="_self"><i class="iconfont icon-link-fill"></i> <span>友链</span></a></div></li><li class="nav-item"><a class="nav-link" href="/collections/" target="_self"><i class="iconfont icon-ic_fly"></i> <span>导航</span></a></li><li class="nav-item"><a class="nav-link" href="/about/" target="_self"><i class="iconfont icon-user-fill"></i> <span>个人</span></a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search"><i class="iconfont icon-search"></i></a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle"><i class="iconfont icon-dark" id="color-toggle-icon"></i></a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url(/null) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle" data-typed-text="一文搞清 Strapi5 的安装与使用 | 踩坑爽 (bushi"></span></div><div class="mt-3"><span class="post-meta mr-2"><i class="iconfont icon-author" aria-hidden="true"></i> 4rozeN </span><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2024-07-25 18:00" pubdate>2024年7月25日 晚上</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i>4.9k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i>41 分钟</span></div></div><div class="scroll-down-bar"><i class="iconfont icon-arrowdown"></i></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 id="seo-header">一文搞清 Strapi5 的安装与使用 | 踩坑爽 (bushi</h1><p id="updated-time" class="note note-info">本文最后编辑于：2025年5月31日 中午</p><div class="markdown-body"><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/hint.css/2.7.0/hint.min.css"><blockquote><p>我的 Strapi 版本：v5.0.0</p><p>节点版本：v20.13.1</p><p>数据库：MySQL8</p><table><thead><tr><th>数据库</th><th>受到推崇的</th><th>最低限度</th></tr></thead><tbody><tr><td>MySQL</td><td>8.0</td><td>8.0</td></tr><tr><td>玛丽亚数据库</td><td>10.6</td><td>10.5</td></tr><tr><td>PostgreSQL</td><td>14.0</td><td>12.0</td></tr><tr><td>SQLite</td><td>3</td><td>3</td></tr></tbody></table><p>Strapi 官方文档地址：<a target="_blank" rel="noopener" href="https://strapi.nodejs.cn/dev-docs/installation/cli">https://strapi.nodejs.cn/dev-docs/installation/cli</a></p></blockquote><meta name="referrer" content="no-referrer"><meta name="description" content="从安装到使用，搞清Strapi5用作后端数据服务器的一切坑">## 前言<p>本篇文章主要是从安装到使用，说说我在 Windows | WindowsServer 上使用 Strapi5 作后端数据服务器时碰到的一切坑。</p><h2 id="安装strapi"><a class="markdownIt-Anchor" href="#安装strapi"></a> 安装 Strapi</h2><h3 id="检查本地环境"><a class="markdownIt-Anchor" href="#检查本地环境"></a> 检查本地环境</h3><p>请转到 <a target="_blank" rel="noopener" href="https://strapi.nodejs.cn/dev-docs/installation/cli">Strapi 官方文档</a>，对照官方文档要求检查你本地的 <code>Node.js</code> 和 <code>npm</code> 版本。我的环境如下：</p><ul><li><p>Node.js 版本：</p><figure class="shiki bash"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">$</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">node</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">-v</span></span>
<span class="line"><span style="color:#dcdcaa">v20.13.1</span></span></code></pre></div></div></figure></li><li><p>npm 包管理器版本</p><figure class="shiki bash"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">$</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">npm</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">-v</span></span>
<span class="line"><span style="color:#dcdcaa">10.8.2</span></span></code></pre></div></div></figure></li></ul><p>官方文档中使用 Python 是为了支持它默认的 SQLite 数据库，我这里使用的是 PHPStudy 集成的 MySQL8, 数据库，所以 Python 环境是不必须的。</p><blockquote><p>✋ 提醒</p><p>Strapi 不支持 MongoDB。</p></blockquote><h3 id="安装yarn可选"><a class="markdownIt-Anchor" href="#安装yarn可选"></a> 安装 yarn（可选）</h3><p>我之后投入了 yarn 的怀抱，所以这里可以安装一下 yarn 作为包管理器，<strong>非必须！</strong></p><figure class="shiki bash"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">npm</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">install</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">-g</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">yarn</span></span></code></pre></div></div></figure><p>卸载命令是</p><figure class="shiki bash"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">npm</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">uninstall</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">yarn</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">-g</span></span></code></pre></div></div></figure><p>我的 yarn 版本是</p><figure class="shiki bash"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">$</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">yarn</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">-v</span></span>
<span class="line"><span style="color:#dcdcaa">1.22.22</span></span></code></pre></div></div></figure><h2 id="创建strapi项目"><a class="markdownIt-Anchor" href="#创建strapi项目"></a> 创建 Strapi 项目</h2><p>在一个你准备好的目录中，使用终端 <code>cmd</code> 或 <code>powershell</code> 执行</p><figure class="shiki bash"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">yarn</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">create</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">strapi</span></span></code></pre></div></div></figure><blockquote><p>✋ 注意</p><p>Yarn does not support passing the version tag such as <code>@latest</code>, as opposed to npm. If you experience unexpected results with yarn and the latest version of Strapi is not installed, you might need to <a target="_blank" rel="noopener" href="https://yarn.nodejs.cn/cli/cache/clean">run the <code>yarn cache clean</code> command</a> to clean your Yarn cache.</p><p>Yarn 不支持传递版本标签，如 <code>@latest</code>, 这与 npm 相反。如果您在使用 yarn 时遇到意外结果，没有安装最新版本的 Strapi，您可能需要运行 [yarn cache clean](<a target="_blank" rel="noopener" href="https://yarn">https://yarn</a> . nodejs . cn/CLI/cache/clean) 命令来清理 Yarn 缓存。</p></blockquote><p>或者使用 npm</p><figure class="shiki bash"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">npx</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">create-strapi@latest</span></span></code></pre></div></div></figure><p>我推荐创建时，使用 npm 以保证安装最新版本的 Strapi</p><p>以下是我的安装选择：</p><figure class="shiki bash"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#6a9955"># E:\Coding\StrapiProjects\demo1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#dcdcaa">$</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">npx</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">create-strapi@latest</span></span>
<span class="line"><span style="color:#dcdcaa">Need</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">to</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">install</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">the</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">following</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">packages:</span></span>
<span class="line"><span style="color:#dcdcaa">create-strapi@5.0.5</span></span>
<span class="line"><span style="color:#dcdcaa">Ok</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">to</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">proceed?</span><span style="color:#d4d4d4"> (y) y</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">Strapi</span><span style="color:#d4d4d4">   </span><span style="color:#ce9178">v5.0.5</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">�</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">Let's create your new project</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ce9178">? What is the name of your project? demo1</span></span>
<span class="line"><span style="color:#ce9178">? What is the name of your project? demo1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ce9178">We can't</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">find</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">any</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">auth</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">credentials</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">in</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">your</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">Strapi</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">config.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#dcdcaa">Create</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">a</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">free</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">account</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">on</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">Strapi</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">Cloud</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">and</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">benefit</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">from:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#dcdcaa">-</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">✦</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">Blazing-fast</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">✦</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">deployment</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">for</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">your</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">projects</span></span>
<span class="line"><span style="color:#dcdcaa">-</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">✦</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">Exclusive</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">✦</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">access</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">to</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">resources</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">to</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">make</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">your</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">project</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">successful</span></span>
<span class="line"><span style="color:#dcdcaa">-</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">An</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">✦</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">Awesome</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">✦</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">community</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">and</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">full</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">enjoyment</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">of</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">Strapi's ecosystem</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ce9178">Start your 14-day free trial now!</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#ce9178">? Please log in or sign up. Skip</span></span>
<span class="line"><span style="color:#ce9178">? Do you want to use the default database (sqlite) ? (Y/n) n</span></span>
<span class="line"><span style="color:#ce9178">? Choose your default database client mysql</span></span>
<span class="line"><span style="color:#ce9178">? Database name: demo1</span></span>
<span class="line"><span style="color:#ce9178">? Host: localhost</span></span>
<span class="line"><span style="color:#ce9178">? Port: 3306</span></span>
<span class="line"><span style="color:#ce9178">? Username: root</span></span>
<span class="line"><span style="color:#ce9178">? Password: ****</span></span>
<span class="line"><span style="color:#ce9178">? Enable SSL connection: (y/N) N</span></span>
<span class="line"><span style="color:#ce9178">? Start with an example structure &amp; data? (y/N) N</span></span>
<span class="line"><span style="color:#ce9178">? Start with Typescript? (Y/n) n</span></span>
<span class="line"><span style="color:#ce9178">? Install dependencies with npm? (Y/n) Y</span></span>
<span class="line"><span style="color:#ce9178">? Initialize a git repository? (Y/n) n</span></span></code></pre></div></div></figure><ul><li><code>? Please log in or sign up. Skip</code>：意思是让你进行在线登录，我选择跳过</li><li><code>? Do you want to use the default database (sqlite) ? (Y/n) n</code>：是否使用默认的 sqlite 数据库，我选择否</li><li><code>? Choose your default database client mysql</code>：出现三个选项让你选择，我选择 mysql</li><li><code>? Database name: demo1</code>：输入要连接的数据库名字（准备好一个空表的数据库）</li><li><code>? Host: localhost</code>：数据库的 host 地址，本地就是 localhost，远程填公网 ip</li><li><code>? Port: 3306</code>：数据库端口，我选择默认端口 3306</li><li><code>? Enable SSL connection: (y/N) N</code>：是否启用 SSL 连接？可自行决定（<a target="_blank" rel="noopener" href="https://wiki.sqlfans.cn/mysql/mysql-bp-ssl-enable.html">什么是数据库 SSL 连接？</a>）</li><li><code>? Start with an example structure &amp; data? (y/N) N</code>：是否需要安装时附带简单数据？我自行决定数据，所以选否</li><li><code>? Start with Typescript? (Y/n) n</code>：项目需要 TypeScript 吗？可自行决定</li><li><code>? Install dependencies with npm? (Y/n) Y</code>：是否使用 npm 安装依赖？我选择是，省去手动安装依赖的命令</li><li><code>? Initialize a git repository? (Y/n) n</code>：是否初始化一个 git 仓库？可自行决定</li></ul><p>经过些许等待，看到以下画面说明成功了：</p><p><img src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410111812868.png" srcset="/img/loading/loading.gif" lazyload alt="image-20241011181201688"></p><p>如果你在安装时选择了不自动安装依赖，进入项目内是没有 node-modules 包的，可手动安装</p><figure class="shiki bash"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">npm</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">install</span></span></code></pre></div></div></figure><p>安装好依赖之后请先别着急启动，接着看汉化步骤（如果你英语好，也请看看汉化小节的最后，运行命令在那里）</p><h2 id="strapi汉化"><a class="markdownIt-Anchor" href="#strapi汉化"></a> Strapi 汉化</h2><p><img src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202409210045773.png" srcset="/img/loading/loading.gif" lazyload alt="image-20240921004508650"></p><p>项目运行登录进面板之后点击左下角的 profile 进行设置</p><p><img src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202409210109467.png" srcset="/img/loading/loading.gif" lazyload alt="image-20240921010929358"></p><h2 id="运行strapi应用"><a class="markdownIt-Anchor" href="#运行strapi应用"></a> 运行 Strapi 应用</h2><figure class="shiki sh"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">npm</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">run</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">develop</span></span></code></pre></div></div></figure><p>或</p><figure class="shiki sh"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">yarn</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">develop</span></span></code></pre></div></div></figure><h2 id="strapi运行-mysql建表报错"><a class="markdownIt-Anchor" href="#strapi运行-mysql建表报错"></a> Strapi 运行 - MySQL 建表报错</h2><blockquote><p>Error: alter table <code>i18n_locale</code> add index <code>i18n_locale_documents_idx</code>(<code>document_id</code>, <code>locale</code>, <code>published_at</code>)<br>Specified key was too long; max key length is 1000 bytes</p></blockquote><p>类似上述报错，这是因为 MySQL 对于 <a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=InnoDB%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E&amp;spm=1001.2101.3001.7020">InnoDB 存储引擎</a>有一个索引键长度的限制，这个限制基于字符集的不同而不同。在使用 <code>utf8</code> 字符集时，每个字符可能占用 <code>3</code> 个字节，那么对于 <code>innodb</code> 表，索引键的最大长度大约为 <code>1000</code> 个字符左右（因为 <code>3072 / 3 ≈ 1024</code>）。若字符集是 <code>utf8mb4</code>，每个字符可能占用 <code>4</code> 个字节，所以最大长度会进一步减少到 <code>768</code> 个字符左右（<code>3072 / 4 = 768</code>）</p><blockquote><p>uf8mb4 字符集:<br>要在 Mysql 中保存 4 字节长度的 UTF-8 字符，需要使用 utf8mb4 字符集（mb4 就是 most bytes 4 的意思，专门用来兼容四字节的 unicode），但只有 5.5.3 版本以后的才支持。<br>为了获取更好的兼容性，应该总是使用 utf8mb4 而非 utf8. 对于 CHAR 类型数据，utf8mb4 会多消耗一些空间，根据 Mysql 官方建议，使用 VARCHAR 替代 CHAR。其实，utf8mb4 是 utf8 的超集，理论上原来使用 utf8，然后将字符集修改为 utf8mb4，也会不会对已有的 utf8 编码读取产生任何问题。当然，为了节省空间一般情况下使用 utf8 也就够了。</p></blockquote><h3 id="解决办法"><a class="markdownIt-Anchor" href="#解决办法"></a> 解决办法</h3><p>由于我使用的是 PHPstudy 集成的 MySQL8 所以直接找到 PHPstudy 将引擎改为 InnoDB 就好了</p><p><img src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202409210102415.png" srcset="/img/loading/loading.gif" lazyload alt="image-20240921010242363"></p><h2 id="strapi启动项目登录凭证"><a class="markdownIt-Anchor" href="#strapi启动项目登录凭证"></a> Strapi 启动项目登录凭证</h2><p>正确启动之后，会自动打开浏览器访问 admin 管理面板的注册页面，请自行注册。</p><p>注册产生的凭证决定你是否能登录上 Strapi 的管理面板，请妥善保存你的登录信息。</p><p>可只保存关键信息，下面是我的示例：</p><table><thead><tr><th>配置项</th><th>值</th></tr></thead><tbody><tr><td>name</td><td>4rozen</td></tr><tr><td>姓氏</td><td>Chen</td></tr><tr><td>电子邮件</td><td><code>maril4chen@foxmail.com</code></td></tr><tr><td>密码</td><td>Strapi1005</td></tr></tbody></table><h2 id="了解strapi的身份管理机制"><a class="markdownIt-Anchor" href="#了解strapi的身份管理机制"></a> 了解 Strapi 的身份管理机制</h2><p>Strapi 可以设置普通注册用户为 Authenticaed 或 public 分组</p><img src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202409231751921.png" srcset="/img/loading/loading.gif" lazyload alt="image-20240923175122837" style="zoom:67%"><p>由于进行普通注册会默认得到 jwt 令牌，所以我们可以设置为 Authenticaed 分组</p><p>这里你一定会疑惑 Strapi 的身份机制到底是什么？</p><p>对普通用户简单来说有以下身份：</p><ol><li>public：未经过身份验证的用户所在分组，访问接口只能访问公共接口</li><li>Authenticaed：经过身份验证的用户所在分组，访问接口更多</li></ol><blockquote><p>身份验证发生在登录或者是注册，能完成其中之一都可以算作身份验证通过</p></blockquote><p>每一个用户登录之前都是 public 用户，在注册后就成为了 Authenticaed user 经过验证的用户。</p><p>Strapi 使用 Roles 来对普通注册的 user 用户进行分组，在 content manager 中有默认创建的 Users 表，可以点击用户进行设置，分为以下身份：</p><ul><li><p>Authenticaed：身份验证通过的用户</p></li><li><p>public：路人</p></li></ul><p><img src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202409231812271.png" srcset="/img/loading/loading.gif" lazyload alt="image-20240923181205208"></p><p>Strapi 同样也对通过后台 admin 进行注册的管理员用户使用 Roles 来进行管理，分为：</p><ul><li>Author：作者可以管理他们创建的内容。</li><li>Editor：编辑者可以管理和发布内容，包括其他用户的内容。</li><li>Super Admin：超级用户可以访问和管理所有功能和设置。</li></ul><p><img src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202409231817758.png" srcset="/img/loading/loading.gif" lazyload alt="image-20240923181701691"></p><p><strong>第一次注册进来默认是 Super Admin 超级管理员。</strong></p><p>如果有更多人，点击 Administration panel 管理面板中的 Roles 角色可以进行分组管理。</p><h2 id="如何创建表结构"><a class="markdownIt-Anchor" href="#如何创建表结构"></a> 如何创建表结构</h2><p>可能看到上面的身份管理你一脸懵，没关系，我们先来创建一个用于存放商品信息的示例表：</p><ol><li><p>点击左侧侧边栏的 Content-Type Builder 内容构建<br><img src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410111826492.png" srcset="/img/loading/loading.gif" lazyload alt="image-20241011182621412"></p></li><li><p>点击 Create new collection type 创建内容集合类型的复杂数据表，这种表结构支持表与表之间的引用关联，这有助于我们创建符合数据要求的数据结构<br><img src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410111828046.png" srcset="/img/loading/loading.gif" lazyload alt="image-20241011182837966"></p></li><li><p>填写单数形式的表名，当然复数形式的表名也可以<br><img src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410111832024.png" srcset="/img/loading/loading.gif" lazyload alt="image-20241011183217936" style="zoom:67%"></p></li><li><p>点击 ADVANCED SETTINGS 高级设置<br><img src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410111834339.png" srcset="/img/loading/loading.gif" lazyload alt="image-20241011183455258" style="zoom:67%"></p></li><li><p>点击 Continue 继续，此时需要你进行表的字段设置，比如设置商品名和商品图如下：<br><img src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410111837231.png" srcset="/img/loading/loading.gif" lazyload alt="image-20241011183733123" style="zoom:67%"></p><p>具体设置 Text 类型的商品名如下：</p><p><img src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410111841019.png" srcset="/img/loading/loading.gif" lazyload alt="image-20241011184132933" style="zoom:67%"><img src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410111843156.png" srcset="/img/loading/loading.gif" lazyload alt="image-20241011184331055" style="zoom:67%"></p><p>设置商品图片如下：</p><p><img src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410111845558.png" srcset="/img/loading/loading.gif" lazyload alt="image-20241011184512477" style="zoom:67%"><img src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410111846054.png" srcset="/img/loading/loading.gif" lazyload alt="image-20241011184637966" style="zoom:67%"><img src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410111847286.png" srcset="/img/loading/loading.gif" lazyload alt="image-20241011184717164" style="zoom:67%"></p><p>添加成功之后别忘记点击 Save 保存</p><p><img src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410111848805.png" srcset="/img/loading/loading.gif" lazyload alt="image-20241011184806683"></p><p>之后 Strapi 将进行重启，不出意外将成功创建 Good 数据表和我们刚才添加的字段：</p><p><img src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410111853588.png" srcset="/img/loading/loading.gif" lazyload alt="image-20241011185353508"></p></li><li><p>填充数据：点击左侧边栏的 Content Manager 内容管理选择刚才我们创建的数据表 good 并点击右上角的 Create new entry 创建实体就行了。</p></li></ol><h2 id="strapi接口权限设置"><a class="markdownIt-Anchor" href="#strapi接口权限设置"></a> Strapi 接口权限设置</h2><p>数据表有了，怎么通过接口调试呢？</p><p>Strapi 的接口要想调试，首先得给予权限。</p><ol><li><p>找到左侧侧边栏的 setting 然后点击 Roles<br><img src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410111953074.png" srcset="/img/loading/loading.gif" lazyload alt="image-20241011195314924"></p><p><code>Authenticated</code> 为经过注册等身份验证手段的用户，而 Public 为公共用户。这将以此分割接口权限，<code>Public</code> 为随便就能访问的接口，<code>Authenticated</code> 为身份验证之后才能使用的接口</p></li><li><p>除了登录注册接口，我们可能会希望所有接口能够经过权限验证才能通行。但是我这里为了演示，就将 <code>good</code> 表的接口给 <code>Public</code> 用户开通：<br><img src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410111958468.png" srcset="/img/loading/loading.gif" lazyload alt="image-20241011195836369" style="zoom:67%"><img src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410112000118.png" srcset="/img/loading/loading.gif" lazyload alt="image-20241011200008789"></p></li><li><p>别忘记右上角点击保存。我这里直接使用浏览器进行接口测试：</p><img src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202410112008460.png" srcset="/img/loading/loading.gif" lazyload alt="image-20241011200804395" style="zoom:67%"></li></ol><p>如果想接口限权，只允许身份验证的用户才能使用的话，就请给 <code>Authenticated</code> 用户开权限而不是 Public</p><h2 id="strapi接口文档查看"><a class="markdownIt-Anchor" href="#strapi接口文档查看"></a> Strapi 接口文档查看</h2><blockquote><p>说到接口，这里推荐安装 document 插件进行可视化查看，因为 Strapi 默认不提供可视化的接口文档，只提供接口路由可供查看。</p><p>插件官方文档：<a target="_blank" rel="noopener" href="https://docs.strapi.io/dev-docs/plugins/documentation">https://docs.strapi.io/dev-docs/plugins/documentation</a></p></blockquote><p>安装接口文档插件命令</p><figure class="shiki sh"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">yarn</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">add</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">@strapi/plugin-documentation</span></span>
<span class="line"><span style="color:#6a9955"># 或者npm</span></span>
<span class="line"><span style="color:#dcdcaa">npm</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">install</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">@strapi/plugin-documentation</span></span></code></pre></div></div></figure><p>接口文档访问地址</p><figure class="shiki http"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#d4d4d4">http://localhost:1337/documentation/v1.0.0#/</span></span></code></pre></div></div></figure><p>其中 Users-Permissions - Auth 为认证用户和普通用户的接口，下面的 User-Permissions 则是管理员端的相关接口。</p><p><img src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202409231908943.png" srcset="/img/loading/loading.gif" lazyload alt="image-20240923190855795"></p><h2 id="配置邮箱发信插件"><a class="markdownIt-Anchor" href="#配置邮箱发信插件"></a> 配置邮箱发信插件</h2><p>Strapi 默认并不会自行配置邮件服务。</p><p>为了能够发送邮件（例如密码重置邮件），需要设置一个邮件提供商（如 SendGrid、Gmail、SMTP 等）。如果没有配置邮件提供商，本地 Strapi 无法实际发送邮件。</p><h3 id="安装-nodemailer-插件"><a class="markdownIt-Anchor" href="#安装-nodemailer-插件"></a> 安装 <code>nodemailer</code> 插件</h3><figure class="shiki sh"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#6a9955"># using yarn</span></span>
<span class="line"><span style="color:#dcdcaa">yarn</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">add</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">@strapi/provider-email-nodemailer</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a9955"># using npm</span></span>
<span class="line"><span style="color:#dcdcaa">npm</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">install</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">@strapi/provider-email-nodemailer</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">--save</span></span></code></pre></div></div></figure><h3 id="配置-email-provider"><a class="markdownIt-Anchor" href="#配置-email-provider"></a> <strong>配置 Email Provider</strong></h3><p>接下来，需要配置邮件提供商。</p><p>在 Strapi 中，邮件服务的配置文件位于 <code>config/plugins.js</code>。国内推荐 qq 或者网易邮箱（自行搜索邮箱开通 SMTP），这里介绍网易邮箱配置：</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#4ec9b0">module</span><span style="color:#d4d4d4">.</span><span style="color:#4ec9b0">exports</span><span style="color:#d4d4d4"> = ({ </span><span style="color:#9cdcfe">env</span><span style="color:#d4d4d4"> }) </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> ({</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#6a9955">// ...</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">email:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">config:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">provider:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'nodemailer'</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">providerOptions:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">host:</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">env</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'SMTP_HOST'</span><span style="color:#d4d4d4">), </span><span style="color:#6a9955">// 网易邮箱SMTP服务器地址</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">port:</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">env</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'SMTP_PORT'</span><span style="color:#d4d4d4">), </span><span style="color:#6a9955">// SSL端口</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">secure:</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">true</span><span style="color:#d4d4d4">, </span><span style="color:#6a9955">// 使用SSL</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">auth:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">user:</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">env</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'SMTP_USERNAME'</span><span style="color:#d4d4d4">), </span><span style="color:#6a9955">// 网易邮箱账号</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">pass:</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">env</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'SMTP_PASSWORD'</span><span style="color:#d4d4d4">), </span><span style="color:#6a9955">// 授权码</span></span>
<span class="line"><span style="color:#d4d4d4">        },</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#6a9955">// 其他自定义Nodemailer选项</span></span>
<span class="line"><span style="color:#d4d4d4">      },</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">settings:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">defaultFrom:</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">env</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'SMTP_USERNAME'</span><span style="color:#d4d4d4">),</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">defaultReplyTo:</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">env</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'SMTP_PASSWORD'</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">      },</span></span>
<span class="line"><span style="color:#d4d4d4">    },</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#6a9955">// ...</span></span>
<span class="line"><span style="color:#d4d4d4">});</span></span></code></pre></div></div></figure><h3 id="获取-smtp-授权码"><a class="markdownIt-Anchor" href="#获取-smtp-授权码"></a> 获取 SMTP 授权码</h3><ol><li>登录 163 邮箱。</li><li>打开 <strong>设置</strong> -&gt; <strong>POP3/SMTP/IMAP</strong>。</li><li>开启 <strong>SMTP</strong> 服务，并生成授权码（<strong>授权码只展示一次，请妥善保存</strong>）。</li></ol><p>在你的 <code>.env</code> 文件中设置相应的环境变量</p><figure class="shiki bash"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#6a9955"># Mail</span></span>
<span class="line"><span style="color:#9cdcfe">SMTP_HOST</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">smtp.163.com</span></span>
<span class="line"><span style="color:#9cdcfe">SMTP_PORT</span><span style="color:#d4d4d4">=</span><span style="color:#b5cea8">465</span></span>
<span class="line"><span style="color:#9cdcfe">SMTP_USERNAME</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">your_mail0@163.com</span></span>
<span class="line"><span style="color:#9cdcfe">SMTP_PASSWORD</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">JBxxxxxxxxxxxxtreB</span></span></code></pre></div></div></figure><h3 id="修改template模板"><a class="markdownIt-Anchor" href="#修改template模板"></a> 修改 template 模板</h3><p><strong>将模板中的发件人和刚才配置的插件文件中的发件人一致</strong></p><p><img src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202409232306287.png" srcset="/img/loading/loading.gif" lazyload alt="image-20240923230633136"></p><p>否则你可能遇到错误</p><figure class="shiki bash"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">Error:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">Mail</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">command</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">failed:</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">501</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">Mail</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">address</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">must</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">be</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">same</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">as</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">authorization</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">user.</span></span></code></pre></div></div></figure><h2 id="api-查询媒体数据"><a class="markdownIt-Anchor" href="#api-查询媒体数据"></a> API - 查询媒体数据</h2><p>在查询某些包含关系、媒体字段（图片、视频等）、组件或动态区域的接口时，如果不在查询参数中加上 <code>populate</code> 参数，Strapi 将默认不会查询返回，这是出于性能考虑。</p><p>例如 <code>/api/users/me</code> 接口，假设 Users 表中还包含一个 avatar 头像字段，则想要接口返回头像数据，应该是如下查询（<code>*</code> 表示查询所有关系）</p><figure class="shiki http"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#d4d4d4">http://localhost:1337/api/users/me?populate=*</span></span></code></pre></div></div></figure><p><img src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202409242108207.png" srcset="/img/loading/loading.gif" lazyload alt="image-20240924210837091"></p><blockquote><p>populate 参数中文文档参考：<a target="_blank" rel="noopener" href="https://strapi.nodejs.cn/dev-docs/api/rest/populate-select/">https://strapi.nodejs.cn/dev-docs/api/rest/populate-select/</a></p></blockquote><h2 id="api-查询特定字段"><a class="markdownIt-Anchor" href="#api-查询特定字段"></a> API - 查询特定字段</h2><p>查询请求可以接受 <code>fields</code> 参数来<strong>仅选择</strong>某些字段。默认情况下，仅返回以下 <a target="_blank" rel="noopener" href="https://strapi.nodejs.cn/dev-docs/backend-customization/models#model-attributes">字段类型</a>：</p><ul><li>字符串类型：字符串、文本、富文本、枚举、电子邮件、密码和 uid，</li><li>日期类型：日期、时间、日期时间和时间戳，</li><li>号码类型：整数、大整数、浮点数和小数，</li><li>通用类型：布尔值、数组和 JSON。</li></ul><blockquote><p>字段选择不适用于关系、媒体、组件或动态区域字段。要填充这些字段，请使用 <a target="_blank" rel="noopener" href="https://strapi.nodejs.cn/dev-docs/api/rest/populate-select/#population"><code>populate</code> 参数</a>。</p></blockquote><p>该参数可以限制响应的数据字段，可以使得某些数据不被暴露，一定程度提高安全性和数据简洁性。</p><p>例如 <code>/api/users/me</code> 接口，查询所有的关系返回数据为</p><figure class="shiki json"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#d4d4d4">{</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"id"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">11</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"documentId"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"dtree1c2woi3njmz56xmttcm"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"username"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"xiaowu1"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"email"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"1681237971@qq.com"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"provider"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"local"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"confirmed"</span><span style="color:#d4d4d4">: </span><span style="color:#569cd6">true</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"blocked"</span><span style="color:#d4d4d4">: </span><span style="color:#569cd6">false</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"createdAt"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"2024-09-23T16:06:23.045Z"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"updatedAt"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"2024-09-24T12:51:20.561Z"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"publishedAt"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"2024-09-24T12:51:20.528Z"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"locale"</span><span style="color:#d4d4d4">: </span><span style="color:#569cd6">null</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"avatar"</span><span style="color:#d4d4d4">: {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"id"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">32</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"documentId"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"nq7hj2shguktf5begtsluvup"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"name"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"头像.jpg"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"alternativeText"</span><span style="color:#d4d4d4">: </span><span style="color:#569cd6">null</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"caption"</span><span style="color:#d4d4d4">: </span><span style="color:#569cd6">null</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"width"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">350</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"height"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">350</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"formats"</span><span style="color:#d4d4d4">: {</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"thumbnail"</span><span style="color:#d4d4d4">: {</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"ext"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">".jpg"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"url"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"/uploads/thumbnail__993e719107.jpg"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"hash"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"thumbnail__993e719107"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"mime"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"image/jpeg"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"name"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"thumbnail_头像.jpg"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"path"</span><span style="color:#d4d4d4">: </span><span style="color:#569cd6">null</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"size"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">7.37</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"width"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">156</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"height"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">156</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"sizeInBytes"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">7369</span></span>
<span class="line"><span style="color:#d4d4d4">            }</span></span>
<span class="line"><span style="color:#d4d4d4">        },</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"hash"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"_993e719107"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"ext"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">".jpg"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"mime"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"image/jpeg"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"size"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">20.89</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"url"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"/uploads/_993e719107.jpg"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"previewUrl"</span><span style="color:#d4d4d4">: </span><span style="color:#569cd6">null</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"provider"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"local"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"provider_metadata"</span><span style="color:#d4d4d4">: </span><span style="color:#569cd6">null</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"createdAt"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"2024-09-24T12:51:16.512Z"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"updatedAt"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"2024-09-24T12:51:16.512Z"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"publishedAt"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"2024-09-24T12:51:16.513Z"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"locale"</span><span style="color:#d4d4d4">: </span><span style="color:#569cd6">null</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span></code></pre></div></div></figure><p>如果带上下面的请求参数</p><figure class="shiki bash"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">GET</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">/api/users/me?fields=username,email,createdAt,updatedAt,id</span><span style="color:#d4d4d4">&amp;</span><span style="color:#dcdcaa">populate[avatar][fields]</span><span style="color:#d4d4d4">=id,height,width,name,updatedAt,ext</span></span></code></pre></div></div></figure><p>则返回数据为</p><figure class="shiki json"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#d4d4d4">{</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"id"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">11</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"documentId"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"dtree1c2woi3njmz56xmttcm"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"username"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"xiaowu1"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"email"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"1681237971@qq.com"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"createdAt"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"2024-09-23T16:06:23.045Z"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"updatedAt"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"2024-09-24T12:51:20.561Z"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"avatar"</span><span style="color:#d4d4d4">: {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"id"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">32</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"documentId"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"nq7hj2shguktf5begtsluvup"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"height"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">350</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"width"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">350</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"name"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"头像.jpg"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"updatedAt"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"2024-09-24T12:51:16.512Z"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"ext"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">".jpg"</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span></code></pre></div></div></figure><h3 id="参数解释"><a class="markdownIt-Anchor" href="#参数解释"></a> 参数解释</h3><figure class="shiki bash"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">GET</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">/api/users/me?fields=username,email,createdAt,updatedAt,id</span><span style="color:#d4d4d4">&amp;</span><span style="color:#dcdcaa">populate[avatar][fields]</span><span style="color:#d4d4d4">=id,height,width,name,updatedAt,ext</span></span></code></pre></div></div></figure><p><code>fields</code> 关键字表示要进行第一级的字段选取，<code>populate[第一个参数][第二个参数]</code> 的第一个中括号参数为第二级字段的根节点（这里是 <code>avatar</code>），接着第二个中括号写 <code>fields</code> 关键字，表示要进行选取的字段名，这里是 <code>id,height,width,name,updatedAt,ext</code></p><h2 id="api-文件上传"><a class="markdownIt-Anchor" href="#api-文件上传"></a> API - 文件上传</h2><p>Strapi 的文件上传除了在管理面板中进行上传之外，还可以通过接口的方式进行上传（Strapi 支持 blob、base64 上传，请提前给予权限）</p><p><img src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202409260028631.png" srcset="/img/loading/loading.gif" lazyload alt="image-20240926002852546"></p><p>请在接口前加上 /api，即：</p><figure class="shiki http"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#d4d4d4">http://localhost:1337/api/upload</span></span></code></pre></div></div></figure><p><img src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202409260029602.png" srcset="/img/loading/loading.gif" lazyload alt="image-20240926002913544"></p><p>例如在 apifox 中进行测试：</p><p><img src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202409260033256.png" srcset="/img/loading/loading.gif" lazyload alt="image-20240926003359170"></p><h2 id="api-更新包含媒体字段的数据"><a class="markdownIt-Anchor" href="#api-更新包含媒体字段的数据"></a> API - 更新包含媒体字段的数据</h2><p>那么如果我创建了一个数据表其中包含一个媒体字段，如何更新该表中的数据？</p><p>假设该表如下：</p><p><img src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202409260036848.png" srcset="/img/loading/loading.gif" lazyload alt="image-20240926003626793"></p><p>请求接口为：</p><figure class="shiki bash"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">POST</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">/api/articles/:id</span></span></code></pre></div></div></figure><p>访问接口文档插件的地址，你会发现它的示例如下：</p><figure class="shiki json"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#d4d4d4">{</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">"data"</span><span style="color:#d4d4d4">: {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"title"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"string"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"content"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"string"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"cover_img"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"string or id"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"state"</span><span style="color:#d4d4d4">: </span><span style="color:#569cd6">true</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"article_category"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"string or id"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"author"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"string or id"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"locale"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"string"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"localizations"</span><span style="color:#d4d4d4">: [</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#ce9178">"string or id"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#ce9178">"string or id"</span></span>
<span class="line"><span style="color:#d4d4d4">    ]</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span></code></pre></div></div></figure><p><code>"cover_img": "string or id"</code></p><p>string 或者 id？string 说是网络地址我都能理解，id 是什么？</p><ul><li>实际上该接口仅仅允许你<strong>通过已经上传的图片 id 进行设置 cover_img</strong></li></ul><p><strong>也就是说你要先将更换好的图片进行上传，然后得到它的 id，再将该 id 赋值给 cover_img 才行</strong></p><p><s>折腾了我一晚上，各种曲线救国写的累死人，没想到随意一个测试，原来是这样的…… 哈哈😎😎</s></p><h2 id="api-strapi条件查询"><a class="markdownIt-Anchor" href="#api-strapi条件查询"></a> API-Strapi 条件查询</h2><p>Strapi 如何进行条件查询？</p><blockquote><p>参考文档：</p><ul><li>文档服务 API 可用方法：<a target="_blank" rel="noopener" href="https://strapi.nodejs.cn/dev-docs/api/document-service">https://strapi.nodejs.cn/dev-docs/api/document-service</a></li><li>文档服务 API 过滤器：<a target="_blank" rel="noopener" href="https://strapi.nodejs.cn/dev-docs/api/document-service/filters">https://strapi.nodejs.cn/dev-docs/api/document-service/filters</a></li></ul></blockquote><p>总之，Strapi 提供了一些常见的查询操作符，我们可以通过这些操作符进行各种条件查询。常用操作符包括：</p><table><thead><tr><th>操作符</th><th>含义</th><th>示例</th></tr></thead><tbody><tr><td><code>$eq</code></td><td>等于</td><td><code>filters[title][$eq]=Vue.js Tutorial</code></td></tr><tr><td><code>$ne</code></td><td>不等于</td><td><code>filters[title][$ne]=Vue.js Tutorial</code></td></tr><tr><td><code>$lt</code></td><td>小于</td><td><code>filters[views][$lt]=1000</code></td></tr><tr><td><code>$lte</code></td><td>小于等于</td><td><code>filters[views][$lte]=1000</code></td></tr><tr><td><code>$gt</code></td><td>大于</td><td><code>filters[views][$gt]=1000</code></td></tr><tr><td><code>$gte</code></td><td>大于等于</td><td><code>filters[views][$gte]=1000</code></td></tr><tr><td><code>$contains</code></td><td>包含（字符串部分匹配）</td><td><code>filters[title][$contains]=Vue</code></td></tr><tr><td><code>$startsWith</code></td><td>以指定字符串开头</td><td><code>filters[title][$startsWith]=Vue</code></td></tr><tr><td><code>$endsWith</code></td><td>以指定字符串结尾</td><td><code>filters[title][$endsWith]=Tutorial</code></td></tr><tr><td><code>$null</code></td><td>字段值为空</td><td><code>filters[coverImage][$null]=true</code></td></tr><tr><td><code>$in</code></td><td>在给定数组中</td><td><code>filters[category][$in][0]=News</code></td></tr><tr><td><code>$between</code></td><td>在两个值之间</td><td><code>filters[views][$between][0]=10&amp;filters[views][$between][1]=100</code></td></tr></tbody></table><p>示例</p><p>查询 <code>views</code> 字段在 100 和 1000 之间的文章：</p><figure class="shiki bash"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">GET</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">/api/articles?filters[views][</span><span style="color:#9cdcfe">$gte</span><span style="color:#ce9178">]=</span><span style="color:#b5cea8">100</span><span style="color:#d4d4d4">&amp;</span><span style="color:#dcdcaa">filters[views][$lte]</span><span style="color:#d4d4d4">=1000</span></span></code></pre></div></div></figure><p>查询 <code>category</code> 是 "Tech" 或 "News" 的文章：</p><figure class="shiki bash"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">GET</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">/api/articles?filters[category][</span><span style="color:#9cdcfe">$in</span><span style="color:#ce9178">][</span><span style="color:#b5cea8">0</span><span style="color:#ce9178">]=Tech</span><span style="color:#d4d4d4">&amp;</span><span style="color:#dcdcaa">filters[category][$in][1]</span><span style="color:#d4d4d4">=News</span></span></code></pre></div></div></figure><p>假设数据如下（接口是：/api/articles）</p><figure class="shiki json"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#d4d4d4">{</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"data"</span><span style="color:#d4d4d4">: [</span></span>
<span class="line"><span style="color:#d4d4d4">        {</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"id"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">2</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"documentId"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"fuki5p5xzjnk5n7vfvwzv9c4"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"title"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"CTF-WP"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"content"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"&lt;p&gt;这是一份测试内容数据321&lt;/p&gt;"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"state"</span><span style="color:#d4d4d4">: </span><span style="color:#569cd6">true</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"createdAt"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"2024-09-25T05:29:27.298Z"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"updatedAt"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"2024-09-25T17:15:03.198Z"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"publishedAt"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"2024-09-25T17:15:03.188Z"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"cover_img"</span><span style="color:#d4d4d4">: {</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"id"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">45</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"documentId"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"nzpwo3hy9qkesr5l0uqd1k02"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"name"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"1607569780_678488.jpg"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"alternativeText"</span><span style="color:#d4d4d4">: </span><span style="color:#569cd6">null</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"caption"</span><span style="color:#d4d4d4">: </span><span style="color:#569cd6">null</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"width"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">1920</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"height"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">1080</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"ext"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">".jpg"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"mime"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"image/jpeg"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"url"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"/uploads/1607569780_678488_991350393d.jpg"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"createdAt"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"2024-09-25T17:15:03.111Z"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"updatedAt"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"2024-09-25T17:15:03.111Z"</span></span>
<span class="line"><span style="color:#d4d4d4">            },</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"article_category"</span><span style="color:#d4d4d4">: {</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"id"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">6</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"documentId"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"qznn6b3nxzqxyv9qlzyu6t65"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"category_name"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"mod修改"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"category_alias"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"mod"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"createdAt"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"2024-09-25T07:58:18.423Z"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"updatedAt"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"2024-09-25T07:58:18.423Z"</span></span>
<span class="line"><span style="color:#d4d4d4">            }</span></span>
<span class="line"><span style="color:#d4d4d4">        },</span></span>
<span class="line"><span style="color:#d4d4d4">        {</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"id"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">4</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"documentId"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"hevczglj0hqyjc5h5zva0cb9"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"title"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"这是测试新增文章的标"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"content"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"&lt;p&gt;托尔斯泰&lt;/p&gt;"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"state"</span><span style="color:#d4d4d4">: </span><span style="color:#569cd6">true</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"createdAt"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"2024-09-25T17:33:11.929Z"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"updatedAt"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"2024-09-25T17:33:11.929Z"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"publishedAt"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"2024-09-25T17:33:11.924Z"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"cover_img"</span><span style="color:#d4d4d4">: {</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"id"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">48</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"documentId"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"curr9bdzmqaxi6hz9sw2f7q8"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"name"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"d6ef9eb44aed2e7335cd59efc201a18b86d6fa60.jpg"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"alternativeText"</span><span style="color:#d4d4d4">: </span><span style="color:#569cd6">null</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"caption"</span><span style="color:#d4d4d4">: </span><span style="color:#569cd6">null</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"width"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">1920</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"height"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">1200</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"ext"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">".jpg"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"mime"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"image/jpeg"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"url"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"/uploads/d6ef9eb44aed2e7335cd59efc201a18b86d6fa60_41d5dbc6ce.jpg"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"createdAt"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"2024-09-25T17:33:11.737Z"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"updatedAt"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"2024-09-25T17:33:11.737Z"</span></span>
<span class="line"><span style="color:#d4d4d4">            },</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"article_category"</span><span style="color:#d4d4d4">: {</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"id"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">5</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"documentId"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"dchbyr5f11zshu2gb2thyxvh"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"category_name"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"随想"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"category_alias"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"suixiang"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"createdAt"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"2024-09-25T07:57:58.692Z"</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">"updatedAt"</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">"2024-09-25T07:57:58.692Z"</span></span>
<span class="line"><span style="color:#d4d4d4">            }</span></span>
<span class="line"><span style="color:#d4d4d4">        }</span></span>
<span class="line"><span style="color:#d4d4d4">    ],</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"meta"</span><span style="color:#d4d4d4">: {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">"pagination"</span><span style="color:#d4d4d4">: {</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"page"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"pageSize"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">25</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"pageCount"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">"total"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">2</span></span>
<span class="line"><span style="color:#d4d4d4">        }</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span></code></pre></div></div></figure><h3 id="根据分类id和文章发布状态进行查询"><a class="markdownIt-Anchor" href="#根据分类id和文章发布状态进行查询"></a> 根据分类 id 和文章发布状态进行查询</h3><p>怎么根据分类 id 和文章发布状态进行查询？比如我要查询文章所属分类为随想且发布状态为已发布</p><figure class="shiki bash"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">GET</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">/api/articles?filters[article_category][id][</span><span style="color:#9cdcfe">$eq</span><span style="color:#ce9178">]=</span><span style="color:#b5cea8">5</span><span style="color:#d4d4d4">&amp;</span><span style="color:#dcdcaa">filters[state][$eq]</span><span style="color:#d4d4d4">=</span><span style="color:#dcdcaa">true</span></span></code></pre></div></div></figure><h3 id="分页查询"><a class="markdownIt-Anchor" href="#分页查询"></a> 分页查询</h3><p>通过 <code>pagination</code> 参数在请求中实现分页查询。Strapi 的分页功能包括 <code>page</code>（页码）和 <code>pageSize</code>（每页显示的记录数），我们可以在 API 请求的 URL 中传递这些参数。例如：</p><p>查询第 2 页的数据，并且每页显示 5 条文章，URL 可以写成这样</p><figure class="shiki bash"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">GET</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">/api/articles?pagination[page]=</span><span style="color:#b5cea8">2</span><span style="color:#d4d4d4">&amp;</span><span style="color:#9cdcfe">pagination</span><span style="color:#d4d4d4">[</span><span style="color:#9cdcfe">pageSize</span><span style="color:#d4d4d4">]=</span><span style="color:#b5cea8">5</span></span></code></pre></div></div></figure><p>分页查询的结果中，Strapi 会在 <code>meta</code> 字段中返回有关分页的信息：</p><figure class="shiki json"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#d4d4d4">{</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">"data"</span><span style="color:#d4d4d4">: [ </span><span style="color:#f44747">...</span><span style="color:#d4d4d4"> ],  </span><span style="color:#6a9955">// 数据列表</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">"meta"</span><span style="color:#d4d4d4">: {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">"pagination"</span><span style="color:#d4d4d4">: {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">"page"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">2</span><span style="color:#d4d4d4">,        </span><span style="color:#6a9955">// 当前页码</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">"pageSize"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">5</span><span style="color:#d4d4d4">,    </span><span style="color:#6a9955">// 每页显示条数</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">"pageCount"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">10</span><span style="color:#d4d4d4">,  </span><span style="color:#6a9955">// 总页数</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">"total"</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">50</span><span style="color:#d4d4d4">       </span><span style="color:#6a9955">// 总记录数</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span></code></pre></div></div></figure><h3 id="模糊查询"><a class="markdownIt-Anchor" href="#模糊查询"></a> 模糊查询</h3><p>Strapi 支持通过 API 进行模糊查询，我们可以使用 <code>filters</code> 参数结合 <code>$contains</code> 运算符来实现模糊查询。例如：</p><p>根据文章标题（<code>title</code> 字段）进行模糊查询，查询包含某个关键词的文章列表，API 请求可以这样写：</p><figure class="shiki bash"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">GET</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">/api/articles?filters[title][</span><span style="color:#9cdcfe">$contains</span><span style="color:#ce9178">]=keyWord</span></span></code></pre></div></div></figure><p>我们甚至可以结合分页查询和模糊查询</p><figure class="shiki bash"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">/api/articles?filters[title][$contains]</span><span style="color:#d4d4d4">=</span><span style="color:#dcdcaa">test</span><span style="color:#d4d4d4">&amp;</span><span style="color:#9cdcfe">pagination</span><span style="color:#d4d4d4">[</span><span style="color:#9cdcfe">page</span><span style="color:#d4d4d4">]=</span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">&amp;</span><span style="color:#9cdcfe">pagination</span><span style="color:#d4d4d4">[</span><span style="color:#9cdcfe">pageSize</span><span style="color:#d4d4d4">]=</span><span style="color:#b5cea8">5</span></span></code></pre></div></div></figure><h3 id="排序查询"><a class="markdownIt-Anchor" href="#排序查询"></a> 排序查询</h3><p>Strapi 支持通过 API 查询时对数据进行排序。我们可以使用 <code>sort</code> 参数来指定排序字段和顺序。</p><h4 id="单字段排序查询"><a class="markdownIt-Anchor" href="#单字段排序查询"></a> 单字段排序查询</h4><p>单字段排序查询例如：</p><p>根据 <code>updatedAt</code> 字段进行排序，可以按照如下方式查询最新更新的文章</p><figure class="shiki bash"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">GET</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">/api/articles?sort=updatedAt:desc</span></span></code></pre></div></div></figure><p><code>sort=updatedAt:desc</code>：按照 <code>updatedAt</code> 字段降序排列（最新的文章在前）</p><ul><li><code>desc</code>：降序排列，从新到旧。</li><li><code>asc</code>：升序排列，从旧到新。</li></ul><h4 id="多字段排序"><a class="markdownIt-Anchor" href="#多字段排序"></a> 多字段排序</h4><p>例如，首先按 <code>state</code>（状态），然后按 <code>updatedAt</code>：</p><figure class="shiki bash"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">GET</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">/api/articles?sort=state:asc,updatedAt:desc</span></span></code></pre></div></div></figure><p>这将先按 <code>state</code> 升序排列，再按 <code>updatedAt</code> 降序排列。</p><h4 id="结合分页和过滤"><a class="markdownIt-Anchor" href="#结合分页和过滤"></a> 结合分页和过滤</h4><p>甚至可以将排序与分页、过滤结合使用。例如，查询标题中包含 <code>test</code> 的文章，按 <code>updatedAt</code> 从新到旧排序，并分页显示：</p><figure class="shiki bash"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">GET</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">/api/articles?filters[title][</span><span style="color:#9cdcfe">$contains</span><span style="color:#ce9178">]=test</span><span style="color:#d4d4d4">&amp;</span><span style="color:#9cdcfe">sort</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">updatedAt:desc</span><span style="color:#d4d4d4">&amp;</span><span style="color:#9cdcfe">pagination</span><span style="color:#d4d4d4">[</span><span style="color:#9cdcfe">page</span><span style="color:#d4d4d4">]=</span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">&amp;</span><span style="color:#9cdcfe">pagination</span><span style="color:#d4d4d4">[</span><span style="color:#9cdcfe">pageSize</span><span style="color:#d4d4d4">]=</span><span style="color:#b5cea8">5</span></span></code></pre></div></div></figure><p>这会返回包含 <code>test</code> 关键词的文章，按更新时间降序排列，并分页显示。</p><h4 id="小结"><a class="markdownIt-Anchor" href="#小结"></a> 小结</h4><p>总之，Strapi 提供了多个过滤操作符，使得我们可以灵活地查询数据</p><ul><li><code>$eq</code>：精确匹配</li><li><code>$ne</code>：不等于</li><li><code>$lt</code>：小于</li><li><code>$lte</code>：小于或等于</li><li><code>$gt</code>：大于</li><li><code>$gte</code>：大于或等于</li><li><code>$contains</code>：包含（模糊查询）</li><li><code>$notContains</code>：不包含</li><li><code>$startsWith</code>：以指定字符串开头</li><li><code>$endsWith</code>：以指定字符串结尾</li></ul><h2 id="结语"><a class="markdownIt-Anchor" href="#结语"></a> 结语</h2><p>目前我碰到的问题基本就是这些，如果有更复杂的项目时，可能才会碰到更多问题……</p><blockquote><p>关于 Nginx 如何监听 Strapi 可以看看我的 <a href="https://4rozen.github.io/2023/10/26/Vue%E9%A1%B9%E7%9B%AE%E6%89%93%E5%8C%85+%E9%83%A8%E7%BD%B2%E5%88%B0GitHub%E4%B8%BAdemo.md/">Vue 打包</a>那篇文章：解决打包后的刷新 404 问题 -&gt;Github Pages 上的 history 路由模式的可行性 -&gt; 一个可能需要的配置参考</p></blockquote><p>我不得不说的是，Strapi 对于表与表之间的引用在 API 接口调试方面体验确实很糟糕，某些接口使用 <code>documentId</code> 有些接口却只认真实 <code>id</code></p><p>不过免费的可用，还能要求什么呢 (〃￣︶￣) 人 (￣︶￣〃)</p><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script></div><hr><div><div class="post-metas my-3"><div class="post-meta mr-3 d-flex align-items-center"><i class="iconfont icon-category"></i> <span class="category-chains"><span class="category-chain"><a href="/categories/Back-End/" class="category-chain-item">后端笔记</a></span></span></div><div class="post-meta"><i class="iconfont icon-tags"></i> <a href="/tags/Strapi/" class="print-no-link">#Strapi</a></div></div><div class="license-box my-3"><div class="license-title"><div>一文搞清 Strapi5 的安装与使用 | 踩坑爽 (bushi</div><div>https://4rozen.github.io/archives/Back-End/45101.html</div></div><div class="license-meta"><div class="license-meta-item"><div>作者</div><div>4rozeN</div></div><div class="license-meta-item license-meta-date"><div>发布于</div><div>2024年7月25日</div></div><div class="license-meta-item"><div>许可协议</div><div><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-nc/4.0/"><span class="hint--top hint--rounded" aria-label="BY - 署名"><i class="iconfont icon-cc-by"></i> </span></a><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-nc/4.0/"><span class="hint--top hint--rounded" aria-label="NC - 非商业性使用"><i class="iconfont icon-cc-nc"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href="/archives/notes/57159.html" title="华硕奥创中心以及其他服务组件彻底删除卸载"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">华硕奥创中心以及其他服务组件彻底删除卸载</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/archives/Gamer/63649.html" title="Simple Animated Guns 游玩指南"><span class="hidden-mobile">Simple Animated Guns 游玩指南</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div><article id="comments" lazyload><div id="giscus" class="giscus"></div><script type="text/javascript">Fluid.utils.loadComments("#giscus",(function(){var t={repo:"4rozeN/4rozeN.github.io","repo-id":"R_kgDOMN8x0A",category:"General","category-id":"DIC_kwDOMN8x0M4CjtvK","theme-light":"light","theme-dark":"dark",mapping:"pathname","reactions-enabled":"1","emit-metadata":"1","input-position":"top",lang:"zh-CN",strict:"warn",theme:"dark",loading:"lazy",crossorigin:"anonymous"},e={};for(let i in t){if(!i.startsWith("theme-"))e[i.startsWith("data-")?i:"data-"+i]=t[i]}window.GiscusThemeLight="light",window.GiscusThemeDark="dark",e["data-theme"]="dark"===document.documentElement.getAttribute("data-user-color-scheme")?"dark":"light";for(let t in e){var i=e[t];null!=i&&""!==i||delete e[t]}var a=document.createElement("script");a.setAttribute("src","https://giscus.app/client.js"),a.setAttribute("crossorigin","anonymous");for(let t in e)a.setAttribute(t,e[t]);var n=document.getElementsByTagName("script"),r=n.length>0?n[n.length-1]:document.head||document.documentElement;r.parentNode.insertBefore(a,r.nextSibling)}))</script><noscript>Please enable JavaScript to view the comments</noscript></article></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="margin-left:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i> <span>目录</span></p><div class="toc-body" id="toc-body"></div></div></aside></div></div></div><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div><div class="col-lg-7 mx-auto nopadding-x-md"><div class="container custom mx-auto"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300..700&family=Noto+Sans+SC:wght@100..900&family=Noto+Serif+SC:wght@200..900&display=swap" rel="stylesheet"></div></div></main><footer><div class="footer-inner"><div class="footer-content"><hr><div class="footer"><a href="https://hexo.io" target="_blank" rel="nofollow noopener" style="color:#98989f">Hexo</a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener" style="color:#98989f">Fluid</a><div class="footer-daysCount"><span id="timeDate">载入天数…</span> <span id="times">载入时分秒…</span><script src="/js/duration.js"></script></div><div class="footer-custom"></div></div></div><div class="statistics"><span id="busuanzi_container_site_pv" style="display:none">总访问量 <span id="busuanzi_value_site_pv"></span> 次 </span><span id="busuanzi_container_site_uv" style="display:none">总访客数 <span id="busuanzi_value_site_uv"></span> 人</span></div></div></footer><script src="https://fastly.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!0,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",(function(){NProgress.done()}))</script><script src="https://fastly.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script><script src="https://fastly.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="https://fastly.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js"></script><script>!function(t,e){var i=Fluid.plugins.typing,n=e.getElementById("subtitle");n&&i&&i(n.getAttribute("data-typed-text"))}(window,document)</script><script src="/js/img-lazyload.js"></script><script>Fluid.utils.createScript("https://fastly.jsdelivr.net/npm/tocbot@4.12.2/dist/tocbot.min.js",(function(){var t=jQuery("#toc");if(0!==t.length&&window.tocbot){var i=jQuery("#board-ctn").offset().top;window.tocbot.init(Object.assign({tocSelector:"#toc-body",contentSelector:".markdown-body",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",scrollSmooth:!0,includeTitleTags:!0,headingsOffset:-i},CONFIG.toc)),t.find(".toc-list-item").length>0&&t.css("visibility","visible"),Fluid.events.registerRefreshCallback((function(){if("tocbot"in window){tocbot.refresh();var t=jQuery("#toc");if(0===t.length||!tocbot)return;t.find(".toc-list-item").length>0&&t.css("visibility","visible")}}))}}))</script><script src="https://fastly.jsdelivr.net/npm/clipboard@2.0.8/dist/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript("https://fastly.jsdelivr.net/npm/anchor-js@4.3.0/anchor.min.js",(function(){window.anchors.options={placement:CONFIG.anchorjs.placement,visible:CONFIG.anchorjs.visible},CONFIG.anchorjs.icon&&(window.anchors.options.icon=CONFIG.anchorjs.icon);var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(window.anchors.options.class="anchorjs-link-left"),window.anchors.add(o.join(", ")),Fluid.events.registerRefreshCallback((function(){if("anchors"in window){anchors.removeAll();var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(anchors.options.class="anchorjs-link-left"),anchors.add(o.join(", "))}}))}))</script><script>Fluid.utils.createScript("https://fastly.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js",(function(){Fluid.plugins.fancyBox()}))</script><script>Fluid.plugins.imageCaption()</script><script src="/js/local-search.js"></script><script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="/js/sign.js"></script><script src="/js/watch.js"></script><script src="/js/boot.js"></script><noscript><div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div></noscript><script src="https://cdn.jsdelivr.net/npm/hexo-shiki-plugin@latest/lib/codeblock.js"></script><script>const CODE_CONFIG={beautify:!0,highlightCopy:!0,highlightLang:!0,highlightHeightLimit:360,isHighlightShrink:!1,copy:{success:"复制成功",error:"复制失败",noSupport:"浏览器不支持复制功能"}};console.log("%c hexo-shiki-plugin %c v1.0.27 %c https://github.com/nova1751/hexo-shiki-plugin","color: #fff; background: #5f5f5f","color: #fff; background: #80c8f8","")</script><script src="/js/backgroundize.js"></script></body></html>