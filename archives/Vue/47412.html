<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>GO-SHOPPING 商城项目笔记 | 4rozeN | 林之介</title><meta name="author" content="4rozeN"><meta name="copyright" content="4rozeN"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="本项目是基于 uni-app 技术栈开发的，能够运行在多端 (微信小程序、h5、ios&#x2F;Android) 的移动端商城项目。   重点：接口需要 token 的地方，header 中， Access-Token:${token}  重点：接口需要 platform 的地方，header 中，platform: h5 或 mp-weixin  接口调用基础地址：http:&#x2F;&#x2F;smart-shop"><meta property="og:type" content="article"><meta property="og:title" content="GO-SHOPPING 商城项目笔记"><meta property="og:url" content="https://4rozen.github.io/archives/Vue/47412.html"><meta property="og:site_name" content="4rozeN | 林之介"><meta property="og:description" content="本项目是基于 uni-app 技术栈开发的，能够运行在多端 (微信小程序、h5、ios&#x2F;Android) 的移动端商城项目。   重点：接口需要 token 的地方，header 中， Access-Token:${token}  重点：接口需要 platform 的地方，header 中，platform: h5 或 mp-weixin  接口调用基础地址：http:&#x2F;&#x2F;smart-shop"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://4rozen.github.io/img/avatar/avatar.jpg"><meta property="article:published_time" content="2023-10-30T15:50:13.000Z"><meta property="article:modified_time" content="2025-05-31T04:32:09.486Z"><meta property="article:author" content="4rozeN"><meta property="article:tag" content="笔记"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://4rozen.github.io/img/avatar/avatar.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "GO-SHOPPING 商城项目笔记",
  "url": "https://4rozen.github.io/archives/Vue/47412.html",
  "image": "https://4rozen.github.io/img/avatar/avatar.jpg",
  "datePublished": "2023-10-30T15:50:13.000Z",
  "dateModified": "2025-05-31T04:32:09.486Z",
  "author": [
    {
      "@type": "Person",
      "name": "4rozeN",
      "url": "https://4rozen.github.io/"
    }
  ]
}</script><link rel="shortcut icon" href="/img/ico/favicon.ico"><link rel="canonical" href="https://4rozen.github.io/archives/Vue/47412.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="google-site-verification" content="ggjgSh07y0_dbMruvoZhis-cgZn-t6ujdG7N1z7ZA88"><meta name="msvalidate.01" content="F0E34077A7291AC38724F6A3804B1B29"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload='this.media="all"'><script>(()=>{const e={set:(e,t,o)=>{if(!o)return;const a=Date.now()+864e5*o;localStorage.setItem(e,JSON.stringify({value:t,expiry:a}))},get:e=>{const t=localStorage.getItem(e);if(!t)return;const{value:o,expiry:a}=JSON.parse(t);if(!(Date.now()>a))return o;localStorage.removeItem(e)}};window.btf={saveToLocal:e,getScript:(e,t={})=>new Promise((o,a)=>{const n=document.createElement("script");n.src=e,n.async=!0,Object.entries(t).forEach(([e,t])=>n.setAttribute(e,t)),n.onload=n.onreadystatechange=()=>{n.readyState&&!/loaded|complete/.test(n.readyState)||o()},n.onerror=a,document.head.appendChild(n)}),getCSS:(e,t)=>new Promise((o,a)=>{const n=document.createElement("link");n.rel="stylesheet",n.href=e,t&&(n.id=t),n.onload=n.onreadystatechange=()=>{n.readyState&&!/loaded|complete/.test(n.readyState)||o()},n.onerror=a,document.head.appendChild(n)}),addGlobalFn:(e,t,o=!1,a=window)=>{if(e.startsWith("pjax"))return;const n=a.globalFn||{};n[e]=n[e]||{},n[e][o||Object.keys(n[e]).length]=t,a.globalFn=n}};const t=()=>{document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},o=()=>{document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};btf.activateDarkMode=t,btf.activateLightMode=o;const a=e.get("theme"),n=(new Date).getHours();void 0===a?n<=6||n>=18?t():o():"light"===a?o():t();const r=e.get("aside-status");void 0!==r&&document.documentElement.classList.toggle("hide-aside","hide"===r);/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})()</script><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:void 0,translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"简"},highlight:void 0,copy:{success:"复制成功",error:"复制失败",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,post:!1},runtime:"",dateSuffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:{limitCount:100,languages:{author:"作者: 4rozeN",link:"链接: ",source:"来源: 4rozeN | 林之介",info:"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},lightbox:"fancybox",Snackbar:{chs_to_cht:"已切换为繁体中文",cht_to_chs:"已切换为简体中文",day_to_night:"已切换为深色模式",night_to_day:"已切换为浅色模式",bgLight:"#49b1f5",bgDark:"#1f1f1f",position:"bottom-left"},infinitegrid:{js:"https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js",buttonText:"加载更多"},isPhotoFigcaption:!1,islazyloadPlugin:!0,isAnchor:!0,percent:{toc:!0,rightside:!1},autoDarkmode:!1}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"GO-SHOPPING 商城项目笔记",isHighlightShrink:!1,isToc:!0,pageType:"post"}</script><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300..700&family=Noto+Sans+SC:wght@100..900&family=Noto+Serif+SC:wght@200..900&display=swap" rel="stylesheet"><link rel="stylesheet" href="/css/figure.css"><link rel="stylesheet" href="/css/butterfly.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-shiki-plugin@latest/lib/codeblock.css"><style>:root{--hl-color:#abb2bf;--hl-bg:#282c34;--hltools-bg:#21252b;--hltools-color:#bbbbbc;--hlnumber-bg:#282c34;--hlnumber-color:#495162;--hlscrollbar-bg:#373c47;--hlexpand-bg:linear-gradient(180deg,rgba(40,44,52,0.1),rgba(40,44,52,0.9))}</style><style>.code-expand-btn:not(.expand-done)~* div.codeblock,.code-expand-btn:not(.expand-done)~div.codeblock{overflow:hidden;height:360px}</style><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/rss2.xml" title="4rozeN | 林之介" type="application/rss+xml">
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>(()=>{const d=document.getElementById("loading-box"),e=document.body,o=()=>{e.style.overflow="",d.classList.add("loaded")},l=()=>{e.style.overflow="hidden",d.classList.remove("loaded")};l(),window.addEventListener("load",o)})()</script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src= "/img/loading/loading.gif" data-lazy-src="/img/avatar/avatar.jpg" onerror='this.onerror=null,this.src="/img/avatar/emo.webp"' alt="avatar"></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">24</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">38</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/rss2.xml"><i class="fa-fw fas fa-rss"></i><span> RSS</span></a></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-user"></i><span> 个人</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(/img/bg/sunset-night.webp)"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src= "/img/loading/loading.gif" data-lazy-src="/img/nav/Nihility.svg" alt="Logo"></a><a class="nav-page-title" href="/"><span class="site-name">GO-SHOPPING 商城项目笔记</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/rss2.xml"><i class="fa-fw fas fa-rss"></i><span> RSS</span></a></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-user"></i><span> 个人</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">GO-SHOPPING 商城项目笔记</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-10-30T15:50:13.000Z" title="发表于 2023-10-30 23:50:13">2023-10-30</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-05-31T04:32:09.486Z" title="更新于 2025-05-31 12:32:09">2025-05-31</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Vue/">Vue笔记</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">20.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>95分钟</span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><div id="post-outdate-notice" data="{&quot;limitDay&quot;:15,&quot;messagePrev&quot;:&quot;文章最后编辑于&quot;,&quot;messageNext&quot;:&quot;天前。&quot;,&quot;postUpdate&quot;:&quot;2025-05-31 12:32:09&quot;}" hidden></div><link rel="stylesheet external nofollow noreferrer" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/hint.css/2.7.0/hint.min.css"><meta name="referrer" content="no-referrer"><blockquote><p>本项目是基于 uni-app 技术栈开发的，能够运行在多端 (微信小程序、h5、ios/Android) 的移动端商城项目。</p></blockquote><ul><li>重点：接口需要 token 的地方，header 中， Access-Token:${token}</li><li>重点：接口需要 platform 的地方，header 中，platform: h5 或 mp-weixin</li><li>接口调用基础地址：<a target="_blank" rel="noopener external nofollow noreferrer" href="http://smart-shop.itheima.net/index.php?s=/api">http://smart-shop.itheima.net/index.php?s=/api</a></li><li>关于接口的说明：分为了 http 状态码和接口中 code 对应码</li></ul><table><thead><tr><th style="text-align:left">码值</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">http 状态码 500</td><td style="text-align:left">服务器端异常</td></tr><tr><td style="text-align:left">http 状态码 404</td><td style="text-align:left">服务器端异常</td></tr><tr><td style="text-align:left">http 状态码 401</td><td style="text-align:left">授权信息不正确</td></tr></tbody></table><blockquote><p>测试环境，登录短信验证码统一为：246810 （不再提供真实的短信验证服务）</p><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://apifox.com/apidoc/shared-12ab6b18-adc2-444c-ad11-0e60f5693f66/doc-2221080">接口文档地址</a></p><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://youzan.github.io/vant/v2/#/zh-CN/">Vant2 官网地址</a></p><p>本项目使用 <code>ESLint+Standard config</code> 的代码规范标准</p></blockquote><h2 id="项目结构"><a class="markdownIt-Anchor" href="#项目结构"></a> 项目结构</h2><meta name="description" content="记录学习过的Vue2商城项目，写法接近uniapp，稍加改造可以成为uniapp项目">## 一级路由配置<p>将每个基础的一级页面以文件夹形式存放于 views 包中。包括：</p><p><img src= "/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202408281710771.png" alt="image-20240828171025686">具体项目结构如下：<br><img src= "/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202408281709022.png" alt="image-20240828170920935" style="zoom:80%"></p><p>路由页如下：<br><img src= "/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202408281711591.png" alt="image-20240828171139419" style="zoom:50%"></p><h2 id="二级路由配置"><a class="markdownIt-Anchor" href="#二级路由配置"></a> 二级路由配置</h2><h3 id="实现底部导航栏tabbar"><a class="markdownIt-Anchor" href="#实现底部导航栏tabbar"></a> 实现底部导航栏 Tabbar</h3><p>配置二级路由之前需要完成底部 Tabbar 栏的设计，可以结合 vant 官网文档进行设计。<a target="_blank" rel="noopener external nofollow noreferrer" href="https://youzan.github.io/vant/v2/">vant2 官网</a><img src= "/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202408281712602.png" alt="image-20240828171252550"></p><h3 id="实现二级路由配置"><a class="markdownIt-Anchor" href="#实现二级路由配置"></a> 实现二级路由配置</h3><p><img src= "/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202408281741912.png" alt="image-20240828174123840"></p><p>在组件中的 vant2 的 Tabbar 要实现路由模式如下：</p><p><img src= "/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202408281744188.png" alt="image-20240828174450143"></p><p>于是有：</p><figure class="shiki vue"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  &lt;router-view&gt;&lt;/router-view&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  &lt;van-tabbar route v-model="active" active-color="#ee0a24" inactive-color="#000"&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    &lt;van-tabbar-item to= "/home" icon="gem-o"&gt;首页&lt;/van-tabbar-item&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    &lt;van-tabbar-item to= "/category" icon="apps-o"&gt;分类页&lt;/van-tabbar-item&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    &lt;van-tabbar-item to= "/cart" icon="shopping-cart-o"&gt;购物车&lt;/van-tabbar-item&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    &lt;van-tabbar-item to= "/user" icon="user-o"&gt;我的&lt;/van-tabbar-item&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  &lt;/van-tabbar&gt;</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span></code></pre></div></div></figure><p>最后优化路由逻辑，将默认匹配的页面重定向到 home</p><p><img src= "/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202408281748077.png" alt="image-20240828174814027"></p><h2 id="登录静态页"><a class="markdownIt-Anchor" href="#登录静态页"></a> 登录静态页</h2><p>新建 <code>styles/common.less</code> 重置默认样式（可以对一些想要多组件生效的样式进行重新调整）</p><figure class="shiki less"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#6a9955">// 重置默认样式</span></span>
<span class="line"><span style="color:#d4d4d4">* {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">margin</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">padding</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">box-sizing</span><span style="color:#d4d4d4">: </span><span style="color:#569cd6">borde-box</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a9955">// 文字溢出省略号</span></span>
<span class="line"><span style="color:#d7ba7d">.text-ellipsis-2</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">overflow</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">hidden</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">-webkit-line-clamp</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">2</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">text-overflow</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">ellipsis</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: -webkit-box;</span></span>
<span class="line"><span style="color:#d4d4d4">   </span><span style="color:#9cdcfe">-webkit-box-orient</span><span style="color:#d4d4d4">:</span><span style="color:#ce9178">vertical</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span></code></pre></div></div></figure><p>导入于 main.js 中：<code>import '@/styles/common.less'</code></p><p>接着准备一些素材图片于 assets<br><img src= "/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202408281759229.png" alt="image-20240828175944181"></p><h3 id="配置头部navbar"><a class="markdownIt-Anchor" href="#配置头部navbar"></a> 配置头部 NavBar</h3><figure class="shiki vue"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#6a9955">&lt;!-- 头部 NavBar --&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-nav-bar</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">title</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"尊敬的用户，请登录"</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">left-arrow</span></span>
<span class="line"><span style="color:#d4d4d4">      @</span><span style="color:#9cdcfe">click-left</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">$router</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">go</span><span style="color:#d4d4d4">(-</span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">)</span><span style="color:#d4d4d4">"</span></span>
<span class="line"><span style="color:#d4d4d4">    /&gt;</span></span></code></pre></div></div></figure><p><code>$router.go(-1)</code> 的作用是返回上一页。</p><p>接着将左边的返回符号 left-arrow 颜色样式改为灰色 #333，于是找到 common.less 进行编写（两个类名增加权重）</p><figure class="shiki less"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#6a9955">// 添加导航的通用样式</span></span>
<span class="line"><span style="color:#d7ba7d">.van-nav-bar</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.van-nav-bar__arrow</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#333</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span></code></pre></div></div></figure><p>这样的好处是，一旦配置好了将来其他页面使用到导航栏此处的返回颜色都是我们此时配好的颜色。这就是通用样式的覆盖。</p><h3 id="完善主体"><a class="markdownIt-Anchor" href="#完善主体"></a> 完善主体</h3><p>接着编写主体的静态结构：</p><figure class="shiki vue"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">template</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"login"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">&lt;!-- 头部 NavBar --&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-nav-bar</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">title</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"尊敬的用户，请登录"</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">left-arrow</span></span>
<span class="line"><span style="color:#d4d4d4">      @</span><span style="color:#9cdcfe">click-left</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">$router</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">go</span><span style="color:#d4d4d4">(-</span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">)</span><span style="color:#d4d4d4">"</span></span>
<span class="line"><span style="color:#d4d4d4">    /</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">&lt;!-- 主体部分 自定义 --&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"container"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"title"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">h3</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">手机号登录</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">h3</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">p</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">未注册的手机号登录后将自动注册</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">p</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"form"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"form-item"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#569cd6">input</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"inp"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">maxlength</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"11"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">placeholder</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"请输入手机号码"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">type</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"text"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"form-item"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#569cd6">input</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"inp"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">maxlength</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"5"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">placeholder</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"请输入图形验证码"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">type</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"text"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#569cd6">img</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">src</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"@/assets/code.png"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">alt</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">""</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"form-item"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#569cd6">input</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"inp"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">placeholder</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"请输入短信验证码"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">type</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"text"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#569cd6">button</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">获取验证码</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">button</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"login-btn"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">登录</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">template</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">script</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">default</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">name:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'LoginIndex'</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">script</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">style</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">lang</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"less"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">scoped</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d7ba7d">.container</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">padding</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">49px</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">29px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.title</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">margin-bottom</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">20px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#d7ba7d">h3</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">26px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">font-weight</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">normal</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#d7ba7d">p</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">line-height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">40px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">14px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#b8b8b8</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.form-item</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">border-bottom</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">1px</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">solid</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">#f3f1f2</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">padding</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">8px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">margin-bottom</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">14px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">align-items</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">center</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#d7ba7d">.inp</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">block</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">border</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">none</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">outline</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">none</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">32px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">14px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">flex</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#d7ba7d">img</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">width</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">94px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">31px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#d7ba7d">button</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">31px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">border</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">none</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">13px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#cea26a</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">background-color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">transparent</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">padding-right</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">9px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.login-btn</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">width</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">100%</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">42px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">margin-top</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">39px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">background</span><span style="color:#d4d4d4">: </span><span style="color:#dcdcaa">linear-gradient</span><span style="color:#d4d4d4">(</span><span style="color:#b5cea8">90deg</span><span style="color:#d4d4d4">,</span><span style="color:#ce9178">#ecb53c</span><span style="color:#d4d4d4">,</span><span style="color:#ce9178">#ff9211</span><span style="color:#d4d4d4">);</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#fff</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">border-radius</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">39px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">box-shadow</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">20px</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">rgba</span><span style="color:#d4d4d4">(</span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">,</span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">,</span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">,</span><span style="color:#b5cea8">.1</span><span style="color:#d4d4d4">);</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">letter-spacing</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">2px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">justify-content</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">center</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">align-items</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">center</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">style</span><span style="color:grey">&gt;</span></span></code></pre></div></div></figure><p>页面效果如下：</p><img src= "/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202408281818338.png" alt="image-20240828181803280" style="zoom:80%"><p>图形验证码暂时写死，短信验证码暂时不作处理</p><h3 id="完善登录逻辑"><a class="markdownIt-Anchor" href="#完善登录逻辑"></a> 完善登录逻辑</h3><p>登录页面一共有三个请求需要发送，图形验证码、短信验证码和登录请求。我们使用 axios 来请求后端接口，一般都会对 axios 进行一些配置（配置基础地址，请求响应拦截器等），于是封装 axios 为一个 request 模块，便于维护。以后使用 axios 都是创建实例去请求，这样多个实例相互独立，互不干扰。</p><ul><li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.axios-http.cn/docs/instance">axios 中文文档</a></li></ul><p>新建 request.js 于 utils 包下，创建一个 axios 实例（cv 中文文档中的实例和拦截器进行改造）：</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#c586c0">import</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">axios</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'axios'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a9955">// 创建axios实例</span></span>
<span class="line"><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">instance</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">axios</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">create</span><span style="color:#d4d4d4">({</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#6a9955">// 查看接口文档改造</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">baseURL:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'http://smart-shop.itheima.net/index.php?s=/api'</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">timeout:</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">5000</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">headers:</span><span style="color:#d4d4d4"> { </span><span style="color:#9cdcfe">platform:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'h5'</span><span style="color:#d4d4d4"> }</span></span>
<span class="line"><span style="color:#d4d4d4">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a9955">// 自定义配置 - 请求/响应 拦截器 （如果希望不污染原本的axios需要将axios改为instance实例）</span></span>
<span class="line"><span style="color:#6a9955">// 添加请求拦截器</span></span>
<span class="line"><span style="color:#9cdcfe">instance</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">interceptors</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">request</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">use</span><span style="color:#d4d4d4">(</span><span style="color:#569cd6">function</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">config</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#6a9955">// 在发送请求之前做些什么</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">config</span></span>
<span class="line"><span style="color:#d4d4d4">}, </span><span style="color:#569cd6">function</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">error</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#6a9955">// 对请求错误做些什么</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#4ec9b0">Promise</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">reject</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">error</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a9955">// 添加响应拦截器</span></span>
<span class="line"><span style="color:#9cdcfe">instance</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">interceptors</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">response</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">use</span><span style="color:#d4d4d4">(</span><span style="color:#569cd6">function</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">response</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#6a9955">// 2xx 范围内的状态码都会触发该函数。</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#6a9955">// 对响应数据做点什么 (默认axios会对响应多包装一层data，所以这里需要取出data)</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">response</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">data</span></span>
<span class="line"><span style="color:#d4d4d4">}, </span><span style="color:#569cd6">function</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">error</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#6a9955">// 超出 2xx 范围的状态码都会触发该函数。</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#6a9955">// 对响应错误做点什么</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#4ec9b0">Promise</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">reject</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">error</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a9955">// 导出配置好的示例</span></span>
<span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">default</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">instance</span></span></code></pre></div></div></figure><p>响应器中，response.data 原本为 response，这里改为上文是因为 axios 默认会对响应多包装一层 data，所以这里需要取出 data</p><p>接着回到登录页面 index.vue 上，导入 request 模块，异步检查一下：</p><figure class="shiki vue"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">script</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#c586c0">import</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">request</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'@/utils/request'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">default</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">name:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'LoginIndex'</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#569cd6">async</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">created</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">res</span><span style="color:#d4d4d4"> = </span><span style="color:#c586c0">await</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">request</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">get</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'/captcha/image'</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">console</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">log</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">res</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">script</span><span style="color:grey">&gt;</span></span></code></pre></div></div></figure><p>调试返回如下</p><p><img src= "/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202408281850640.png" alt="image-20240828185016590"></p><h4 id="解析base64并完善点击刷新图片验证码"><a class="markdownIt-Anchor" href="#解析base64并完善点击刷新图片验证码"></a> 解析 base64 并完善点击刷新图片验证码</h4><p>由于提交的图形验证码必须带 key 才能让后端进行唯一校验，所以在 data 中提供：</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">data</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">picCode:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">''</span><span style="color:#d4d4d4">, </span><span style="color:#6a9955">// 用户输入的图形验证码</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">picKey:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">''</span><span style="color:#d4d4d4">, </span><span style="color:#6a9955">// 图形验证码的key</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">picUrl:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">''</span><span style="color:#d4d4d4"> </span><span style="color:#6a9955">// 存放要渲染的图形验证码的url</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">},</span></span></code></pre></div></div></figure><p>接着进行响应结果的解构，存储好数据以便后续提交后端进行校验</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">async</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">created</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">   </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">getPicCode</span><span style="color:#d4d4d4">()</span></span>
<span class="line"><span style="color:#d4d4d4"> },  </span></span>
<span class="line"><span style="color:#c8c8c8">methods</span><span style="color:#d4d4d4">: {</span></span>
<span class="line"><span style="color:#d4d4d4">   </span><span style="color:#9cdcfe">async</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">getPicCode</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">     </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> { </span><span style="color:#9cdcfe">data</span><span style="color:#d4d4d4">: { </span><span style="color:#4fc1ff">base64</span><span style="color:#d4d4d4">, </span><span style="color:#4fc1ff">Key</span><span style="color:#d4d4d4"> } } = </span><span style="color:#c586c0">await</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">request</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">get</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'/captcha/image'</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">     </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">picUrl</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">base64</span></span>
<span class="line"><span style="color:#d4d4d4">     </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">picKey</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">Key</span></span>
<span class="line"><span style="color:#d4d4d4">   }</span></span>
<span class="line"><span style="color:#d4d4d4"> }</span></span></code></pre></div></div></figure><p>完善 template 相关代码：</p><figure class="shiki vue"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"form-item"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">   &lt;input v-model="picCode" class="inp" maxlength="5" placeholder="请输入图形验证码" type="text"&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">   &lt;img v-if="picUrl" :src="picUrl" @click="getPicCode" alt=""&gt;</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span></code></pre></div></div></figure><p>封装登录请求到 api 包下，新建 login.js</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#6a9955">// 登录相关接口请求</span></span>
<span class="line"><span style="color:#c586c0">import</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">request</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'@/utils/request'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">getPicCode</span><span style="color:#d4d4d4"> = () </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">request</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">get</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'/captcha/image'</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span></code></pre></div></div></figure><p>使用时按需导入。于是到登录页 index.js 中改 <code>import request from '@/utils/request'</code> 为 <code>import { getPicCode } from '@/api/login'</code> 并修改调用语句：</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#c8c8c8">methods</span><span style="color:#d4d4d4">: {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">async</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">getPicCode</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> { </span><span style="color:#9cdcfe">data</span><span style="color:#d4d4d4">: { </span><span style="color:#4fc1ff">base64</span><span style="color:#d4d4d4">, </span><span style="color:#4fc1ff">Key</span><span style="color:#d4d4d4"> } } = </span><span style="color:#c586c0">await</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">getPicCode</span><span style="color:#d4d4d4">()</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">picUrl</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">base64</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">picKey</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">Key</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span></code></pre></div></div></figure><p>上述语句不会因为重名冲突，我们需要知道的是，如果是引入的 getPicCode 前面是不带 this 的，而自身的 getPicCode 是需要在前面加上 this. 的</p><h3 id="toast轻提示"><a class="markdownIt-Anchor" href="#toast轻提示"></a> Toast 轻提示</h3><p>校验手机号是否输入、是否输入格式正确等并给予提示。</p><p>使用 vant 库中的 Toast 轻提示，完成提示显示。需要注意的是他的两种调用方式：</p><ol><li>Toast (' 提示内容 ');</li><li>this.<span class="katex-error" title="ParseError: KaTeX parse error: LaTeX-incompatible input and strict mode is set to 'error': Unicode text character &quot;提&quot; used in math mode [unicodeTextInMathMode] at position 8: toast('提̲示文案');  引入 Toas…">toast (' 提示文案 '); 引入 Toast 组件后，会自动在 Vue 的 prototype 上挂载 `</span>toast` 方法，便于在组件内调用。</li></ol><p>这两种调用，第一种是任意地方都可以调用显示出提示内容，第二种是只有组件内才可以显示提示内容。Toast 默认采用单例模式，即同一时间只会存在一个 Toast，如果需要在同一时间弹出多个 Toast，可以参考下面的示例：</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#9cdcfe">Toast</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">allowMultiple</span><span style="color:#d4d4d4">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">toast1</span><span style="color:#d4d4d4"> = </span><span style="color:#dcdcaa">Toast</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'第一个 Toast'</span><span style="color:#d4d4d4">);</span></span>
<span class="line"><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">toast2</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">Toast</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">success</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'第二个 Toast'</span><span style="color:#d4d4d4">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9cdcfe">toast1</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">clear</span><span style="color:#d4d4d4">();</span></span>
<span class="line"><span style="color:#9cdcfe">toast2</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">clear</span><span style="color:#d4d4d4">();</span></span></code></pre></div></div></figure><h3 id="短信验证倒计时"><a class="markdownIt-Anchor" href="#短信验证倒计时"></a> 短信验证倒计时</h3><p>点击获取验证码之后要开始倒计时，一分钟只能发送一次。给获取短信验证码的按钮注册点击事件并改写显示文字</p><figure class="shiki vue"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"form-item"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">   &lt;input class="inp" placeholder="请输入短信验证码" type="text"&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">   &lt;button @click="getCode"&gt;{{ totalTime === timeNow ? '获取验证码' : `${timeNow}秒后重试` }}&lt;/button&gt;</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span></code></pre></div></div></figure><p>提供短信验证码获取函数 getCode</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#6a9955">// 短信验证码获取</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">async</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">getCode</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 只有当计时器处于未开启状态并且当前时间和总时间一致时说明可以开启倒计时</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#c586c0">if</span><span style="color:#d4d4d4"> (!</span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">timerId</span><span style="color:#d4d4d4"> &amp;&amp; </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">timeNow</span><span style="color:#d4d4d4"> === </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">totalTime</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 开启计时器</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">timerId</span><span style="color:#d4d4d4"> = </span><span style="color:#dcdcaa">setInterval</span><span style="color:#d4d4d4">(() </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">timeNow</span><span style="color:#d4d4d4">--</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#c586c0">if</span><span style="color:#d4d4d4"> (</span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">timeNow</span><span style="color:#d4d4d4"> &lt;= </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#6a9955">// 停止计时器</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#dcdcaa">clearInterval</span><span style="color:#d4d4d4">(</span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">timerId</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">timerId</span><span style="color:#d4d4d4"> = </span><span style="color:#569cd6">null</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">timeNow</span><span style="color:#d4d4d4"> = </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">totalTime</span></span>
<span class="line"><span style="color:#d4d4d4">        }</span></span>
<span class="line"><span style="color:#d4d4d4">      }, </span><span style="color:#b5cea8">1000</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 获取成功给予提示</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#dcdcaa">Toast</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'获取短信验证码成功'</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span></code></pre></div></div></figure><p>并考虑到性能问题，于是增加在用户离开登录页面之后清除定时器的功能，实现在 destroy 生命函数</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">destroyed</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 当用户退出登录页面清除定时器</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">clearInterval</span><span style="color:#d4d4d4">(</span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">timerId</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span></code></pre></div></div></figure><h3 id="手机号和图形验证码类型校验"><a class="markdownIt-Anchor" href="#手机号和图形验证码类型校验"></a> 手机号和图形验证码类型校验</h3><p>由于前端无法校验具体，只能校验数据类型和长度。所以新增两个正则数据和绑定用户输入的手机号：</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#6a9955">// 手机号正则 1开头 3-9为第二位 接着9位数字</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c8c8c8">reg_phone</span><span style="color:#d4d4d4">:</span><span style="color:#d16969"> /</span><span style="color:#dcdcaa">^</span><span style="color:#d16969">1</span><span style="color:#ce9178">[</span><span style="color:#d16969">3-9</span><span style="color:#ce9178">]</span><span style="color:#d16969">\d</span><span style="color:#d7ba7d">{9}</span><span style="color:#dcdcaa">$</span><span style="color:#d16969">/</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c8c8c8">reg_picCode</span><span style="color:#d4d4d4">:</span><span style="color:#d16969"> /</span><span style="color:#dcdcaa">^</span><span style="color:#d16969">\w</span><span style="color:#d7ba7d">{4}</span><span style="color:#dcdcaa">$</span><span style="color:#d16969">/</span><span style="color:#d4d4d4">, </span><span style="color:#6a9955">// 图形正则</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c8c8c8">phoneNum</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">''</span><span style="color:#d4d4d4">, </span><span style="color:#6a9955">// 用户输入的手机号码</span></span></code></pre></div></div></figure><p>增加校验的函数 validFn</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#6a9955">// 校验手机号和图形验证码</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">validFn</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">if</span><span style="color:#d4d4d4"> (!</span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">reg_phone</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">test</span><span style="color:#d4d4d4">(</span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">phoneNum</span><span style="color:#d4d4d4">)) {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#dcdcaa">Toast</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'请输入正确的手机号！'</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">false</span></span>
<span class="line"><span style="color:#d4d4d4">      }</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">if</span><span style="color:#d4d4d4"> (!</span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">reg_picCode</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">test</span><span style="color:#d4d4d4">(</span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">picCode</span><span style="color:#d4d4d4">)) {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#dcdcaa">Toast</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'图形验证码错误！'</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">false</span></span>
<span class="line"><span style="color:#d4d4d4">      }</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">true</span></span>
<span class="line"><span style="color:#d4d4d4">    },</span></span></code></pre></div></div></figure><p>并在短信验证码获取函数 getCode 中加入一行判断</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#6a9955">// 短信验证码获取</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">getCode</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 校验手机号和图形验证码格式</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">if</span><span style="color:#d4d4d4"> (!</span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">validFn</span><span style="color:#d4d4d4">()) { </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> }</span></span>
<span class="line"><span style="color:#d4d4d4">      ...</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span></code></pre></div></div></figure><h3 id="封装发送短信验证码请求"><a class="markdownIt-Anchor" href="#封装发送短信验证码请求"></a> 封装发送短信验证码请求</h3><p>转到 login.js 中进行封装（结合接口文档）</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">getMsgCode</span><span style="color:#d4d4d4"> = (</span><span style="color:#9cdcfe">captchaCode</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">captchaKey</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">mobile</span><span style="color:#d4d4d4">) </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">request</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">post</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'/captcha/sendSmsCaptcha'</span><span style="color:#d4d4d4">, {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">form:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">captchaCode</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">captchaKey</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">mobile</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  })</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span></code></pre></div></div></figure><p>然后在短信验证码获取函数 getCode 中加入调用代码</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#6a9955">// 短信验证码获取</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">async</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">getCode</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 发送获取短信验证码的请求</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">await</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">getMsgCode</span><span style="color:#d4d4d4">(</span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">picCode</span><span style="color:#d4d4d4">, </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">picKey</span><span style="color:#d4d4d4">, </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">phoneNum</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// console.log(res)</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#dcdcaa">Toast</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'短信发送成功，请注意查收'</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">      ...</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span></code></pre></div></div></figure><h3 id="实现登录功能-封装登录接口"><a class="markdownIt-Anchor" href="#实现登录功能-封装登录接口"></a> 实现登录功能 - 封装登录接口</h3><p>封装登录请求</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">codeLogin</span><span style="color:#d4d4d4"> = (</span><span style="color:#9cdcfe">mobile</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">smsCode</span><span style="color:#d4d4d4">) </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">request</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">post</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'/passport/login'</span><span style="color:#d4d4d4">, {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">form:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">isParty:</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">false</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">mobile</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">partyData:</span><span style="color:#d4d4d4"> {},</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">smsCode</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  })</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span></code></pre></div></div></figure><p>绑定登录按钮事件为 login，绑定用户输入的短信验证码为 smsCode（默认短信为 246810）</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#6a9955">// 登录功能</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">async</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">login</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 校验手机号和图形验证码格式</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">if</span><span style="color:#d4d4d4"> (!</span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">validFn</span><span style="color:#d4d4d4">()) { </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> }</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 校验输入的短信验证码格式</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">if</span><span style="color:#d4d4d4"> (!</span><span style="color:#d16969">/</span><span style="color:#dcdcaa">^</span><span style="color:#d16969">\d</span><span style="color:#d7ba7d">{6}</span><span style="color:#dcdcaa">$</span><span style="color:#d16969">/</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">test</span><span style="color:#d4d4d4">(</span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">smsCode</span><span style="color:#d4d4d4">)) {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#dcdcaa">Toast</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'请输入正确的短信验证码！'</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#c586c0">return</span></span>
<span class="line"><span style="color:#d4d4d4">      }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">res</span><span style="color:#d4d4d4"> = </span><span style="color:#c586c0">await</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">codeLogin</span><span style="color:#d4d4d4">(</span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">phoneNum</span><span style="color:#d4d4d4">, </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">smsCode</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">if</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">res</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">status</span><span style="color:#d4d4d4"> === </span><span style="color:#b5cea8">200</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#dcdcaa">Toast</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'登录成功'</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">$router</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">push</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'/home'</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">      } </span><span style="color:#c586c0">else</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#dcdcaa">Toast</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'登录失败，请检查手机号和验证码是否正确'</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">      }</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span></code></pre></div></div></figure><p>后面失败的多种情况可以通过响应拦截器进行处理，在这里暂时只考虑成功的情况</p><h2 id="响应处理器统一处理错误提示"><a class="markdownIt-Anchor" href="#响应处理器统一处理错误提示"></a> 响应处理器统一处理错误提示</h2><p>对 utils 包下的 request 拦截器进行修改</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#6a9955">// 响应拦截器</span></span>
<span class="line"><span style="color:#9cdcfe">instance</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">interceptors</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">response</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">use</span><span style="color:#d4d4d4">(</span><span style="color:#569cd6">function</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">response</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#6a9955">// 2xx 范围内的状态码都会触发该函数。</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#6a9955">// 对响应数据做点什么 (默认axios会对响应多包装一层data，所以这里需要取出data)</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">res</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">response</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">data</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#c586c0">if</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">res</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">status</span><span style="color:#d4d4d4"> !== </span><span style="color:#b5cea8">200</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">Toast</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">res</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">message</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#4ec9b0">Promise</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">reject</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">res</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">message</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">res</span></span>
<span class="line"><span style="color:#d4d4d4">}, </span><span style="color:#569cd6">function</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">error</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#6a9955">// 超出 2xx 范围的状态码都会触发该函数。</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#6a9955">// 对响应错误做点什么</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#c586c0">if</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">error</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">response</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 服务器返回了错误响应</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">Toast</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">`服务器错误: </span><span style="color:#569cd6">${</span><span style="color:#9cdcfe">error</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">response</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">data</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">status</span><span style="color:#569cd6">}</span><span style="color:#ce9178">`</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">  } </span><span style="color:#c586c0">else</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">if</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">error</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">request</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 请求已发出，但没有收到响应</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">Toast</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'请求超时或网络错误'</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">  } </span><span style="color:#c586c0">else</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 其他错误</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">Toast</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'请求配置错误'</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#4ec9b0">Promise</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">reject</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">error</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">})</span></span></code></pre></div></div></figure><h2 id="登录权证信息存储"><a class="markdownIt-Anchor" href="#登录权证信息存储"></a> 登录权证信息存储</h2><p><img src= "/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202408291344002.png" alt="image-20240829134402875"></p><p>使用 vuex 构建 user 模块存储登录权证（token 和 userID）。好处是易获取、响应式，分模块便于管理维护。</p><p>在 store 包下新建 modules 包，然后在 modules 包下新建 user.js</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">default</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">namespaced:</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">true</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#dcdcaa">state</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 个人权证</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">userInfo:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">token:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">''</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">userId:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">''</span></span>
<span class="line"><span style="color:#d4d4d4">      }</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">mutations:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">setUserInfo</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">obj</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">userInfo</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">obj</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">actions:</span><span style="color:#d4d4d4"> {},</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">getters:</span><span style="color:#d4d4d4"> {}</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span></code></pre></div></div></figure><p>然后在 vuex 中进行挂载</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#c586c0">import</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">User</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'@/store/modules/user'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#c8c8c8">modules</span><span style="color:#d4d4d4">: {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">User</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span></code></pre></div></div></figure><p>并在登录页面将要实现跳转到首页的前一刻完成用户权证信息的存储</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">$store</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">commit</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'User/setUserInfo'</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">res</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">data</span><span style="color:#d4d4d4">)</span></span></code></pre></div></div></figure><p><img src= "/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202408291411700.png" alt="image-20240829141130620"></p><h2 id="vuex持久化处理"><a class="markdownIt-Anchor" href="#vuex持久化处理"></a> vuex 持久化处理</h2><p>vuex 刷新就会丢失信息，于是引入持久化存储。我们将获取、设置和移除信息的操作封装为 storage 模块。</p><p>在 utils 包下新建一个 storage.js</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#6a9955">// 约定一个通用键名</span></span>
<span class="line"><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">INFO_KEY</span><span style="color:#d4d4d4"> = </span><span style="color:#ce9178">'go_shopping_info'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">getInfo</span><span style="color:#d4d4d4"> = () </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">defaultInfo</span><span style="color:#d4d4d4"> = {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">token:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">''</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">userId:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">''</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">info</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">localStorage</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">getItem</span><span style="color:#d4d4d4">(</span><span style="color:#4fc1ff">INFO_KEY</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#6a9955">// 判断info是否有值</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">info</span><span style="color:#d4d4d4"> ? </span><span style="color:#4fc1ff">JSON</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">parse</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">info</span><span style="color:#d4d4d4">) : </span><span style="color:#9cdcfe">defaultInfo</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">setInfo</span><span style="color:#d4d4d4"> = (</span><span style="color:#9cdcfe">obj</span><span style="color:#d4d4d4">) </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">localStorage</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">setItem</span><span style="color:#d4d4d4">(</span><span style="color:#4fc1ff">INFO_KEY</span><span style="color:#d4d4d4">, </span><span style="color:#4fc1ff">JSON</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">stringify</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">obj</span><span style="color:#d4d4d4">))</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">removeInfo</span><span style="color:#d4d4d4"> = () </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">localStorage</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">removeItem</span><span style="color:#d4d4d4">(</span><span style="color:#4fc1ff">INFO_KEY</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span></code></pre></div></div></figure><p>然后到 vuex 的 user 子模块中进行导入使用即可</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#c586c0">import</span><span style="color:#d4d4d4"> { </span><span style="color:#9cdcfe">getInfo</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">setInfo</span><span style="color:#d4d4d4"> } </span><span style="color:#c586c0">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'@/utils/storage'</span></span></code></pre></div></div></figure><p><img src= "/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202408291432317.png" alt="image-20240829143212223"></p><h2 id="添加请求loading效果"><a class="markdownIt-Anchor" href="#添加请求loading效果"></a> 添加请求 Loading 效果</h2><p>需求分析：有时候因为网络原因，一次请求的结果可能需要一段时间后才能回来。此时，需要给用户添加 loading 提示。</p><p>添加 loading 提示的好处：</p><ol><li><strong>节流处理</strong>：防止用户在一次请求还没回来之前，多次进行点击，发送无效请求</li><li><strong>友好提示</strong>：告知用户，目前是在加载中，请耐心等待，用户体验会更好</li></ol><p>加在哪呢？可以统一加在拦截器中，这样一来后面也可以复用：</p><ol><li><strong>请求拦截器</strong>中，每次请求，打开 loading</li><li><strong>响应拦截器</strong>中，每次响应，关闭 loading</li></ol><p>转到 utils 包下的 request 拦截器，在请求的时候显示 Toast 提示，并设置背景不可点击且使其不会定时消失，只能由我们清除。</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#9cdcfe">instance</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">interceptors</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">request</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">use</span><span style="color:#d4d4d4">(</span><span style="color:#569cd6">function</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">config</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#6a9955">// 在发送请求之前做些什么</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#6a9955">// 发送请求时显示Toast提示，背景不可点击</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">Toast</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">loading</span><span style="color:#d4d4d4">({</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">message:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'加载中...'</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">forbidClick:</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">true</span><span style="color:#d4d4d4">, </span><span style="color:#6a9955">// 禁止背景点击</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">duration:</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4"> </span><span style="color:#6a9955">// 值为0时，toast不会自动关闭</span></span>
<span class="line"><span style="color:#d4d4d4">  })</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">config</span></span>
<span class="line"><span style="color:#d4d4d4">}, </span><span style="color:#569cd6">function</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">error</span><span style="color:#d4d4d4">) {...})</span></span></code></pre></div></div></figure><p>在响应拦截器添加清除提示的代码</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#6a9955">// 对响应数据做点什么 (默认axios会对响应多包装一层data，所以这里需要取出data)</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">res</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">response</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">data</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#c586c0">if</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">res</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">status</span><span style="color:#d4d4d4"> !== </span><span style="color:#b5cea8">200</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">Toast</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">res</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">message</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#4ec9b0">Promise</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">reject</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">res</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">message</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">  } </span><span style="color:#c586c0">else</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 关闭Toast提示</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">Toast</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">clear</span><span style="color:#d4d4d4">()</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">res</span></span></code></pre></div></div></figure><h2 id="全局路由前置守卫"><a class="markdownIt-Anchor" href="#全局路由前置守卫"></a> 全局路由前置守卫</h2><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://router.vuejs.org/zh/guide/">Vue-router 官网地址</a></p><p><img src= "/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202408291814256.png" alt="image-20240829181413117"><br>在 router 中编写：</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#c586c0">import</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">store</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'@/store'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a9955">// 定义数组存储需要登录才能访问的路由</span></span>
<span class="line"><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">authNeedRouters</span><span style="color:#d4d4d4"> = [</span><span style="color:#ce9178">'/myorder'</span><span style="color:#d4d4d4">, </span><span style="color:#ce9178">'/pay'</span><span style="color:#d4d4d4">, </span><span style="color:#ce9178">'/productdetail/:id'</span><span style="color:#d4d4d4">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a9955">// 创建全局路由前置守卫</span></span>
<span class="line"><span style="color:#9cdcfe">router</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">beforeEach</span><span style="color:#d4d4d4">((</span><span style="color:#9cdcfe">to</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">from</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">next</span><span style="color:#d4d4d4">) </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#6a9955">// 判断to的path是否存在登录的路由数组中</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#c586c0">if</span><span style="color:#d4d4d4"> (!</span><span style="color:#9cdcfe">authNeedRouters</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">includes</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">to</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">path</span><span style="color:#d4d4d4">)) {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 不需要登录，直接进入</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">next</span><span style="color:#d4d4d4">()</span></span>
<span class="line"><span style="color:#d4d4d4">  } </span><span style="color:#c586c0">else</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 判断是否有token（实际上需要调用后端接口校验token）</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">token</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">store</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">User</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">userInfo</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">token</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#c586c0">if</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">token</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 有token，可以进入</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#dcdcaa">next</span><span style="color:#d4d4d4">()</span></span>
<span class="line"><span style="color:#d4d4d4">    } </span><span style="color:#c586c0">else</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 没有token，跳转到登录页</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#dcdcaa">next</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'/login'</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">})</span></span></code></pre></div></div></figure><h2 id="首页"><a class="markdownIt-Anchor" href="#首页"></a> 首页</h2><h3 id="完成首页静态结构"><a class="markdownIt-Anchor" href="#完成首页静态结构"></a> 完成首页静态结构</h3><p>要用到的 vant 组件有</p><ul><li>search（搜索框）</li><li>swipe &amp; swipe-item （轮播图）</li><li>grid &amp; grid-item （宫格）</li></ul><p>grid 宫格主要是使用自定义列数的：<br><img src= "/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202408291915006.png" alt="image-20240829191508887" style="zoom:50%"></p><p>所以在 utils 包下的 vant2-ui.js 中进行添加：</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#6a9955">// vant2-ui.js按需导入组件</span></span>
<span class="line"><span style="color:#c586c0">import</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">Vue</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'vue'</span></span>
<span class="line"><span style="color:#c586c0">import</span><span style="color:#d4d4d4"> { </span><span style="color:#9cdcfe">Button</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">Tabbar</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">TabbarItem</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">NavBar</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">Toast</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">Search</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">Swipe</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">SwipeItem</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">Grid</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">GridItem</span><span style="color:#d4d4d4"> } </span><span style="color:#c586c0">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'vant'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9cdcfe">Vue</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">use</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">Tabbar</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#9cdcfe">Vue</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">use</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">TabbarItem</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#9cdcfe">Vue</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">use</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">Button</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#9cdcfe">Vue</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">use</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">NavBar</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#9cdcfe">Vue</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">use</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">Toast</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#9cdcfe">Vue</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">use</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">Search</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#9cdcfe">Vue</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">use</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">Swipe</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#9cdcfe">Vue</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">use</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">SwipeItem</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#9cdcfe">Vue</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">use</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">Grid</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#9cdcfe">Vue</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">use</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">GridItem</span><span style="color:#d4d4d4">)</span></span></code></pre></div></div></figure><p>静态结构和样式 <code>layout/home.vue</code></p><figure class="shiki vue"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">template</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"home"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">&lt;!-- 导航条 --&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-nav-bar</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">title</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"智慧商城"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">fixed</span><span style="color:#d4d4d4"> /</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">&lt;!-- 搜索框 --&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-search</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">readonly</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">shape</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"round"</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">background</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"#f1f1f2"</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">placeholder</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"请在此输入搜索关键词"</span></span>
<span class="line"><span style="color:#d4d4d4">      @</span><span style="color:#9cdcfe">click</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">$router</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">push</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'/search'</span><span style="color:#d4d4d4">)</span><span style="color:#d4d4d4">"</span></span>
<span class="line"><span style="color:#d4d4d4">    /</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">&lt;!-- 轮播图 --&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-swipe</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"my-swipe"</span><span style="color:#d4d4d4"> :</span><span style="color:#9cdcfe">autoplay</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#b5cea8">3000</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">indicator-color</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"white"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-swipe-item</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">img</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">src</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"@/assets/banner1.jpg"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">alt</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">""</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">van-swipe-item</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-swipe-item</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">img</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">src</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"@/assets/banner2.jpg"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">alt</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">""</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">van-swipe-item</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-swipe-item</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">img</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">src</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"@/assets/banner3.jpg"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">alt</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">""</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">van-swipe-item</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">van-swipe</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">&lt;!-- 导航 --&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-grid</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">column-num</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"5"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">icon-size</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"40"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-grid-item</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#c586c0">v-for</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">in</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">10</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> :</span><span style="color:#9cdcfe">key</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">"</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">icon</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"http://cba.itlike.com/public/uploads/10001/20230320/58a7c1f62df4cb1eb47fe83ff0e566e6.png"</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">text</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"新品首发"</span></span>
<span class="line"><span style="color:#d4d4d4">        @</span><span style="color:#9cdcfe">click</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">$router</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">push</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'/category'</span><span style="color:#d4d4d4">)</span><span style="color:#d4d4d4">"</span></span>
<span class="line"><span style="color:#d4d4d4">      /</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">van-grid</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">&lt;!-- 主会场 --&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"main"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">img</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">src</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"@/assets/main.png"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">alt</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">""</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">&lt;!-- 猜你喜欢 --&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"guess"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">p</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"guess-title"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">—— 猜你喜欢 ——</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">p</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"goods-list"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#4ec9b0">GoodsItem</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">v-for</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">in</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">10</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> :</span><span style="color:#9cdcfe">key</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">"</span><span style="color:grey">&gt;&lt;/</span><span style="color:#4ec9b0">GoodsItem</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">template</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">script</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#c586c0">import</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">GoodsItem</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'@/components/GoodsItem.vue'</span></span>
<span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">default</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">name:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'HomePage'</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">components:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">GoodsItem</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">script</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">style</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">lang</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"less"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">scoped</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#6a9955">// 主题 padding</span></span>
<span class="line"><span style="color:#d7ba7d">.home</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">padding-top</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">100px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">padding-bottom</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">50px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a9955">// 导航条样式定制</span></span>
<span class="line"><span style="color:#d7ba7d">.van-nav-bar</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">z-index</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">999</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">background-color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#c21401</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  ::</span><span style="color:#569cd6">v-deep</span><span style="color:#d4d4d4"> </span><span style="color:#d7ba7d">.van-nav-bar__title</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#fff</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a9955">// 搜索框样式定制</span></span>
<span class="line"><span style="color:#d7ba7d">.van-search</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">position</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">fixed</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">width</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">100%</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">top</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">46px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">z-index</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">999</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a9955">// 分类导航部分</span></span>
<span class="line"><span style="color:#d7ba7d">.my-swipe</span><span style="color:#d4d4d4"> </span><span style="color:#d7ba7d">.van-swipe-item</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">185px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#fff</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">20px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">text-align</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">center</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">background-color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#39a9ed</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"><span style="color:#d7ba7d">.my-swipe</span><span style="color:#d4d4d4"> </span><span style="color:#d7ba7d">.van-swipe-item</span><span style="color:#d4d4d4"> </span><span style="color:#d7ba7d">img</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">width</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">100%</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">185px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a9955">// 主会场</span></span>
<span class="line"><span style="color:#d7ba7d">.main</span><span style="color:#d4d4d4"> </span><span style="color:#d7ba7d">img</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">block</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">width</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">100%</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a9955">// 猜你喜欢</span></span>
<span class="line"><span style="color:#d7ba7d">.guess</span><span style="color:#d4d4d4"> </span><span style="color:#d7ba7d">.guess-title</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">40px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">line-height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">40px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">text-align</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">center</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a9955">// 商品样式</span></span>
<span class="line"><span style="color:#d7ba7d">.goods-list</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">background-color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#f6f6f6</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">style</span><span style="color:grey">&gt;</span></span></code></pre></div></div></figure><p>其中将商品项封装成组件 GoodsItem.vue 在 components 包下：</p><figure class="shiki vue"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">template</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"goods-item"</span><span style="color:#d4d4d4"> @</span><span style="color:#9cdcfe">click</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">$router</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">push</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'/prodetail'</span><span style="color:#d4d4d4">)</span><span style="color:#d4d4d4">"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"left"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">img</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">src</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"@/assets/product.jpg"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">alt</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">""</span><span style="color:#d4d4d4"> /</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"right"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">p</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"tit text-ellipsis-2"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        三星手机 SAMSUNG Galaxy S23 8GB+256GB 超视觉夜拍系统 超清夜景 悠雾紫</span></span>
<span class="line"><span style="color:#d4d4d4">        5G手机 游戏拍照旗舰机s23</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">p</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">p</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"count"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">已售104件</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">p</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">p</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"price"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"new"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">¥3999.00</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"old"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">¥6699.00</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">p</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">template</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">script</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">default</span><span style="color:#d4d4d4"> {}</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">script</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">style</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">lang</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"less"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">scoped</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d7ba7d">.goods-item</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">148px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">margin-bottom</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">6px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">padding</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">background-color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#fff</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.left</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">width</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">127px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#d7ba7d">img</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">block</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">width</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">100%</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.right</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">flex</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">14px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">line-height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">1.3</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">padding</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">flex-direction</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">column</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">justify-content</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">space-evenly</span><span style="color:#d4d4d4">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#d7ba7d">.count</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#999</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">12px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#d7ba7d">.price</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#999</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">16px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#d7ba7d">.new</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#f03c3c</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">margin-right</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      }</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#d7ba7d">.old</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">text-decoration</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">line-through</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">12px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      }</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">style</span><span style="color:grey">&gt;</span></span></code></pre></div></div></figure><h3 id="首页-动态渲染"><a class="markdownIt-Anchor" href="#首页-动态渲染"></a> 首页 - 动态渲染</h3><p>根据接口文档封装请求首页数据模块于 api 包下，新建 home.js：</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#c586c0">import</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">request</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'@/utils/request'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a9955">// 获取首页数据</span></span>
<span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">getHomeData</span><span style="color:#d4d4d4"> = () </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">request</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'/page/detail'</span><span style="color:#d4d4d4">, {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">params:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">pageId:</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">0</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  })</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span></code></pre></div></div></figure><p>接着转到 layout 的 home.vue 处理动态渲染：</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#c586c0">import</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">GoodsItem</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'@/components/GoodsItem.vue'</span></span>
<span class="line"><span style="color:#c586c0">import</span><span style="color:#d4d4d4"> { </span><span style="color:#9cdcfe">getHomeData</span><span style="color:#d4d4d4"> } </span><span style="color:#c586c0">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'@/api/home'</span></span>
<span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">default</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">name:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'HomePage'</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">components:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">GoodsItem</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#dcdcaa">data</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">bannerList:</span><span style="color:#d4d4d4"> [],</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">navList:</span><span style="color:#d4d4d4"> [],</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">prodsList:</span><span style="color:#d4d4d4"> []</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#569cd6">async</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">created</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> { </span><span style="color:#9cdcfe">data</span><span style="color:#d4d4d4">: { </span><span style="color:#4fc1ff">pageData</span><span style="color:#d4d4d4"> } } = </span><span style="color:#c586c0">await</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">getHomeData</span><span style="color:#d4d4d4">()</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">console</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">log</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">pageData</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">bannerList</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">pageData</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">items</span><span style="color:#d4d4d4">[</span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">].</span><span style="color:#9cdcfe">data</span><span style="color:#d4d4d4"> </span><span style="color:#6a9955">// 获取轮播图数据</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">navList</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">pageData</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">items</span><span style="color:#d4d4d4">[</span><span style="color:#b5cea8">3</span><span style="color:#d4d4d4">].</span><span style="color:#9cdcfe">data</span><span style="color:#d4d4d4"> </span><span style="color:#6a9955">// 获取导航组数据</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">prodsList</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">pageData</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">items</span><span style="color:#d4d4d4">[</span><span style="color:#b5cea8">6</span><span style="color:#d4d4d4">].</span><span style="color:#9cdcfe">data</span><span style="color:#d4d4d4"> </span><span style="color:#6a9955">// 获取商品组数据</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span></code></pre></div></div></figure><p>改造 template 中轮播图和导航部分：</p><figure class="shiki vue"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#6a9955">&lt;!-- 轮播图 --&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-swipe</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"my-swipe"</span><span style="color:#d4d4d4"> :</span><span style="color:#9cdcfe">autoplay</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#b5cea8">3000</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">indicator-color</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"white"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    &lt;van-swipe-item v-for="item in bannerList" :key="item.imgUrl"&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      &lt;img :src="item.imgUrl" alt=""&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    &lt;/van-swipe-item&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">van-swipe</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#6a9955">&lt;!-- 导航 --&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-grid</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">column-num</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"5"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">icon-size</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"40"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    &lt;van-grid-item</span></span>
<span class="line"><span style="color:#d4d4d4">      v-for="item in navList" :key="item.imgUrl"</span></span>
<span class="line"><span style="color:#d4d4d4">      :icon="item.imgUrl"</span></span>
<span class="line"><span style="color:#d4d4d4">      :text="item.text"</span></span>
<span class="line"><span style="color:#d4d4d4">      @click="$router.push('/category')"</span></span>
<span class="line"><span style="color:#d4d4d4">    /&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">van-grid</span><span style="color:grey">&gt;</span></span></code></pre></div></div></figure><p>接着改造商品组：</p><figure class="shiki vue"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#6a9955">&lt;!-- 猜你喜欢 --&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"guess"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      &lt;p class="guess-title"&gt;—— 猜你喜欢 ——&lt;/p&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      &lt;div class="goods-list"&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        &lt;GoodsItem v-for="item in prodsList" :key="item.goods_id" :goods="item"&gt;&lt;/GoodsItem&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#d4d4d4">/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span></code></pre></div></div></figure><p>父传子将 item 整个对象传给 GoodsItem 进行接收：</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">default</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">name:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'GoodsItem'</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">props:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">goods:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">type:</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">Object</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#dcdcaa">default</span><span style="color:#9cdcfe">:</span><span style="color:#d4d4d4"> () </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> {}</span></span>
<span class="line"><span style="color:#d4d4d4">      }</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#dcdcaa">data</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span></code></pre></div></div></figure><p>然后改造 template</p><figure class="shiki vue"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"goods-item"</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">v-if</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">goods</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goods_id</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> @</span><span style="color:#9cdcfe">click</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">$router</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">push</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">`/prodetail/</span><span style="color:#569cd6">${</span><span style="color:#9cdcfe">goods</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goods_id</span><span style="color:#569cd6">}</span><span style="color:#ce9178">`</span><span style="color:#d4d4d4">)</span><span style="color:#d4d4d4">"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    &lt;div class="left"&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      &lt;img :src="goods.goods_image" alt="" /&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"right"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      &lt;p class="tit text-ellipsis-2"&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        {{ goods.goods_name }}</span></span>
<span class="line"><span style="color:#d4d4d4">      &lt;/p&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      &lt;p class="count"&gt;{{goods.goods_sales}}&lt;/p&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      &lt;p class="price"&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        &lt;span class="new"&gt;{{goods.goods_price_min}}&lt;/span&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        &lt;span class="old"&gt;{{goods.goods_price_max}}&lt;/span&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      &lt;/p&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span></code></pre></div></div></figure><p>注意将商品 id 携带进行跳转时要动态取值使用反引号。</p><h2 id="搜索"><a class="markdownIt-Anchor" href="#搜索"></a> 搜索</h2><p>页面设计：</p><p><img src= "/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202408292021783.png" alt="image-20230621144449700"></p><h3 id="搜索页静态结构"><a class="markdownIt-Anchor" href="#搜索页静态结构"></a> 搜索页静态结构</h3><p><code>view/search/index.vue</code>（需要导入 vant 组件 Icon）</p><figure class="shiki vue"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">template</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"search"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-nav-bar</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">title</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"商品搜索"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">left-arrow</span><span style="color:#d4d4d4"> @</span><span style="color:#9cdcfe">click-left</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">$router</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">go</span><span style="color:#d4d4d4">(-</span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">)</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> /</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-search</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">show-action</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">placeholder</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"请输入搜索关键词"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">clearable</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">template</span><span style="color:#d4d4d4"> #</span><span style="color:#9cdcfe">action</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">搜索</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">template</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">van-search</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">&lt;!-- 搜索历史 --&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"search-history"</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">v-if</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">historyList</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">length</span><span style="color:#d4d4d4"> &gt; </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> </span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"title"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">最近搜索</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-icon</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">name</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"delete-o"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">size</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"16"</span><span style="color:#d4d4d4"> /</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"list"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"list-item"</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">v-for</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">in</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">historyList</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> :</span><span style="color:#9cdcfe">key</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> @</span><span style="color:#9cdcfe">click</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">$router</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">push</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'/searchlist'</span><span style="color:#d4d4d4">)</span><span style="color:#d4d4d4">"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">{{ </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4"> }}</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">template</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">script</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">default</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">name:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'SearchIndex'</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#dcdcaa">data</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">historyList:</span><span style="color:#d4d4d4"> [</span><span style="color:#ce9178">'炒锅'</span><span style="color:#d4d4d4">, </span><span style="color:#ce9178">'电视'</span><span style="color:#d4d4d4">, </span><span style="color:#ce9178">'冰箱'</span><span style="color:#d4d4d4">, </span><span style="color:#ce9178">'手机'</span><span style="color:#d4d4d4">, </span><span style="color:#ce9178">'自行车'</span><span style="color:#d4d4d4">]</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">script</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">style</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">lang</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"less"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">scoped</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d7ba7d">.search</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.searchBtn</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">background-color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#fa2209</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#fff</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">  ::</span><span style="color:#569cd6">v-deep</span><span style="color:#d4d4d4"> </span><span style="color:#d7ba7d">.van-search__action</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">background-color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#c21401</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#fff</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">padding</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">20px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">border-radius</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">5px</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">5px</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">margin-right</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">  ::</span><span style="color:#569cd6">v-deep</span><span style="color:#d4d4d4"> </span><span style="color:#d7ba7d">.van-icon-arrow-left</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#333</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.title</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">40px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">line-height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">40px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">14px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">justify-content</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">space-between</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">align-items</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">center</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">padding</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">15px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.list</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">justify-content</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex-start</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">flex-wrap</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">wrap</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">padding</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">gap</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">5%</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.list-item</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">width</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">25%</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">text-align</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">center</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">padding</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">7px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">line-height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">15px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">border-radius</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">50px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">background</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#fff</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">13px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">border</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">1px</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">solid</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">#efefef</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">overflow</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">hidden</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">white-space</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">nowrap</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">text-overflow</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">ellipsis</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">margin-bottom</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">style</span><span style="color:grey">&gt;</span></span></code></pre></div></div></figure><h3 id="历史记录管理"><a class="markdownIt-Anchor" href="#历史记录管理"></a> 历史记录管理</h3><p>目标：构建搜索页的静态布局，完成历史记录的管理<br>需求分析：</p><ol><li>搜索历史基本渲染</li><li>点击搜索 (添加历史)</li></ol><p>添加历史说明：</p><p>点击搜索按钮或底下历史记录，都能进行搜索</p><ol><li>若之前没有相同搜索关键字，则直接追加到最前面</li><li>若之前已有相同搜索关键字，将该原有关键字移除，再追加（相当于置顶）</li></ol><figure class="shiki vue"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">template</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"search"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-nav-bar</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">title</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"商品搜索"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">left-arrow</span><span style="color:#d4d4d4"> @</span><span style="color:#9cdcfe">click-left</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">$router</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">go</span><span style="color:#d4d4d4">(-</span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">)</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> /</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-search</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">v-model</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">search</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> @</span><span style="color:#9cdcfe">search</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#dcdcaa">goSearch</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">search</span><span style="color:#d4d4d4">)</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">show-action</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">placeholder</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"请输入搜索关键词"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">clearable</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">template</span><span style="color:#d4d4d4"> #</span><span style="color:#9cdcfe">action</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> @</span><span style="color:#9cdcfe">click</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#dcdcaa">goSearch</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">search</span><span style="color:#d4d4d4">)</span><span style="color:#d4d4d4">"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">搜索</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">template</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">van-search</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">&lt;!-- 搜索历史 --&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"search-history"</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">v-if</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">historyList</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">length</span><span style="color:#d4d4d4"> &gt; </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> </span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"title"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">最近搜索</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-icon</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">name</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"delete-o"</span><span style="color:#d4d4d4"> @</span><span style="color:#9cdcfe">click</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">clearHistory</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">size</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"16"</span><span style="color:#d4d4d4"> /</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"list"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"list-item"</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">v-for</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">in</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">historyList</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> :</span><span style="color:#9cdcfe">key</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> @</span><span style="color:#9cdcfe">click</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#dcdcaa">goSearch</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">)</span><span style="color:#d4d4d4">"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">{{ </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4"> }}</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">template</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">script</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#c586c0">import</span><span style="color:#d4d4d4"> { </span><span style="color:#9cdcfe">getHistory</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">setHistory</span><span style="color:#d4d4d4"> } </span><span style="color:#c586c0">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'@/utils/storage'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">default</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">name:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'SearchIndex'</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#dcdcaa">data</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">search:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">''</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">historyList:</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">getHistory</span><span style="color:#d4d4d4">()</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">methods:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">goSearch</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">searchContent</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 判断输入的搜索词是否已经在historyList中</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">index</span><span style="color:#d4d4d4"> = </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">historyList</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">indexOf</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">searchContent</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">if</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">index</span><span style="color:#d4d4d4"> !== -</span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#6a9955">// 说明存在，则将其进行删除</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">historyList</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">splice</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">index</span><span style="color:#d4d4d4">, </span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">) </span><span style="color:#6a9955">// splice语法：splice(index, howMany, item1, ....., itemX)</span></span>
<span class="line"><span style="color:#d4d4d4">      }</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 将搜索词添加到historyList的最前面</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">historyList</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">unshift</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">searchContent</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#dcdcaa">setHistory</span><span style="color:#d4d4d4">(</span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">historyList</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 跳转到搜索列表页面</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">$router</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">push</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">`/searchlist?search=</span><span style="color:#569cd6">${</span><span style="color:#9cdcfe">searchContent</span><span style="color:#569cd6">}</span><span style="color:#ce9178">`</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">    },</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">clearHistory</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">historyList</span><span style="color:#d4d4d4"> = []</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#dcdcaa">setHistory</span><span style="color:#d4d4d4">([])</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">script</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">...</span></span></code></pre></div></div></figure><p>持久化存储代码：</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">HISTORY_KEY</span><span style="color:#d4d4d4"> = </span><span style="color:#ce9178">'shopping_history_info'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a9955">// 获取搜索历史</span></span>
<span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">getHistory</span><span style="color:#d4d4d4"> = () </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">history</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">localStorage</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">getItem</span><span style="color:#d4d4d4">(</span><span style="color:#4fc1ff">HISTORY_KEY</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">history</span><span style="color:#d4d4d4"> ? </span><span style="color:#4fc1ff">JSON</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">parse</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">history</span><span style="color:#d4d4d4">) : []</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"><span style="color:#6a9955">// 设置搜索历史</span></span>
<span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">setHistory</span><span style="color:#d4d4d4"> = (</span><span style="color:#9cdcfe">arr</span><span style="color:#d4d4d4">) </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">localStorage</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">setItem</span><span style="color:#d4d4d4">(</span><span style="color:#4fc1ff">HISTORY_KEY</span><span style="color:#d4d4d4">, </span><span style="color:#4fc1ff">JSON</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">stringify</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">arr</span><span style="color:#d4d4d4">))</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span></code></pre></div></div></figure><h3 id="搜索列表页"><a class="markdownIt-Anchor" href="#搜索列表页"></a> 搜索列表页</h3><h4 id="静态布局"><a class="markdownIt-Anchor" href="#静态布局"></a> 静态布局</h4><figure class="shiki vue"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">template</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"search"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-nav-bar</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">fixed</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">title</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"商品列表"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">left-arrow</span><span style="color:#d4d4d4"> @</span><span style="color:#9cdcfe">click-left</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">$router</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">go</span><span style="color:#d4d4d4">(-</span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">)</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> /</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-search</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">readonly</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">shape</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"round"</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">background</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"#ffffff"</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">value</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"手机"</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">show-action</span></span>
<span class="line"><span style="color:#d4d4d4">      @</span><span style="color:#9cdcfe">click</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">$router</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">push</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'/search'</span><span style="color:#d4d4d4">)</span><span style="color:#d4d4d4">"</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">template</span><span style="color:#d4d4d4"> #</span><span style="color:#9cdcfe">action</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-icon</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"tool"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">name</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"apps-o"</span><span style="color:#d4d4d4"> /</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">template</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">van-search</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">&lt;!-- 排序选项按钮 --&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"sort-btns"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"sort-item"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">综合</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"sort-item"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">销量</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"sort-item"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">价格 </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"goods-list"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#4ec9b0">GoodsItem</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">v-for</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">in</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">10</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> :</span><span style="color:#9cdcfe">key</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">"</span><span style="color:grey">&gt;&lt;/</span><span style="color:#4ec9b0">GoodsItem</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">template</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">script</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#c586c0">import</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">GoodsItem</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'@/components/GoodsItem.vue'</span></span>
<span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">default</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">name:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'SearchIndex'</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">components:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">GoodsItem</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">script</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">style</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">lang</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"less"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">scoped</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d7ba7d">.search</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">padding-top</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">46px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  ::</span><span style="color:#569cd6">v-deep</span><span style="color:#d4d4d4"> </span><span style="color:#d7ba7d">.van-icon-arrow-left</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#333</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.tool</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">24px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">40px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">line-height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">40px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.sort-btns</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">36px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">line-height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">36px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#d7ba7d">.sort-item</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">text-align</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">center</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">flex</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">16px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a9955">// 商品样式</span></span>
<span class="line"><span style="color:#d7ba7d">.goods-list</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">background-color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#f6f6f6</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">style</span><span style="color:grey">&gt;</span></span></code></pre></div></div></figure><h4 id="渲染"><a class="markdownIt-Anchor" href="#渲染"></a> 渲染</h4><p>封装请求获取商品列表 <code>api/product.js</code></p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#c586c0">import</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">request</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'../utils/request'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">getProducts</span><span style="color:#d4d4d4"> = (</span><span style="color:#9cdcfe">obj</span><span style="color:#d4d4d4">) </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> { </span><span style="color:#4fc1ff">sortType</span><span style="color:#d4d4d4">, </span><span style="color:#4fc1ff">sortPrice</span><span style="color:#d4d4d4">, </span><span style="color:#4fc1ff">categoryId</span><span style="color:#d4d4d4">, </span><span style="color:#4fc1ff">goodsName</span><span style="color:#d4d4d4">, </span><span style="color:#4fc1ff">page</span><span style="color:#d4d4d4"> } = </span><span style="color:#9cdcfe">obj</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">request</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">get</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'/goods/list'</span><span style="color:#d4d4d4">, {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">params:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// all-按综合搜索(默认)，sales-按销量，price-按价格</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">sortType</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 0-价格从低到高，1-价格从高到低</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">sortPrice</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 分类id，示例值：0</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">categoryId</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 商品名称，示例值：酒</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">goodsName</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 页码，示例值：1</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">page</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  })</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span></code></pre></div></div></figure><p>基于搜索词进行渲染</p><figure class="shiki vue"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">template</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"search"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-nav-bar</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">fixed</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">title</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"商品列表"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">left-arrow</span><span style="color:#d4d4d4"> @</span><span style="color:#9cdcfe">click-left</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">$router</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">go</span><span style="color:#d4d4d4">(-</span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">)</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> /</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-search</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">readonly</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">shape</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"round"</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">background</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"#ffffff"</span></span>
<span class="line"><span style="color:#d4d4d4">      :</span><span style="color:#9cdcfe">value</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">queryParam</span><span style="color:#d4d4d4">"</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">show-action</span></span>
<span class="line"><span style="color:#d4d4d4">      @</span><span style="color:#9cdcfe">click</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">$router</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">push</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'/search'</span><span style="color:#d4d4d4">)</span><span style="color:#d4d4d4">"</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">template</span><span style="color:#d4d4d4"> #</span><span style="color:#9cdcfe">action</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-icon</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"tool"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">name</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"apps-o"</span><span style="color:#d4d4d4"> /</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">template</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">van-search</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">&lt;!-- 排序选项按钮 --&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"sort-btns"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"sort-item"</span></span>
<span class="line"><span style="color:#d4d4d4">      :</span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4">{ </span><span style="color:#c8c8c8">active</span><span style="color:#d4d4d4">: </span><span style="color:#9cdcfe">currentSortType</span><span style="color:#d4d4d4"> === </span><span style="color:#ce9178">'all'</span><span style="color:#d4d4d4"> }</span><span style="color:#d4d4d4">"</span></span>
<span class="line"><span style="color:#d4d4d4">      @</span><span style="color:#9cdcfe">click</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#dcdcaa">sortGoods</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'all'</span><span style="color:#d4d4d4">)</span><span style="color:#d4d4d4">"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">综合</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"sort-item"</span></span>
<span class="line"><span style="color:#d4d4d4">      :</span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4">{ </span><span style="color:#c8c8c8">active</span><span style="color:#d4d4d4">: </span><span style="color:#9cdcfe">currentSortType</span><span style="color:#d4d4d4"> === </span><span style="color:#ce9178">'sales'</span><span style="color:#d4d4d4"> }</span><span style="color:#d4d4d4">"</span></span>
<span class="line"><span style="color:#d4d4d4">      @</span><span style="color:#9cdcfe">click</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#dcdcaa">sortGoods</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'sales'</span><span style="color:#d4d4d4">)</span><span style="color:#d4d4d4">"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">销量</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"sort-item"</span></span>
<span class="line"><span style="color:#d4d4d4">      :</span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4">{ </span><span style="color:#c8c8c8">active</span><span style="color:#d4d4d4">: </span><span style="color:#9cdcfe">currentSortType</span><span style="color:#d4d4d4"> === </span><span style="color:#ce9178">'price'</span><span style="color:#d4d4d4"> }</span><span style="color:#d4d4d4">"</span></span>
<span class="line"><span style="color:#d4d4d4">      @</span><span style="color:#9cdcfe">click</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#dcdcaa">sortGoods</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'price'</span><span style="color:#d4d4d4">)</span><span style="color:#d4d4d4">"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">价格</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"goods-list"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#4ec9b0">GoodsItem</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">v-for</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">in</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">productList</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> :</span><span style="color:#9cdcfe">key</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goods_id</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> :</span><span style="color:#9cdcfe">goods</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">"</span><span style="color:grey">&gt;&lt;/</span><span style="color:#4ec9b0">GoodsItem</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">template</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">script</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#c586c0">import</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">GoodsItem</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'@/components/GoodsItem.vue'</span></span>
<span class="line"><span style="color:#c586c0">import</span><span style="color:#d4d4d4"> { </span><span style="color:#9cdcfe">getProducts</span><span style="color:#d4d4d4"> } </span><span style="color:#c586c0">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'@/api/product'</span></span>
<span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">default</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">name:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'SearchIndex'</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">components:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">GoodsItem</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">computed:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 从router的query中拿到查询参数</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">queryParam</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// console.log(this.$route.query.search)</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 如果查询参数不存在就返回一个空字符串</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">$route</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">query</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">search</span><span style="color:#d4d4d4"> || </span><span style="color:#ce9178">''</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#569cd6">async</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">created</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 获取商品列表数据</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">res</span><span style="color:#d4d4d4"> = </span><span style="color:#c586c0">await</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">getProducts</span><span style="color:#d4d4d4">({</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">goodsName:</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">queryParam</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// page: this.page</span></span>
<span class="line"><span style="color:#d4d4d4">    })</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">productList</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">res</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">data</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">list</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">data</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">console</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">log</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">res</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">data</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">list</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#dcdcaa">data</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">currentSortType:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'all'</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">productList:</span><span style="color:#d4d4d4"> [],</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">page:</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">1</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">methods:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 排序商品</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">async</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">sortGoods</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">sortType</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// console.log(sortType)</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">currentSortType</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">sortType</span><span style="color:#d4d4d4"> </span><span style="color:#6a9955">// 更新当前选中的排序类型</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">res</span><span style="color:#d4d4d4"> = </span><span style="color:#c586c0">await</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">getProducts</span><span style="color:#d4d4d4">({</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">goodsName:</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">queryParam</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">sortType:</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">sortType</span></span>
<span class="line"><span style="color:#d4d4d4">      })</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">productList</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">res</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">data</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">list</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">data</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">script</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">style</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">lang</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"less"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">scoped</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d7ba7d">.search</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">padding-top</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">46px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  ::</span><span style="color:#569cd6">v-deep</span><span style="color:#d4d4d4"> </span><span style="color:#d7ba7d">.van-icon-arrow-left</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#333</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.tool</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">24px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">40px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">line-height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">40px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.sort-btns</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">36px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">line-height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">36px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#d7ba7d">.sort-item</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">text-align</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">center</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">flex</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">16px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#d7ba7d">.active</span><span style="color:#d4d4d4"> { </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#ee0a24</span><span style="color:#d4d4d4"> }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a9955">// 商品样式</span></span>
<span class="line"><span style="color:#d7ba7d">.goods-list</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">background-color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#f6f6f6</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">style</span><span style="color:grey">&gt;</span></span></code></pre></div></div></figure><h4 id="基于分类页面的分类id进行渲染"><a class="markdownIt-Anchor" href="#基于分类页面的分类id进行渲染"></a> 基于分类页面的分类 id 进行渲染</h4><p>封装请求分类页数据 <code>api/category.js</code></p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#c586c0">import</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">request</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'@/utils/request'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a9955">// 获取分类页数据</span></span>
<span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">getCategoryData</span><span style="color:#d4d4d4"> = () </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">request</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">get</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'/category/list'</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span></code></pre></div></div></figure><p>完成分类页静态结构</p><figure class="shiki vue"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">template</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"category"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">&lt;!-- 分类 --&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-nav-bar</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">title</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"全部分类"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">fixed</span><span style="color:#d4d4d4"> /</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">&lt;!-- 搜索框 --&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-search</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">readonly</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">shape</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"round"</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">background</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"#f1f1f2"</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">placeholder</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"请输入搜索关键词"</span></span>
<span class="line"><span style="color:#d4d4d4">      @</span><span style="color:#9cdcfe">click</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">$router</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">push</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'/search'</span><span style="color:#d4d4d4">)</span><span style="color:#d4d4d4">"</span></span>
<span class="line"><span style="color:#d4d4d4">    /</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">&lt;!-- 分类列表 --&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"list-box"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"left"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-sidebar</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">v-model</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">activeKey</span><span style="color:#d4d4d4">"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-sidebar-item</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">v-for</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">index</span><span style="color:#d4d4d4">) </span><span style="color:#569cd6">in</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">list</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> :</span><span style="color:#9cdcfe">key</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">category_id</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> :</span><span style="color:#9cdcfe">title</span><span style="color:#d4d4d4">=</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">name</span><span style="color:#d4d4d4"> :</span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4">{ </span><span style="color:#c8c8c8">active</span><span style="color:#d4d4d4">: </span><span style="color:#9cdcfe">index</span><span style="color:#d4d4d4"> === </span><span style="color:#9cdcfe">activeKey</span><span style="color:#d4d4d4"> }</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> @</span><span style="color:#9cdcfe">click</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">activeKey</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">index</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">href</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"javascript:;"</span><span style="color:#d4d4d4">/</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">van-sidebar</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"right"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> @</span><span style="color:#9cdcfe">click</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">$router</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">push</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">`/searchlist?categoryId=</span><span style="color:#569cd6">${</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">category_id</span><span style="color:#569cd6">}</span><span style="color:#ce9178">`</span><span style="color:#d4d4d4">)</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">v-for</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">in</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">list</span><span style="color:#d4d4d4">[</span><span style="color:#9cdcfe">activeKey</span><span style="color:#d4d4d4">]?.</span><span style="color:#9cdcfe">children</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> :</span><span style="color:#9cdcfe">key</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">category_id</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"cate-goods"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#569cd6">img</span><span style="color:#d4d4d4"> :</span><span style="color:#9cdcfe">src</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">image</span><span style="color:#d4d4d4">?.</span><span style="color:#9cdcfe">external_url</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">alt</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">""</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#569cd6">p</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">{{ </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">name</span><span style="color:#d4d4d4"> }}</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">p</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">template</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">script</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#c586c0">import</span><span style="color:#d4d4d4"> { </span><span style="color:#9cdcfe">getCategoryData</span><span style="color:#d4d4d4"> } </span><span style="color:#c586c0">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'@/api/category'</span></span>
<span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">default</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">name:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'CategoryPage'</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#dcdcaa">created</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">getCategoryList</span><span style="color:#d4d4d4">()</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#dcdcaa">data</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">activeKey:</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">list:</span><span style="color:#d4d4d4"> [],</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">activeIndex:</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">0</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">methods:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">async</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">getCategoryList</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> { </span><span style="color:#9cdcfe">data</span><span style="color:#d4d4d4">: { </span><span style="color:#4fc1ff">list</span><span style="color:#d4d4d4"> } } = </span><span style="color:#c586c0">await</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">getCategoryData</span><span style="color:#d4d4d4">()</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">list</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">list</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// console.log(this.list)</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">script</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">style</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">lang</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"less"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">scoped</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#6a9955">// 主题 padding</span></span>
<span class="line"><span style="color:#d7ba7d">.category</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">padding-top</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">100px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">padding-bottom</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">50px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">100vh</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.list-box</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">100%</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#d7ba7d">.left</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">width</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">85px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">100%</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">background-color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#f3f3f3</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">overflow</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">auto</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">van-sidebar-item</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">block</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">45px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">line-height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">45px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">text-align</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">center</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#444444</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">12px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#d7ba7d">&amp;.active</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#fb442f</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">background-color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#fff</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">        }</span></span>
<span class="line"><span style="color:#d4d4d4">      }</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#d7ba7d">.right</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">flex</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">100%</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">background-color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#ffffff</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">flex-wrap</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">wrap</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">justify-content</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex-start</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">align-content</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex-start</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">padding</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">overflow</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">auto</span><span style="color:#d4d4d4">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#d7ba7d">.cate-goods</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">width</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">33.3%</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">margin-bottom</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#d7ba7d">img</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">width</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">70px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">70px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">block</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">margin</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">5px</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">auto</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">        }</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#d7ba7d">p</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">text-align</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">center</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">12px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">        }</span></span>
<span class="line"><span style="color:#d4d4d4">      }</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a9955">// 导航条样式定制</span></span>
<span class="line"><span style="color:#d7ba7d">.van-nav-bar</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">z-index</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">999</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a9955">// 搜索框样式定制</span></span>
<span class="line"><span style="color:#d7ba7d">.van-search</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">position</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">fixed</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">width</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">100%</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">top</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">46px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">z-index</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">999</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">style</span><span style="color:grey">&gt;</span></span></code></pre></div></div></figure><p>修改搜索页列表的查询参数</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">script</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">import GoodsItem from '@/components/GoodsItem.vue'</span></span>
<span class="line"><span style="color:#d4d4d4">import </span><span style="color:#569cd6">{</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">getProducts</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">}</span><span style="color:#d4d4d4"> from '@/api/product'</span></span>
<span class="line"><span style="color:#d4d4d4">export default </span><span style="color:#569cd6">{</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">name</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">'SearchIndex'</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">components</span><span style="color:#d4d4d4">: {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">GoodsItem</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">computed</span><span style="color:#d4d4d4">: {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 从router的query中拿到查询参数</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">querySearch</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// console.log(this.$route.query.search)</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 如果查询参数不存在就返回一个空字符串</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">$route</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">query</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">search</span><span style="color:#d4d4d4"> || </span><span style="color:#ce9178">''</span></span>
<span class="line"><span style="color:#d4d4d4">    },</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">queryCategory</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">$route</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">query</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">categoryId</span><span style="color:#d4d4d4"> || </span><span style="color:#ce9178">''</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">async</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">created</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 获取商品列表数据</span></span>
<span class="line"><span style="color:#d4d4d4">    const </span><span style="color:#9cdcfe">res</span><span style="color:#d4d4d4"> = </span><span style="color:#c586c0">await</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">getProducts</span><span style="color:#d4d4d4">({</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">categoryId:</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">queryCategory</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">goodsName:</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">querySearch</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// page: this.page</span></span>
<span class="line"><span style="color:#d4d4d4">    })</span></span>
<span class="line"><span style="color:#d4d4d4">    this.</span><span style="color:#9cdcfe">productList</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">res</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">data</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">list</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">data</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// console.log(res.data.list)</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// console.log(this.querySearch)</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#dcdcaa">data</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">    return {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c8c8c8">currentSortType</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">'all'</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c8c8c8">productList</span><span style="color:#d4d4d4">: [],</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c8c8c8">page</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">1</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">methods</span><span style="color:#d4d4d4">: {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 排序商品</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">async</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">sortGoods</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">sortType</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// console.log(sortType)</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">currentSortType</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">sortType</span><span style="color:#d4d4d4"> </span><span style="color:#6a9955">// 更新当前选中的排序类型</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">res</span><span style="color:#d4d4d4"> = </span><span style="color:#c586c0">await</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">getProducts</span><span style="color:#d4d4d4">({</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">categoryId:</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">queryCategory</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">goodsName:</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">querySearch</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">sortType:</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">sortType</span></span>
<span class="line"><span style="color:#d4d4d4">      })</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">productList</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">res</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">data</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">list</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">data</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#569cd6">}</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">script</span><span style="color:grey">&gt;</span></span></code></pre></div></div></figure><h2 id="商品详情页"><a class="markdownIt-Anchor" href="#商品详情页"></a> 商品详情页</h2><h3 id="静态结构"><a class="markdownIt-Anchor" href="#静态结构"></a> 静态结构</h3><figure class="shiki vue"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">template</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"prodetail"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-nav-bar</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">fixed</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">title</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"商品详情页"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">left-arrow</span><span style="color:#d4d4d4"> @</span><span style="color:#9cdcfe">click-left</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">$router</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">go</span><span style="color:#d4d4d4">(-</span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">)</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> /</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-swipe</span><span style="color:#d4d4d4"> :</span><span style="color:#9cdcfe">autoplay</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#b5cea8">3000</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> @</span><span style="color:#9cdcfe">change</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">onChange</span><span style="color:#d4d4d4">"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-swipe-item</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">v-for</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">image</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">index</span><span style="color:#d4d4d4">) </span><span style="color:#569cd6">in</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">images</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> :</span><span style="color:#9cdcfe">key</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">index</span><span style="color:#d4d4d4">"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">img</span><span style="color:#d4d4d4"> :</span><span style="color:#9cdcfe">src</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">image</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> /</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">van-swipe-item</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">template</span><span style="color:#d4d4d4"> #</span><span style="color:#9cdcfe">indicator</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"custom-indicator"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">{{ </span><span style="color:#9cdcfe">current</span><span style="color:#d4d4d4"> + </span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4"> }} / {{ </span><span style="color:#9cdcfe">images</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">length</span><span style="color:#d4d4d4"> }}</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">template</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">van-swipe</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">&lt;!-- 商品说明 --&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"info"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"title"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"price"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"now"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">￥0.01</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"oldprice"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">￥6699.00</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"sellcount"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">已售1001件</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"msg text-ellipsis-2"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        三星手机 SAMSUNG Galaxy S23 8GB+256GB 超视觉夜拍系统 超清夜景 悠雾紫 5G手机 游戏拍照旗舰机s23</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"service"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"left-words"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;&lt;</span><span style="color:#569cd6">van-icon</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">name</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"passed"</span><span style="color:#d4d4d4"> /</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">七天无理由退货</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;&lt;</span><span style="color:#569cd6">van-icon</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">name</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"passed"</span><span style="color:#d4d4d4"> /</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">48小时发货</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"right-icon"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-icon</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">name</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"arrow"</span><span style="color:#d4d4d4"> /</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">&lt;!-- 商品评价 --&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"comment"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"comment-title"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"left"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">商品评价 (5条)</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"right"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">查看更多 </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-icon</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">name</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"arrow"</span><span style="color:#d4d4d4"> /</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4"> </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"comment-list"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"comment-item"</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">v-for</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">in</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">3</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> :</span><span style="color:#9cdcfe">key</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"top"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:grey">&lt;</span><span style="color:#569cd6">img</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">src</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"http://cba.itlike.com/public/uploads/10001/20230321/a0db9adb2e666a65bc8dd133fbed7834.png"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">alt</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">""</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"name"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">神雕大侠</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-rate</span><span style="color:#d4d4d4"> :</span><span style="color:#9cdcfe">size</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#b5cea8">16</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> :</span><span style="color:#9cdcfe">value</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#b5cea8">5</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"#ffd21e"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">void-icon</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"star"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">void-color</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"#eee"</span><span style="color:#d4d4d4">/</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"content"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">            质量很不错 挺喜欢的</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"time"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">            2023-03-21 15:01:35</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">&lt;!-- 商品描述 --&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"desc"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">img</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">src</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"https://uimgproxy.suning.cn/uimg1/sop/commodity/kHgx21fZMWwqirkMhawkAw.jpg"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">alt</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">""</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">img</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">src</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"https://uimgproxy.suning.cn/uimg1/sop/commodity/0rRMmncfF0kGjuK5cvLolg.jpg"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">alt</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">""</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">img</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">src</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"https://uimgproxy.suning.cn/uimg1/sop/commodity/2P04A4Jn0HKxbKYSHc17kw.jpg"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">alt</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">""</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">img</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">src</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"https://uimgproxy.suning.cn/uimg1/sop/commodity/MT4k-mPd0veQXWPPO5yTIw.jpg"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">alt</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">""</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">&lt;!-- 底部 --&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"footer"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"icon-home"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-icon</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">name</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"wap-home-o"</span><span style="color:#d4d4d4"> /</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">首页</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"icon-cart"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-icon</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">name</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"shopping-cart-o"</span><span style="color:#d4d4d4"> /</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">购物车</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"btn-add"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">加入购物车</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"btn-buy"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">立刻购买</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">template</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">script</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">default</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">name:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'ProDetail'</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#dcdcaa">data</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">images:</span><span style="color:#d4d4d4"> [</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#ce9178">'https://img01.yzcdn.cn/vant/apple-1.jpg'</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#ce9178">'https://img01.yzcdn.cn/vant/apple-2.jpg'</span></span>
<span class="line"><span style="color:#d4d4d4">      ],</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">current:</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">0</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">methods:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">onChange</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">index</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">current</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">index</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">script</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">style</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">lang</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"less"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">scoped</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d7ba7d">.prodetail</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">padding-top</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">46px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  ::</span><span style="color:#569cd6">v-deep</span><span style="color:#d4d4d4"> </span><span style="color:#d7ba7d">.van-icon-arrow-left</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#333</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">img</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">block</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">width</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">100%</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.custom-indicator</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">position</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">absolute</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">right</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">bottom</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">padding</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">5px</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">12px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">background</span><span style="color:#d4d4d4">: </span><span style="color:#dcdcaa">rgba</span><span style="color:#d4d4d4">(</span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">, </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">, </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">, </span><span style="color:#b5cea8">0.1</span><span style="color:#d4d4d4">);</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">border-radius</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">15px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.desc</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">width</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">100%</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">overflow</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">scroll</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    ::</span><span style="color:#569cd6">v-deep</span><span style="color:#d4d4d4"> </span><span style="color:#d7ba7d">img</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">block</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">width</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">100%</span><span style="color:#569cd6">!important</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.info</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">padding</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.title</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">justify-content</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">space-between</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#d7ba7d">.now</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#fa2209</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">20px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#d7ba7d">.oldprice</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#959595</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">16px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">text-decoration</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">line-through</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">margin-left</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">5px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#d7ba7d">.sellcount</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#959595</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">16px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">position</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">relative</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">top</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">4px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.msg</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">16px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">line-height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">24px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">margin-top</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">5px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.service</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">justify-content</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">space-between</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">line-height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">40px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">margin-top</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">16px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">background-color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#fafafa</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#d7ba7d">.left-words</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#d7ba7d">span</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">margin-right</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      }</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#d7ba7d">.van-icon</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">margin-right</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">4px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#fa2209</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      }</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.comment</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">padding</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.comment-title</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">justify-content</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">space-between</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#d7ba7d">.right</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#959595</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.comment-item</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">16px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">line-height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">30px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#d7ba7d">.top</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">30px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">align-items</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">center</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">margin-top</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">20px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#d7ba7d">img</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">width</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">20px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">20px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      }</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#d7ba7d">.name</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">margin</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      }</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#d7ba7d">.time</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#999</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.footer</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">position</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">fixed</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">left</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">bottom</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">width</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">100%</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">55px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">background-color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#fff</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">border-top</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">1px</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">solid</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">#ccc</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">justify-content</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">space-evenly</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">align-items</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">center</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#d7ba7d">.icon-home</span><span style="color:#d4d4d4">, </span><span style="color:#d7ba7d">.icon-cart</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">flex-direction</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">column</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">align-items</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">center</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">justify-content</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">center</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">14px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#d7ba7d">.van-icon</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">24px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      }</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#d7ba7d">.btn-add</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#d7ba7d">.btn-buy</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">36px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">line-height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">36px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">width</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">120px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">border-radius</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">18px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">background-color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#ffa900</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">text-align</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">center</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#fff</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">14px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#d7ba7d">.btn-buy</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">background-color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#fe5630</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"><span style="color:#d4d4d4">    </span></span>
<span class="line"><span style="color:#d7ba7d">.tips</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">padding</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">style</span><span style="color:grey">&gt;</span></span></code></pre></div></div></figure><p>封装获取商品详情的请求模块 <code>api/goodsDetail.js</code></p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#c586c0">import</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">request</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'@/utils/request'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a9955">// 获取商品详情</span></span>
<span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">getGoodsDetail</span><span style="color:#d4d4d4"> = (</span><span style="color:#9cdcfe">goodsId</span><span style="color:#d4d4d4">) </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">request</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">get</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'/goods/detail'</span><span style="color:#d4d4d4">, {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">params:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">goodsId</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  })</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span></code></pre></div></div></figure><p>获取的一个示例：</p><p><img src= "/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202408301539204.png" alt="image-20240830153951035"></p><p>于是进行动态渲染</p><h3 id="商品说明动态渲染"><a class="markdownIt-Anchor" href="#商品说明动态渲染"></a> 商品说明动态渲染</h3><p>改造 template 中对图片的渲染：</p><figure class="shiki vue"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">van-swipe-item</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">v-for</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">image</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">index</span><span style="color:#d4d4d4">) </span><span style="color:#569cd6">in</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">images</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> :</span><span style="color:#9cdcfe">key</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">index</span><span style="color:#d4d4d4">"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">     &lt;img :src="image.external_url" /&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">   </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">van-swipe-item</span><span style="color:grey">&gt;</span></span></code></pre></div></div></figure><p>script 部分如下：</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">script</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">import </span><span style="color:#569cd6">{</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">getGoodsDetail</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">}</span><span style="color:#d4d4d4"> from '@/api/goodsDetail'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">export default </span><span style="color:#569cd6">{</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">name</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">'ProDetail'</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">computed</span><span style="color:#d4d4d4">: {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">detailId</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">$route</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">params</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">id</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">async</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">created</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">    const </span><span style="color:#9cdcfe">goodsId</span><span style="color:#d4d4d4"> = </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">detailId</span></span>
<span class="line"><span style="color:#d4d4d4">    const </span><span style="color:#9cdcfe">res</span><span style="color:#d4d4d4"> = </span><span style="color:#c586c0">await</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">getGoodsDetail</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">goodsId</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// console.log(res)</span></span>
<span class="line"><span style="color:#d4d4d4">    this.</span><span style="color:#9cdcfe">goodsObj</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">res</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">data</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">detail</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// console.log(this.goodsObj)</span></span>
<span class="line"><span style="color:#d4d4d4">    this.</span><span style="color:#9cdcfe">images</span><span style="color:#d4d4d4"> = </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goodsObj</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goods_images</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#dcdcaa">data</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">    return {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c8c8c8">goodsObj</span><span style="color:#d4d4d4">: {},</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c8c8c8">images</span><span style="color:#d4d4d4">: [],</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c8c8c8">current</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">0</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">methods</span><span style="color:#d4d4d4">: {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">onChange</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">index</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">current</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">index</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#569cd6">}</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">script</span><span style="color:grey">&gt;</span></span></code></pre></div></div></figure><p>修改商品说明进行动态渲染：</p><figure class="shiki vue"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#6a9955">&lt;!-- 商品说明 --&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"info"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      &lt;div class="title"&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        &lt;div class="price"&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          &lt;span class="now"&gt;￥{{ goodsObj.goods_price_min }}&lt;/span&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          &lt;span class="oldprice"&gt;￥{{ goodsObj.goods_price_max }}&lt;/span&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"sellcount"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">已售{{ goodsObj.goods_sales }}件</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#d4d4d4">/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      &lt;div class="msg text-ellipsis-2"&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        {{ goodsObj.goods_name }}</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span></code></pre></div></div></figure><p>到这里还没有完成评论区的动态渲染</p><h3 id="商品评论区渲染"><a class="markdownIt-Anchor" href="#商品评论区渲染"></a> 商品评论区渲染</h3><p>封装请求获取商品评价详情的模块 <code>api/goodsDetail.js</code></p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#6a9955">// 获取商品评价详情</span></span>
<span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">getGoodsCommentDetail</span><span style="color:#d4d4d4"> = (</span><span style="color:#9cdcfe">obj</span><span style="color:#d4d4d4">) </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> { </span><span style="color:#4fc1ff">scoreType</span><span style="color:#d4d4d4">, </span><span style="color:#4fc1ff">goodsId</span><span style="color:#d4d4d4">, </span><span style="color:#4fc1ff">page</span><span style="color:#d4d4d4"> } = </span><span style="color:#9cdcfe">obj</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">request</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">get</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'/comment/list'</span><span style="color:#d4d4d4">, {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">params:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">scoreType</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">goodsId</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">page</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  })</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span></code></pre></div></div></figure><p>请求解构：<br><img src= "/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202408301611303.png" alt="image-20240830161142137"></p><p>完成商品评价渲染（默认只展示三条评价）</p><figure class="shiki vue"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#6a9955">&lt;!-- 商品评价 --&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"comment"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      &lt;div class="comment-title"&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        &lt;div class="left"&gt;商品评价 ({{ goodsCommentArray.length }}条)</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"right"</span><span style="color:#d4d4d4"> @</span><span style="color:#9cdcfe">click</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">$router</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">push</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">`/productComment?id=</span><span style="color:#569cd6">${</span><span style="color:#9cdcfe">detailId</span><span style="color:#569cd6">}</span><span style="color:#ce9178">`</span><span style="color:#d4d4d4">)</span><span style="color:#d4d4d4">"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">查看更多 &lt;van-icon name="arrow" /&gt; </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#d4d4d4">/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      &lt;div class="comment-list"&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        &lt;div class="comment-item" v-for="(item, index) in goodsCommentArray" :key="item.comment_id"&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          &lt;div class="top" v-if="index &lt; 3"&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">            &lt;img :src="item.user.avatar_url ? item.user.avatar_url : defaultAvatar" alt=""&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">            &lt;div class="name"&gt;{{item.user.nick_name}}</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-rate</span><span style="color:#d4d4d4"> :</span><span style="color:#9cdcfe">size</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#b5cea8">16</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> :</span><span style="color:#9cdcfe">value</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">score</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"#ffd21e"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">void-icon</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"star"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">void-color</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"#eee"</span><span style="color:grey">/&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#d4d4d4">/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          &lt;div class="content" v-if="index &lt; 3"&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">            {{item.content}}</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"time"</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">v-if</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">index</span><span style="color:#d4d4d4"> &lt; </span><span style="color:#b5cea8">3</span><span style="color:#d4d4d4">"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">            {{item.create_time}}</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#d4d4d4">/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#d4d4d4">/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span></code></pre></div></div></figure><p>在生命周期钩子 created 中：</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#9cdcfe">async</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">created</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 获取商品详情-说明部分</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">goodsId</span><span style="color:#d4d4d4"> = </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">detailId</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">res</span><span style="color:#d4d4d4"> = </span><span style="color:#c586c0">await</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">getGoodsDetail</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">goodsId</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// console.log(res)</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goodsDetailObj</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">res</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">data</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">detail</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">images</span><span style="color:#d4d4d4"> = </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goodsDetailObj</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goods_images</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 获取商品详情-评价部分</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">commentRes</span><span style="color:#d4d4d4"> = </span><span style="color:#c586c0">await</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">getGoodsCommentDetail</span><span style="color:#d4d4d4">({</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">scoreType:</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">10</span><span style="color:#d4d4d4">, </span><span style="color:#6a9955">// 默认抓取好评</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">goodsId:</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">goodsId</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">page:</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">1</span></span>
<span class="line"><span style="color:#d4d4d4">    })</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goodsCommentArray</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">commentRes</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">data</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">list</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">data</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span></code></pre></div></div></figure><p>data 提供：</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">data</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">defaultAvatar:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'https://.../coding/202408301648039.png'</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">goodsDetailObj:</span><span style="color:#d4d4d4"> {}, </span><span style="color:#6a9955">// 商品说明</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">goodsCommentArray:</span><span style="color:#d4d4d4"> {}, </span><span style="color:#6a9955">// 商品评价</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">images:</span><span style="color:#d4d4d4"> [],</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">current:</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">0</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span></code></pre></div></div></figure><p>现在剩下商品说明的图片未渲染、商品评论区未渲染</p><h3 id="商品说明的图片渲染"><a class="markdownIt-Anchor" href="#商品说明的图片渲染"></a> 商品说明的图片渲染</h3><p><img src= "/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202408310104868.png" alt="image-20240830174412273"><br>接口返回的数据中 content 就是商品详细说明的图：</p><p><img src= "/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202408310105026.png" alt="image-20240830174505655"></p><p>于是再于 data 中提供两个数据用于处理：</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#c8c8c8">imgSrcRegex</span><span style="color:#d4d4d4">:</span><span style="color:#d16969"> /&lt;img</span><span style="color:#ce9178">[^</span><span style="color:#d16969">&gt;</span><span style="color:#ce9178">]</span><span style="color:#d7ba7d">+</span><span style="color:#d16969">src="</span><span style="color:#ce9178">([^</span><span style="color:#d16969">"&gt;</span><span style="color:#ce9178">]</span><span style="color:#d7ba7d">+</span><span style="color:#ce9178">)</span><span style="color:#d16969">"/</span><span style="color:#569cd6">g</span><span style="color:#d4d4d4">, </span><span style="color:#6a9955">// 匹配接口数据html中的src图</span></span>
<span class="line"><span style="color:#c8c8c8">imgSrcArray</span><span style="color:#d4d4d4">: [], </span><span style="color:#6a9955">// 商品详细介绍长图</span></span></code></pre></div></div></figure><p>再到 created 中编写：</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#9cdcfe">async</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">created</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 获取商品详情-说明部分</span></span>
<span class="line"><span style="color:#d4d4d4">    ...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 获取商品详情-评价部分</span></span>
<span class="line"><span style="color:#d4d4d4">   ...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 正则匹配得到商品详细介绍长图</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">htmlString</span><span style="color:#d4d4d4"> = </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goodsDetailObj</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">content</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">srcArray</span><span style="color:#d4d4d4"> = []</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">regex</span><span style="color:#d4d4d4"> =</span><span style="color:#d16969"> /&lt;img\s</span><span style="color:#d7ba7d">+</span><span style="color:#ce9178">[^</span><span style="color:#d16969">&gt;</span><span style="color:#ce9178">]</span><span style="color:#d7ba7d">*</span><span style="color:#d16969">src="</span><span style="color:#ce9178">([^</span><span style="color:#d16969">"</span><span style="color:#ce9178">]</span><span style="color:#d7ba7d">*</span><span style="color:#ce9178">)</span><span style="color:#d16969">"/</span><span style="color:#569cd6">g</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">let</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">match</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#c586c0">while</span><span style="color:#d4d4d4"> ((</span><span style="color:#9cdcfe">match</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">regex</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">exec</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">htmlString</span><span style="color:#d4d4d4">)) !== </span><span style="color:#569cd6">null</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">srcArray</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">push</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">match</span><span style="color:#d4d4d4">[</span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">]) </span><span style="color:#6a9955">// 将匹配到的 src URL 添加到数组中</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">imgSrcArray</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">srcArray</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// console.log(this.imgSrcArray) // 输出结果数组</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span></code></pre></div></div></figure><p>接下来就剩下完全的评价区渲染了。</p><h2 id="商品评价区"><a class="markdownIt-Anchor" href="#商品评价区"></a> 商品评价区</h2><p>这是一个新的页面所以直接新建了。<code>views/productdetail/evaluation.vue</code></p><figure class="shiki vue"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">template</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"goodsEvaluation"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-nav-bar</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">fixed</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">title</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"商品评价页"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">left-arrow</span><span style="color:#d4d4d4"> @</span><span style="color:#9cdcfe">click-left</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">$router</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">go</span><span style="color:#d4d4d4">(-</span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">)</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> /</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"comment-list"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"comment-item"</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">v-for</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">in</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">goodsCommentArray</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> :</span><span style="color:#9cdcfe">key</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">comment_id</span><span style="color:#d4d4d4">"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"top"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#569cd6">img</span><span style="color:#d4d4d4"> :</span><span style="color:#9cdcfe">src</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">user</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">avatar_url</span><span style="color:#d4d4d4"> || </span><span style="color:#9cdcfe">defaultAvatar</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">alt</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">""</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"name"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">{{</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">user</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">nick_name</span><span style="color:#d4d4d4">}}</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-rate</span><span style="color:#d4d4d4"> :</span><span style="color:#9cdcfe">size</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#b5cea8">16</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> :</span><span style="color:#9cdcfe">value</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">score</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"#ffd21e"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">void-icon</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"star"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">void-color</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"#eee"</span><span style="color:#d4d4d4">/</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"content"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          {{</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">content</span><span style="color:#d4d4d4">}}</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"time"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          {{</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">create_time</span><span style="color:#d4d4d4">}}</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">template</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">script</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#c586c0">import</span><span style="color:#d4d4d4"> { </span><span style="color:#9cdcfe">getGoodsCommentDetail</span><span style="color:#d4d4d4"> } </span><span style="color:#c586c0">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'@/api/goodsDetail'</span></span>
<span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">default</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">name:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'GoodsEvaluation'</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">computed:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">detailId</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">$route</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">params</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">id</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#569cd6">async</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">created</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#c586c0">try</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">goodsId</span><span style="color:#d4d4d4"> = </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">detailId</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">commentRes</span><span style="color:#d4d4d4"> = </span><span style="color:#c586c0">await</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">getGoodsCommentDetail</span><span style="color:#d4d4d4">({</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">scoreType:</span><span style="color:#d4d4d4"> -</span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">, </span><span style="color:#6a9955">// 全部评价</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">goodsId</span></span>
<span class="line"><span style="color:#d4d4d4">      })</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goodsCommentArray</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">commentRes</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">data</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">list</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">data</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">console</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">log</span><span style="color:#d4d4d4">(</span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goodsCommentArray</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">    } </span><span style="color:#c586c0">catch</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">error</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">console</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">error</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'Failed to fetch goods comments:'</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">error</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 可以在这里添加更多的错误处理逻辑，比如显示错误提示</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#dcdcaa">data</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">defaultAvatar:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'https://.../coding/202408301648039.png'</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">goodsCommentArray:</span><span style="color:#d4d4d4"> [] </span><span style="color:#6a9955">// 商品评价</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">script</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">style</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">lang</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"less"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">scoped</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d7ba7d">.goodsEvaluation</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">padding-top</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">46px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">background-color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#f7f7f7</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">min-height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">100vh</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  ::</span><span style="color:#569cd6">v-deep</span><span style="color:#d4d4d4"> </span><span style="color:#d7ba7d">.van-icon-arrow-left</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#333</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.comment-list</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">padding</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">15px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.comment-item</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">background-color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#fff</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">border-radius</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">8px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">padding</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">15px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">margin-bottom</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">box-shadow</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">2px</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">8px</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">rgba</span><span style="color:#d4d4d4">(</span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">, </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">, </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">, </span><span style="color:#b5cea8">0.05</span><span style="color:#d4d4d4">);</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">14px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">line-height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">22px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#d7ba7d">.top</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">align-items</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">center</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">margin-bottom</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#d7ba7d">img</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">width</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">40px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">40px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">border-radius</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">50%</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">margin-right</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">object-fit</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">cover</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">border</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">1px</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">solid</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">#eaeaea</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      }</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#d7ba7d">.name</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">font-weight</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">600</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#333</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">flex-grow</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      }</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#d7ba7d">.van-rate</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">margin-left</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">auto</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      }</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#d7ba7d">.content</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#555</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">margin-bottom</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">white-space</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">normal</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">word-wrap</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">break-word</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#d7ba7d">.time</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">12px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#999</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">text-align</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">right</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">style</span><span style="color:grey">&gt;</span></span></code></pre></div></div></figure><p>并转到 router 包下修改路由：</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#6a9955">// 配置动态商品id，用于确认将来是哪个商品详情页</span></span>
<span class="line"><span style="color:#d4d4d4">{ </span><span style="color:#c8c8c8">path</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">'/productdetail/:id'</span><span style="color:#d4d4d4">, </span><span style="color:#c8c8c8">component</span><span style="color:#d4d4d4">: </span><span style="color:#9cdcfe">ProductDetail</span><span style="color:#d4d4d4"> },</span></span>
<span class="line"><span style="color:#d4d4d4">{ </span><span style="color:#c8c8c8">path</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">'/evaluation/:id'</span><span style="color:#d4d4d4">, </span><span style="color:#c8c8c8">component</span><span style="color:#d4d4d4">: </span><span style="color:#9cdcfe">GoodsEvaluation</span><span style="color:#d4d4d4"> },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a9955">// 404页面，用于调试</span></span>
<span class="line"><span style="color:#d4d4d4">{ </span><span style="color:#c8c8c8">path</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">'*'</span><span style="color:#d4d4d4">, </span><span style="color:#c8c8c8">component</span><span style="color:#d4d4d4">: </span><span style="color:#9cdcfe">NotFound</span><span style="color:#d4d4d4"> }</span></span></code></pre></div></div></figure><h2 id="加入购物车购买"><a class="markdownIt-Anchor" href="#加入购物车购买"></a> 加入购物车 / 购买</h2><p>该功能使用到弹层组件，可以在 vant 组件库中找到 ActionSheet</p><p>页面代码如下：</p><figure class="shiki vue"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#6a9955">&lt;!-- 弹层 --&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-action-sheet</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">v-model</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">showPannel</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> :</span><span style="color:#9cdcfe">title</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">mode</span><span style="color:#d4d4d4"> === </span><span style="color:#ce9178">'cart'</span><span style="color:#d4d4d4"> ? </span><span style="color:#ce9178">'加入购物车'</span><span style="color:#d4d4d4"> : </span><span style="color:#ce9178">'立刻购买'</span><span style="color:#d4d4d4">"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      &lt;div class="product"&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        &lt;div class="product-title"&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          &lt;div class="left"&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">            &lt;img :src="goodsDetailObj.goods_image" alt=""&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          &lt;/div&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          &lt;div class="right"&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">            &lt;div class="price"&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">              &lt;span&gt;¥&lt;/span&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">              &lt;span class="nowprice"&gt;{{ goodsDetailObj.goods_price_min }}&lt;/span&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">            &lt;/div&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">            &lt;div class="count"&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">              &lt;span&gt;库存&lt;/span&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">              &lt;span&gt;{{ goodsDetailObj.stock_total }}&lt;/span&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">            &lt;/div&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          &lt;/div&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        &lt;/div&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        &lt;div class="num-box"&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          &lt;span&gt;数量&lt;/span&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          数字框占位</span></span>
<span class="line"><span style="color:#d4d4d4">        &lt;/div&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        &lt;!-- 有库存才显示可购买 --&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        &lt;div class="showbtn" v-if="goodsDetailObj.stock_total &gt; 0"&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          &lt;div class="btn" v-if="true"&gt;加入购物车&lt;/div&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          &lt;div class="btn now" v-else&gt;立刻购买&lt;/div&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        &lt;/div&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        &lt;div class="btn-none" v-else&gt;该商品已抢完&lt;/div&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      &lt;/div&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">van-action-sheet</span><span style="color:grey">&gt;</span></span></code></pre></div></div></figure><p>样式如下：</p><figure class="shiki less"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#6a9955">// 弹层样式</span></span>
<span class="line"><span style="color:#d7ba7d">.product</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.product-title</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#d7ba7d">.left</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#d7ba7d">img</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">width</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">90px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">90px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      }</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">margin</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#d7ba7d">.right</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">flex</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">padding</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#d7ba7d">.price</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">14px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#fe560a</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#d7ba7d">.nowprice</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">24px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">margin</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">5px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">        }</span></span>
<span class="line"><span style="color:#d4d4d4">      }</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.num-box</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">justify-content</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">space-between</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">padding</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">align-items</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">center</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.btn</span><span style="color:#d4d4d4">, </span><span style="color:#d7ba7d">.btn-none</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">40px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">line-height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">40px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">margin</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">20px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">border-radius</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">20px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">text-align</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">center</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#dcdcaa">rgb</span><span style="color:#d4d4d4">(</span><span style="color:#b5cea8">255</span><span style="color:#d4d4d4">, </span><span style="color:#b5cea8">255</span><span style="color:#d4d4d4">, </span><span style="color:#b5cea8">255</span><span style="color:#d4d4d4">);</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">background-color</span><span style="color:#d4d4d4">: </span><span style="color:#dcdcaa">rgb</span><span style="color:#d4d4d4">(</span><span style="color:#b5cea8">255</span><span style="color:#d4d4d4">, </span><span style="color:#b5cea8">148</span><span style="color:#d4d4d4">, </span><span style="color:#b5cea8">2</span><span style="color:#d4d4d4">);</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.btn.now</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">background-color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#fe5630</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.btn-none</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">background-color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#cccccc</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span></code></pre></div></div></figure><p>data 中提供两个数据：</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#c8c8c8">showPannel</span><span style="color:#d4d4d4">: </span><span style="color:#569cd6">false</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#c8c8c8">mode</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">'cart'</span><span style="color:#d4d4d4">, </span><span style="color:#6a9955">// 购物车或立即购买</span></span></code></pre></div></div></figure><p>methods 中提供两个方法：</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">addToCart</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">showPannel</span><span style="color:#d4d4d4"> = </span><span style="color:#569cd6">true</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">mode</span><span style="color:#d4d4d4"> = </span><span style="color:#ce9178">'cart'</span></span>
<span class="line"><span style="color:#d4d4d4">    },</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">buyNow</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">showPannel</span><span style="color:#d4d4d4"> = </span><span style="color:#569cd6">true</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">mode</span><span style="color:#d4d4d4"> = </span><span style="color:#ce9178">'buy'</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span></code></pre></div></div></figure><p>接下来还需要将弹层中的数量展示封装成数字框组件。</p><h2 id="数字框组件封装"><a class="markdownIt-Anchor" href="#数字框组件封装"></a> 数字框组件封装</h2><p><img src= "/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202408310106195.png" alt="image-20240831010611047"><br>分析：组件名 CountBox</p><ol><li>静态结构，左中右三部分</li><li>数字框的数字，应该是外部传递进来的 (父传子)</li><li>点击 <code>+－</code>号，可以修改数字（子传父)</li><li>使用 <code>v-model</code> 实现封装（<code>:value</code> 和 <code>@input</code> 的简写）</li><li>数字不能减到小于 1</li></ol><p>封装组件 <code>components/CountBox.vue</code></p><figure class="shiki vue"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">template</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"count-box"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">button</span><span style="color:#d4d4d4"> @</span><span style="color:#9cdcfe">click</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">handleSub</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"minus"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">-</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">button</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">input</span><span style="color:#d4d4d4"> :</span><span style="color:#9cdcfe">value</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">value</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> @</span><span style="color:#9cdcfe">change</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">handleChange</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"inp"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">type</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"text"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">button</span><span style="color:#d4d4d4"> @</span><span style="color:#9cdcfe">click</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">handleAdd</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"add"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">+</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">button</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">template</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span></span>
<span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">script</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">default</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">props:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">value:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">type:</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">Number</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">default:</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">1</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">methods:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">handleSub</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">if</span><span style="color:#d4d4d4"> (</span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">value</span><span style="color:#d4d4d4"> &lt;= </span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#c586c0">return</span></span>
<span class="line"><span style="color:#d4d4d4">      }</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">$emit</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'input'</span><span style="color:#d4d4d4">, </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">value</span><span style="color:#d4d4d4"> - </span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">    },</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">handleAdd</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">$emit</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'input'</span><span style="color:#d4d4d4">, </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">value</span><span style="color:#d4d4d4"> + </span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">    },</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">handleChange</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">e</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// console.log(e.target.value)</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">num</span><span style="color:#d4d4d4"> = +</span><span style="color:#9cdcfe">e</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">target</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">value</span><span style="color:#d4d4d4"> </span><span style="color:#6a9955">// 转数字处理 (1) 数字 (2) NaN</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 输入了不合法的文本 或 输入了负值，回退成原来的 value 值</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">if</span><span style="color:#d4d4d4"> (</span><span style="color:#dcdcaa">isNaN</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">num</span><span style="color:#d4d4d4">) || </span><span style="color:#9cdcfe">num</span><span style="color:#d4d4d4"> &lt; </span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">e</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">target</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">value</span><span style="color:#d4d4d4"> = </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">value</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#c586c0">return</span></span>
<span class="line"><span style="color:#d4d4d4">      }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">$emit</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'input'</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">num</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">script</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span></span>
<span class="line"></span>
<span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">style</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">lang</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"less"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">scoped</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d7ba7d">.count-box</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">width</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">110px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.add</span><span style="color:#d4d4d4">, </span><span style="color:#d7ba7d">.minus</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">width</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">30px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">30px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">outline</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">none</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">border</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">none</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">background-color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#efefef</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.inp</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">width</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">40px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">30px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">outline</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">none</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">border</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">none</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">margin</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">5px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">background-color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#efefef</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">text-align</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">center</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">style</span><span style="color:grey">&gt;</span></span></code></pre></div></div></figure><p>使用组件</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#c586c0">import</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">CountBox</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'@/components/CountBox.vue'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">default</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">name:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'ProDetail'</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">components:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">CountBox</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#dcdcaa">data</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">addCount:</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">1</span></span>
<span class="line"><span style="color:#d4d4d4">      ...</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"num-box"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">数量</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:grey">&lt;</span><span style="color:#4ec9b0">CountBox</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">v-model</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"addCount"</span><span style="color:grey">&gt;&lt;/</span><span style="color:#4ec9b0">CountBox</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span></code></pre></div></div></figure><h2 id="加入购物车-判断登录状态"><a class="markdownIt-Anchor" href="#加入购物车-判断登录状态"></a> 加入购物车 - 判断登录状态</h2><p>需要使用到 vant 的 Dialog 组件</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#c586c0">import</span><span style="color:#d4d4d4"> { </span><span style="color:#9cdcfe">Dialog</span><span style="color:#d4d4d4"> } </span><span style="color:#c586c0">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'vant'</span><span style="color:#d4d4d4">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#dcdcaa">Dialog</span><span style="color:#d4d4d4">({ </span><span style="color:#9cdcfe">message:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'提示'</span><span style="color:#d4d4d4"> });</span></span></code></pre></div></div></figure><p>给弹层的加入购物车按钮绑定点击事件</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"btn"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">v-if</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"this.mode === 'cart'"</span><span style="color:#d4d4d4"> </span><span style="color:#f44747">@click="addCart"&gt;加入购物车&lt;/div&gt;</span></span></code></pre></div></div></figure><p>添加 token 鉴权判断，跳转携带回跳地址</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#6a9955">// 加入购物车判断登录状态</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">addCart</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// console.log(this.$store.getters.token)</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">if</span><span style="color:#d4d4d4"> (!</span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">$store</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">getters</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">token</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#6a9955">// 说明没有token，没有token就需要提示登录</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">$dialog</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">confirm</span><span style="color:#d4d4d4">({</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">message:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'当前操作需要登录后才能进行哦'</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">confirmButtonText:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'去登录'</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">cancelButtonText:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'再逛逛'</span></span>
<span class="line"><span style="color:#d4d4d4">        }).</span><span style="color:#dcdcaa">then</span><span style="color:#d4d4d4">(() </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#6a9955">// 说明点击了去登录，需要带上backUrl</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">$router</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">replace</span><span style="color:#d4d4d4">({</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">path:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'/login'</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">query:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">              </span><span style="color:#9cdcfe">backUrl:</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">$route</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">fullPath</span><span style="color:#d4d4d4"> </span><span style="color:#6a9955">// 带上当前页面的全路径（包括查询参数）</span></span>
<span class="line"><span style="color:#d4d4d4">            }</span></span>
<span class="line"><span style="color:#d4d4d4">          })</span></span>
<span class="line"><span style="color:#d4d4d4">        })</span></span>
<span class="line"><span style="color:#d4d4d4">          .</span><span style="color:#dcdcaa">catch</span><span style="color:#d4d4d4">(() </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#6a9955">// 说明点击了再逛逛，不做任何操作</span></span>
<span class="line"><span style="color:#d4d4d4">          })</span></span>
<span class="line"><span style="color:#d4d4d4">      }</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span></code></pre></div></div></figure><p>登录后如果有回跳地址则 replace 地回跳回去：</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#6a9955">// 判断有无回跳地址</span></span>
<span class="line"><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">url</span><span style="color:#d4d4d4"> = </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">$route</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">query</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">backUrl</span><span style="color:#d4d4d4"> || </span><span style="color:#ce9178">'/'</span></span>
<span class="line"><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">$router</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">replace</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">url</span><span style="color:#d4d4d4">)</span></span></code></pre></div></div></figure><h2 id="thisrouterreplace和thisrouterpush的区别"><a class="markdownIt-Anchor" href="#thisrouterreplace和thisrouterpush的区别"></a> <code>this.$router.replace</code> 和 <code>this.$router.push</code> 的区别</h2><p>假设有 A、B、C 三个页面。</p><p>我从 A 点击进入 B 页面，然后在 B 页面需要进行跳转到 C 页面，此时我触发的是 <code>this.$router.replace</code> 进行跳转，那么跳转到 C 之后 C 就会将 B 的访问记录完全覆盖。如果我在 C 页面的操作结束之后，进行返回上一页的操作，就会直接返回到 A 页面而不是 B 页面。</p><p>相对的，<code>this.$router.push</code> 则会将记录保持，你的每次访问都是一个累加的过程，不会清除。</p><p>如果把页面比作真实的纸张，跳转的过程就像把我们手里的一张纸覆盖到桌子上的另一张纸上面一样，桌子上纸张堆的是已经访问过的页面，桌子上的纸张堆中最上面那一张就是我们现在正在访问的页面，而手里的是将要访问的页面。但覆盖的方式上述两种各有不同：<code>replace</code> 会在覆盖桌子上的纸张之前将桌子上最上面的那一张丢到垃圾桶，然后再将手中的纸张覆盖上去；<code>push</code> 则是简单的将纸张放在桌子上的纸张上面，不进行其他任何操作，最终你的访问记录都在桌子上。</p><h2 id="加入购物车-封装接口进行请求"><a class="markdownIt-Anchor" href="#加入购物车-封装接口进行请求"></a> 加入购物车 - 封装接口进行请求</h2><p>接口如下：</p><p><img src= "/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202408310106434.png" alt="image-20240830232641136"></p><p>封装加入购物车的请求接口模块 <code>api/cart.js</code></p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#6a9955">// 加入购物车的请求</span></span>
<span class="line"><span style="color:#c586c0">import</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">request</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'@/utils/request'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">addCart</span><span style="color:#d4d4d4"> = (</span><span style="color:#9cdcfe">goodsId</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">goodsNum</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">goodsSkuId</span><span style="color:#d4d4d4">) </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#6a9955">// goodsId: 商品id, goodsNum: 商品数量, goodsSkuId: 商品规格id 如红色手机</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">request</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">post</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'/cart/add'</span><span style="color:#d4d4d4">, {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">goodsId</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">goodsNum</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">goodsSkuId</span></span>
<span class="line"><span style="color:#d4d4d4">  })</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span></code></pre></div></div></figure><p>由于需要携带请求头且携带的是鉴权信息，每次请求手动去写比较麻烦，所以直接在请求拦截器中携带 <code>utils/request.js</code></p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#c586c0">import</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">store</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'@/store'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a9955">// 只要有token就在请求中携带，便于请求需要权限的接口</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">token</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">store</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">getters</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">token</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#c586c0">if</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">token</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">config</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">headers</span><span style="color:#d4d4d4">[</span><span style="color:#ce9178">'Access-Token'</span><span style="color:#d4d4d4">] = </span><span style="color:#9cdcfe">token</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">config</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">headers</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">platform</span><span style="color:#d4d4d4"> = </span><span style="color:#ce9178">'h5'</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">config</span></span></code></pre></div></div></figure><p>修改购物车渲染代码进行购物车内数量角标展示 <code>views/productdetail/index.vue</code></p><figure class="shiki vue"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"icon-cart"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">     &lt;van-icon :badge="cartTotal || ''" name="shopping-cart-o" /&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">     &lt;span&gt;购物车&lt;/span&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">   </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span></code></pre></div></div></figure><p>导入并将商品规格赋值给 data 数据</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#c586c0">import</span><span style="color:#d4d4d4"> { </span><span style="color:#9cdcfe">addCart</span><span style="color:#d4d4d4"> } </span><span style="color:#c586c0">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'@/api/cart'</span></span>
<span class="line"><span style="color:#d4d4d4">...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9cdcfe">async</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">created</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 获取商品详情-说明部分</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">goodsId</span><span style="color:#d4d4d4"> = </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">detailId</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">res</span><span style="color:#d4d4d4"> = </span><span style="color:#c586c0">await</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">getGoodsDetail</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">goodsId</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// console.log(res)</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goodsDetailObj</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">res</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">data</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">detail</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// console.log(this.goodsDetailObj)</span></span>
<span class="line"><span style="color:#d4d4d4">  </span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goodsSkuId</span><span style="color:#d4d4d4"> = </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goodsDetailObj</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">skuList</span><span style="color:#d4d4d4">[</span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">].</span><span style="color:#9cdcfe">goods_sku_id</span><span style="color:#d4d4d4"> </span><span style="color:#6a9955">// 得到商品规格id</span></span>
<span class="line"><span style="color:#d4d4d4">  </span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">images</span><span style="color:#d4d4d4"> = </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goodsDetailObj</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goods_images</span><span style="color:#d4d4d4"> </span><span style="color:#6a9955">// 得到商品轮播图</span></span>
<span class="line"><span style="color:#d4d4d4">		...</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span></code></pre></div></div></figure><p>提供 data 数据来接收必要信息</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#c8c8c8">addCount</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">, </span><span style="color:#6a9955">// 加入购物车的商品数量</span></span>
<span class="line"><span style="color:#c8c8c8">goodsSkuId</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">, </span><span style="color:#6a9955">// 商品规格id</span></span>
<span class="line"><span style="color:#c8c8c8">cartTotal</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">, </span><span style="color:#6a9955">// 购物车内商品总数</span></span></code></pre></div></div></figure><p>编写请求代码</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#6a9955">// 加入购物车判断登录状态</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">async</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">addCart</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">      ...</span></span>
<span class="line"><span style="color:#d4d4d4">      </span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 说明有token，可以直接加入购物车</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> { </span><span style="color:#4fc1ff">data</span><span style="color:#d4d4d4"> } = </span><span style="color:#c586c0">await</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">addCart</span><span style="color:#d4d4d4">(</span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">detailId</span><span style="color:#d4d4d4">, </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">addCount</span><span style="color:#d4d4d4">, </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goodsSkuId</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">cartTotal</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">data</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">cartTotal</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">$toast</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'加入购物车成功！'</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">showPannel</span><span style="color:#d4d4d4"> = </span><span style="color:#569cd6">false</span><span style="color:#d4d4d4"> </span><span style="color:#6a9955">// 关闭弹层</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span></code></pre></div></div></figure><h2 id="购物车页面"><a class="markdownIt-Anchor" href="#购物车页面"></a> 购物车页面</h2><p>需求分析：</p><ol><li>基本静态结构 (快速实现）</li><li>构建 vuexcart 模块，获取数据存储</li><li>基于数据居动态渲染购物车列表</li><li>封装 getters 实现动态统计</li><li>全选反选功能</li><li>数字框修改数量功能</li><li>编辑切换状态，删除功能</li><li>空购物车处理</li></ol><h3 id="静态页面"><a class="markdownIt-Anchor" href="#静态页面"></a> 静态页面</h3><p>修改 <code>layout/cart.vue</code></p><p>使用到了 vant 的 Checkbox, CheckboxGroup 组件</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#c586c0">import</span><span style="color:#d4d4d4"> { </span><span style="color:#9cdcfe">Checkbox</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">CheckboxGroup</span><span style="color:#d4d4d4"> } </span><span style="color:#c586c0">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'vant'</span><span style="color:#d4d4d4">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9cdcfe">Vue</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">use</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">Checkbox</span><span style="color:#d4d4d4">);</span></span>
<span class="line"><span style="color:#9cdcfe">Vue</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">use</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">CheckboxGroup</span><span style="color:#d4d4d4">);</span></span></code></pre></div></div></figure><p>静态页面如下：</p><figure class="shiki vue"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">template</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"cart"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-nav-bar</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">title</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"购物车"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">fixed</span><span style="color:#d4d4d4"> /</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">&lt;!-- 购物车开头 --&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"cart-title"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"all"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">共</span><span style="color:grey">&lt;</span><span style="color:#569cd6">i</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">4</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">i</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">件商品</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"edit"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-icon</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">name</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"edit"</span><span style="color:#d4d4d4"> /</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        编辑</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">&lt;!-- 购物车列表 --&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"cart-list"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"cart-item"</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">v-for</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">in</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">10</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> :</span><span style="color:#9cdcfe">key</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-checkbox</span><span style="color:grey">&gt;&lt;/</span><span style="color:#569cd6">van-checkbox</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"show"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#569cd6">img</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">src</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"http://cba.itlike.com/public/uploads/10001/20230321/a072ef0eef1648a5c4eae81fad1b7583.jpg"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">alt</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">""</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"info"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"tit text-ellipsis-2"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">新Pad 14英寸 12+128 远峰蓝 M6平板电脑 智能安卓娱乐十核游戏学习二合一 低蓝光护眼超清4K全面三星屏5GWIFI全网通 蓝魔快本平板</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"bottom"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"price"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">¥ </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">1247.04</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"count-box"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">              </span><span style="color:grey">&lt;</span><span style="color:#569cd6">button</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"minus"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">-</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">button</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">              </span><span style="color:grey">&lt;</span><span style="color:#569cd6">input</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"inp"</span><span style="color:#d4d4d4"> :</span><span style="color:#9cdcfe">value</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#b5cea8">4</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">type</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"text"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">readonly</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">              </span><span style="color:grey">&lt;</span><span style="color:#569cd6">button</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"add"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">+</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">button</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"footer-fixed"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"all-check"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-checkbox</span><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">icon-size</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"18"</span><span style="color:grey">&gt;&lt;/</span><span style="color:#569cd6">van-checkbox</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        全选</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"all-total"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"price"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">合计：</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">¥ </span><span style="color:grey">&lt;</span><span style="color:#569cd6">i</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"totalPrice"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">99.99</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">i</span><span style="color:grey">&gt;&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">v-if</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#569cd6">true</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"goPay"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">结算(5)</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">v-else</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"delete"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">删除</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">template</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">script</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">default</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">name:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'CartPage'</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">script</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">style</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">lang</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"less"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">scoped</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#6a9955">// 主题 padding</span></span>
<span class="line"><span style="color:#d7ba7d">.cart</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">padding-top</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">46px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">padding-bottom</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">100px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">background-color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#f5f5f5</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">min-height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">100vh</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.cart-title</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">40px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">justify-content</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">space-between</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">align-items</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">center</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">padding</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">14px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#d7ba7d">.all</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#d7ba7d">i</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">font-style</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">normal</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">margin</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">2px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#fa2209</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">16px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      }</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#d7ba7d">.edit</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#d7ba7d">.van-icon</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">18px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      }</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.cart-item</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">margin</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">padding</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">justify-content</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">space-between</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">background-color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#ffffff</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">border-radius</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">5px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#d7ba7d">.show</span><span style="color:#d4d4d4"> </span><span style="color:#d7ba7d">img</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">width</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">100px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">100px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#d7ba7d">.info</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">width</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">210px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">padding</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">5px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">14px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">flex-direction</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">column</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">justify-content</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">space-between</span><span style="color:#d4d4d4">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#d7ba7d">.bottom</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">justify-content</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">space-between</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#d7ba7d">.price</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">align-items</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex-end</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#fa2209</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">12px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#d7ba7d">span</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">16px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">          }</span></span>
<span class="line"><span style="color:#d4d4d4">        }</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#d7ba7d">.count-box</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">width</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">110px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#d7ba7d">.add</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#d7ba7d">.minus</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">width</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">30px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">30px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">outline</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">none</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">border</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">none</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">          }</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#d7ba7d">.inp</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">width</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">40px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">30px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">outline</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">none</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">border</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">none</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">background-color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#efefef</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">text-align</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">center</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">margin</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">5px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">          }</span></span>
<span class="line"><span style="color:#d4d4d4">        }</span></span>
<span class="line"><span style="color:#d4d4d4">      }</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d7ba7d">.footer-fixed</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">position</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">fixed</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">left</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">bottom</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">50px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">50px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">width</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">100%</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">border-bottom</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">1px</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">solid</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">#ccc</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">background-color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#fff</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">justify-content</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">space-between</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">align-items</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">center</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">padding</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.all-check</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">align-items</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">center</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#d7ba7d">.van-checkbox</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">margin-right</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">5px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.all-total</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">line-height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">36px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#d7ba7d">.price</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">14px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">margin-right</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#d7ba7d">.totalPrice</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#fa2209</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">18px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">font-style</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">normal</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      }</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#d7ba7d">.goPay</span><span style="color:#d4d4d4">, </span><span style="color:#d7ba7d">.delete</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">min-width</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">100px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">36px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">line-height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">36px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">text-align</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">center</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">background-color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#fa2f21</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#fff</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">border-radius</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">18px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#d7ba7d">&amp;.disabled</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">background-color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#ff9779</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      }</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">style</span><span style="color:grey">&gt;</span></span></code></pre></div></div></figure><h3 id="构建vuex-cart模块"><a class="markdownIt-Anchor" href="#构建vuex-cart模块"></a> 构建 vuex cart 模块</h3><p>新建子模块 cart：<code>@/store/modules/cart</code></p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#c586c0">import</span><span style="color:#d4d4d4"> { </span><span style="color:#9cdcfe">getCartList</span><span style="color:#d4d4d4"> } </span><span style="color:#c586c0">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'@/api/cart'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">default</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">namespaced:</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">true</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#dcdcaa">state</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 提供一个数组用于存储购物车列表</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">cartList:</span><span style="color:#d4d4d4"> []</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">mutations:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 提供方法可以设置购物车列表</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">setCartList</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">newCartList</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">cartList</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">newCartList</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">actions:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 异步获取购物车列表</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">async</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">getCartAction</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">context</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> { </span><span style="color:#4fc1ff">data</span><span style="color:#d4d4d4"> } = </span><span style="color:#c586c0">await</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">getCartList</span><span style="color:#d4d4d4">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 由于后台返回数据中不包括是否选中的状态，所以本地自己维护，给每一项添加上被选中的状态</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">data</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">list</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">forEach</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">element</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">element</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">isChecked</span><span style="color:#d4d4d4"> = </span><span style="color:#569cd6">true</span></span>
<span class="line"><span style="color:#d4d4d4">      })</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">context</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">commit</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'setCartList'</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">data</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">list</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">getters:</span><span style="color:#d4d4d4"> {}</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span></code></pre></div></div></figure><p>到 vuex 中挂载：</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#c586c0">import</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">Cart</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'@/store/modules/cart'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">	...</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#c8c8c8">modules</span><span style="color:#d4d4d4">: {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">User</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">Cart</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span></code></pre></div></div></figure><p>购物车页面中使用 created 调用 actions 异步</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">created</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#6a9955">// 判断是否登录</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#c586c0">if</span><span style="color:#d4d4d4"> (</span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">$store</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">getters</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">token</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 获取购物车数据</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">$store</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">dispatch</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'Cart/getCartAction'</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span></code></pre></div></div></figure><h3 id="动态渲染"><a class="markdownIt-Anchor" href="#动态渲染"></a> 动态渲染</h3><p>接口地址：/cart/list</p><p><img src= "/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202408311201545.png" alt="image-20240831120141410"></p><p>使用辅助函数映射数组：</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#c586c0">import</span><span style="color:#d4d4d4"> { </span><span style="color:#9cdcfe">mapState</span><span style="color:#d4d4d4"> } </span><span style="color:#c586c0">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'vuex'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#c8c8c8">computed</span><span style="color:#d4d4d4">: {</span></span>
<span class="line"><span style="color:#d4d4d4">    ...</span><span style="color:#dcdcaa">mapState</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'Cart'</span><span style="color:#d4d4d4">, [</span><span style="color:#ce9178">'cartList'</span><span style="color:#d4d4d4">])</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span></code></pre></div></div></figure><p>将 template 中对应的地方进行改造：</p><figure class="shiki vue"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"cart-list"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      &lt;div class="cart-item" v-for="item in cartList" :key="item.goods_id"&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        &lt;van-checkbox :value="item.isChecked"&gt;&lt;/van-checkbox&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        &lt;div class="show"&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          &lt;img :src="item.goods.goods_image" alt=""&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"info"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          &lt;span class="tit text-ellipsis-2"&gt;{{ item.goods.goods_name }}&lt;/span&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          &lt;span class="bottom"&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">            &lt;div class="price"&gt;¥ &lt;span&gt;{{ item.goods.goods_price_min }}&lt;/span&gt;</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:grey">&lt;</span><span style="color:#569cd6">CountBox</span><span style="color:#d4d4d4"> :</span><span style="color:#9cdcfe">value</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goods_num</span><span style="color:#d4d4d4">"</span><span style="color:grey">&gt;&lt;/</span><span style="color:#569cd6">CountBox</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#d4d4d4">/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        &lt;/div&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      &lt;/div&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    &lt;/div&gt;</span></span></code></pre></div></div></figure><p>但未完成其他功能按钮等事件。</p><h3 id="封装getters实现动态统计"><a class="markdownIt-Anchor" href="#封装getters实现动态统计"></a> 封装 getters 实现动态统计</h3><ul><li>合计商品数量</li></ul><p>合计商品数量使用到 getters</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#c8c8c8">getters</span><span style="color:#d4d4d4">: {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#6a9955">// 求所有的商品累加总数</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#dcdcaa">countCartTotal</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">cartList</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">reduce</span><span style="color:#d4d4d4">((</span><span style="color:#9cdcfe">sum</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">index</span><span style="color:#d4d4d4">) </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">sum</span><span style="color:#d4d4d4"> + </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goods_num</span><span style="color:#d4d4d4">, </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span></code></pre></div></div></figure><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://segmentfault.com/a/1190000044748736">reduce 函数的 20 个高级用法</a></p><ul><li>合计价格</li><li>结算</li></ul><p>最终完整结果：</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#c8c8c8">getters</span><span style="color:#d4d4d4">: {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 求所有的商品累加总数</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">countCartTotal</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">cartList</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">reduce</span><span style="color:#d4d4d4">((</span><span style="color:#9cdcfe">sum</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">index</span><span style="color:#d4d4d4">) </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">sum</span><span style="color:#d4d4d4"> + </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goods_num</span><span style="color:#d4d4d4">, </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">    },</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 选中的商品项目</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">selectedCartList</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// filter只会接收回调结果为true的元素，所以可以不用做其他判断</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">cartList</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">filter</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">isChecked</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">    },</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 选中的商品项目数量</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">selectedCartCount</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">getters</span><span style="color:#d4d4d4">) { </span><span style="color:#6a9955">// 这里的getters可以获取到上面定义的getters</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">Array</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">isArray</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">getters</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">selectedCartList</span><span style="color:#d4d4d4">) ? </span><span style="color:#9cdcfe">getters</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">selectedCartList</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">reduce</span><span style="color:#d4d4d4">((</span><span style="color:#9cdcfe">sum</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">index</span><span style="color:#d4d4d4">) </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">sum</span><span style="color:#d4d4d4"> + </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goods_num</span><span style="color:#d4d4d4">, </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">) : </span><span style="color:#b5cea8">0</span></span>
<span class="line"><span style="color:#d4d4d4">    },</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 选中的商品总价</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">selectedPrice</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">getters</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// toFixed(2) 保留两位小数</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">Array</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">isArray</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">getters</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">selectedCartList</span><span style="color:#d4d4d4">) ? </span><span style="color:#9cdcfe">getters</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">selectedCartList</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">reduce</span><span style="color:#d4d4d4">((</span><span style="color:#9cdcfe">sum</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">index</span><span style="color:#d4d4d4">) </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">sum</span><span style="color:#d4d4d4"> + </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goods_num</span><span style="color:#d4d4d4"> * </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goods</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goods_price_min</span><span style="color:#d4d4d4">, </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">).</span><span style="color:#dcdcaa">toFixed</span><span style="color:#d4d4d4">(</span><span style="color:#b5cea8">2</span><span style="color:#d4d4d4">) : </span><span style="color:#b5cea8">0</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span></code></pre></div></div></figure><p>修改购物车页面的相关 template</p><figure class="shiki vue"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"all"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">共&lt;i&gt;{{ countCartTotal }}&lt;/i&gt;件商品</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">...</span></span>
<span class="line"></span>
<span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"all-total"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        &lt;div class="price"&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          &lt;span&gt;合计：&lt;/span&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          &lt;span&gt;¥ &lt;i class="totalPrice"&gt;{{selectedPrice}}&lt;/i&gt;&lt;/span&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">v-if</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#569cd6">true</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"goPay"</span><span style="color:#d4d4d4"> :</span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4">{</span><span style="color:#c8c8c8">disabled</span><span style="color:#d4d4d4">: </span><span style="color:#9cdcfe">selectedCartCount</span><span style="color:#d4d4d4"> === </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">}</span><span style="color:#d4d4d4">"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">结算({{selectedCartCount}})</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">v-else</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"delete"</span><span style="color:#d4d4d4"> :</span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4">{</span><span style="color:#c8c8c8">disabled</span><span style="color:#d4d4d4">: </span><span style="color:#9cdcfe">selectedCartCount</span><span style="color:#d4d4d4"> === </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">}</span><span style="color:#d4d4d4">"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">删除</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#d4d4d4">/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span></code></pre></div></div></figure><h3 id="全选反选"><a class="markdownIt-Anchor" href="#全选反选"></a> 全选反选</h3><p>提供 mutations 便于修改 state</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#d4d4d4">...</span></span>
<span class="line"><span style="color:#d4d4d4">  </span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#dcdcaa">toggleChecked</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">id</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 遍历购物车列表，找到对应id的商品，修改其选中状态</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">cartList</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">forEach</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">if</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goods_id</span><span style="color:#d4d4d4"> === </span><span style="color:#9cdcfe">id</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">isChecked</span><span style="color:#d4d4d4"> = !</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">isChecked</span></span>
<span class="line"><span style="color:#d4d4d4">      }</span></span>
<span class="line"><span style="color:#d4d4d4">    })</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#dcdcaa">allToggle</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">flag</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 遍历购物车列表，修改所有商品的选中状态</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">cartList</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">forEach</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">isChecked</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">flag</span></span>
<span class="line"><span style="color:#d4d4d4">    })</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span></code></pre></div></div></figure><p>给全选和商品选择框注册点击事件：</p><figure class="shiki vue"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">van-checkbox</span><span style="color:#d4d4d4"> @</span><span style="color:#9cdcfe">click</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#dcdcaa">toggleChecked</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goods_id</span><span style="color:#d4d4d4">)</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> :</span><span style="color:#9cdcfe">value</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">isChecked</span><span style="color:#d4d4d4">"</span><span style="color:grey">&gt;&lt;/</span><span style="color:#569cd6">van-checkbox</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">...</span></span>
<span class="line"></span>
<span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"all-check"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        &lt;van-checkbox @click="allToggle" :value="isAllChecked" icon-size="18"&gt;&lt;/van-checkbox&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        全选</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">methods: {</span></span>
<span class="line"><span style="color:#d4d4d4">    toggleChecked (goodsId) {</span></span>
<span class="line"><span style="color:#d4d4d4">      this.$store.commit('Cart/toggleChecked', goodsId)</span></span>
<span class="line"><span style="color:#d4d4d4">    },</span></span>
<span class="line"><span style="color:#d4d4d4">    allToggle () {</span></span>
<span class="line"><span style="color:#d4d4d4">      this.$store.commit('Cart/allToggle', !this.isAllChecked)</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span></code></pre></div></div></figure><p>辅助函数导入 isAllChecked</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#d4d4d4">...</span><span style="color:#dcdcaa">mapGetters</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'Cart'</span><span style="color:#d4d4d4">, [</span><span style="color:#ce9178">'countCartTotal'</span><span style="color:#d4d4d4">, </span><span style="color:#ce9178">'selectedCartList'</span><span style="color:#d4d4d4">, </span><span style="color:#ce9178">'selectedCartCount'</span><span style="color:#d4d4d4">, </span><span style="color:#ce9178">'selectedPrice'</span><span style="color:#d4d4d4">, </span><span style="color:#ce9178">'isAllChecked'</span><span style="color:#d4d4d4">])</span></span></code></pre></div></div></figure><h3 id="数字框修改数量功能"><a class="markdownIt-Anchor" href="#数字框修改数量功能"></a> 数字框修改数量功能</h3><p>提供更新购物车的接口模块：<code>api/cart.js</code></p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#6a9955">// 更新购物车商品</span></span>
<span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">updateCart</span><span style="color:#d4d4d4"> = (</span><span style="color:#9cdcfe">obj</span><span style="color:#d4d4d4">) </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> { </span><span style="color:#4fc1ff">goodsId</span><span style="color:#d4d4d4">, </span><span style="color:#4fc1ff">goodsNum</span><span style="color:#d4d4d4">, </span><span style="color:#4fc1ff">goodsSkuId</span><span style="color:#d4d4d4"> } = </span><span style="color:#9cdcfe">obj</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">request</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">post</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'/cart/update'</span><span style="color:#d4d4d4">, {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">goodsId</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">goodsNum</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">goodsSkuId</span></span>
<span class="line"><span style="color:#d4d4d4">  })</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span></code></pre></div></div></figure><p>在 vuex 的 cart 子模块导入使用</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#c586c0">import</span><span style="color:#d4d4d4"> { </span><span style="color:#9cdcfe">getCartList</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">updateCart</span><span style="color:#d4d4d4"> } </span><span style="color:#c586c0">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'@/api/cart'</span></span></code></pre></div></div></figure><p>cart 子模块增加修改商品数量的 mutations 方法</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">changeCount</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">obj</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 遍历购物车列表，找到对应id的商品，修改其数量</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> { </span><span style="color:#4fc1ff">goodsId</span><span style="color:#d4d4d4">, </span><span style="color:#4fc1ff">goodsNum</span><span style="color:#d4d4d4">, </span><span style="color:#4fc1ff">goodsSkuId</span><span style="color:#d4d4d4"> } = </span><span style="color:#9cdcfe">obj</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">cartList</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">forEach</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#c586c0">if</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goods_id</span><span style="color:#d4d4d4"> === </span><span style="color:#9cdcfe">goodsId</span><span style="color:#d4d4d4"> &amp;&amp; </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goods_sku_id</span><span style="color:#d4d4d4"> === </span><span style="color:#9cdcfe">goodsSkuId</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goods_num</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">goodsNum</span></span>
<span class="line"><span style="color:#d4d4d4">        }</span></span>
<span class="line"><span style="color:#d4d4d4">      })</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span></code></pre></div></div></figure><p>cart 子模块增加同步购物车到后台的 actions 方法</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#6a9955">// 将本地购物车列表同步到服务器（结算时优先调用）</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">async</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">syncCartAction</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">context</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 接口只接受三个参数：goodsId、goodsNum、goodsSkuId，所以需要遍历本地购物车列表，将选中的商品拆分为三个参数</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">paramsObj</span><span style="color:#d4d4d4"> = {}</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">context</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">cartList</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">forEach</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#c586c0">if</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">isChecked</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">paramsObj</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goodsId</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goods_id</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">paramsObj</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goodsNum</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goods_num</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">paramsObj</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goodsSkuId</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goods_sku_id</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#dcdcaa">updateCart</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">paramsObj</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">        }</span></span>
<span class="line"><span style="color:#d4d4d4">      })</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 打印console提示，显示本地提交同步的参数对象</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">console</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">log</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">paramsObj</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span></code></pre></div></div></figure><p>给数量框组件添加绑定事件</p><figure class="shiki vue"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">CountBox</span><span style="color:#d4d4d4"> @</span><span style="color:#9cdcfe">input</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#dcdcaa">changeCount</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goods_id</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">$event</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goods_sku_id</span><span style="color:#d4d4d4">)</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> :</span><span style="color:#9cdcfe">value</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goods_num</span><span style="color:#d4d4d4">"</span><span style="color:grey">&gt;&lt;/</span><span style="color:#569cd6">CountBox</span><span style="color:grey">&gt;</span></span></code></pre></div></div></figure><p>给结算按钮添加绑定事件</p><figure class="shiki vue"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">v-if</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#569cd6">true</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"goPay"</span><span style="color:#d4d4d4"> @</span><span style="color:#9cdcfe">click</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">goPay</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> :</span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4">{</span><span style="color:#c8c8c8">disabled</span><span style="color:#d4d4d4">: </span><span style="color:#9cdcfe">selectedCartCount</span><span style="color:#d4d4d4"> === </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">}</span><span style="color:#d4d4d4">"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">结算({{selectedCartCount}})</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span></code></pre></div></div></figure><p>methods 中提供相对应的方法</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">changeCount</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">goodsId</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">e</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">goodsSkuId</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">obj</span><span style="color:#d4d4d4"> = {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">goodsId:</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">goodsId</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">goodsNum:</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">e</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">goodsSkuId:</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">goodsSkuId</span></span>
<span class="line"><span style="color:#d4d4d4">      }</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">$store</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">commit</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'Cart/changeCount'</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">obj</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">    },</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">goPay</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 先触发购物车与后台数据的同步</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">$store</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">dispatch</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'Cart/syncCartAction'</span><span style="color:#d4d4d4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 触发真正的结算</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span></code></pre></div></div></figure><p>真正的结算待做。</p><h3 id="编辑切换状态删除功能"><a class="markdownIt-Anchor" href="#编辑切换状态删除功能"></a> 编辑切换状态，删除功能</h3><p>点击编辑按钮，结算按钮变为删除按钮。</p><p>给购物车页面提供一个数据用于标识是否处于编辑状态</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">data</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">isEdit:</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">false</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">},</span></span></code></pre></div></div></figure><p>并监视其状态</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#c8c8c8">watch</span><span style="color:#d4d4d4">: {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#dcdcaa">isEdit</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">val</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#c586c0">if</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">val</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 说明进入编辑状态</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">$store</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">commit</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'Cart/allToggle'</span><span style="color:#d4d4d4">, </span><span style="color:#569cd6">false</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">    } </span><span style="color:#c586c0">else</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 说明退出编辑状态</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">$store</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">commit</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'Cart/allToggle'</span><span style="color:#d4d4d4">, </span><span style="color:#569cd6">true</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span></code></pre></div></div></figure><p>相对应的对 template 中结算按钮和编辑按钮进行修改</p><figure class="shiki vue"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"edit"</span><span style="color:#d4d4d4"> @</span><span style="color:#9cdcfe">click</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">isEdit</span><span style="color:#d4d4d4"> = !</span><span style="color:#9cdcfe">isEdit</span><span style="color:#d4d4d4">"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  &lt;van-icon name="edit" /&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  编辑</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">...</span></span>
<span class="line"></span>
<span class="line"><span style="color:grey">&lt;</span><span style="color:#d4d4d4">/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">	&lt;div v-if="!isEdit" class="goPay" @click="goPay" :class="{disabled: selectedCartCount === 0}"&gt;结算({{selectedCartCount}})</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span></code></pre></div></div></figure><p>删除功能待做。</p><h3 id="删除商品"><a class="markdownIt-Anchor" href="#删除商品"></a> 删除商品</h3><p>封装接口模块 <code>api/cart.js</code></p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#6a9955">// 删除购物车商品</span></span>
<span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">deleteSelected</span><span style="color:#d4d4d4"> = (</span><span style="color:#9cdcfe">cartIds</span><span style="color:#d4d4d4">) </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> { </span><span style="color:#6a9955">// cartIds: 要删除的商品id数组</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">request</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">post</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'/cart/clear'</span><span style="color:#d4d4d4">, {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">cartIds</span></span>
<span class="line"><span style="color:#d4d4d4">  })</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span></code></pre></div></div></figure><p>vuex 子模块 Cart 提供异步方法</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#6a9955">// 删除选中的商品</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">async</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">delSelCartA</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">context</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 获取选中的商品id然后进行删除</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">ids</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">context</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">getters</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">selectedCartList</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">map</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">id</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// console.log(ids)</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#dcdcaa">deleteSelected</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">ids</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#dcdcaa">Toast</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'删除成功'</span><span style="color:#d4d4d4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 删除后重新拉取购物车数据</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">context</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">dispatch</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'getCartAction'</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span></code></pre></div></div></figure><p>接着修复了一些小 bug：商品详情页初始不显示购物车数量、添加到购物车之后数量不会自动更新、购物车页面编辑状态退出后按钮未恢复到结算按钮。下面是修复后的 <code>store/modules/cart.js</code> 和 <code>views/productdetail.vue</code></p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#c586c0">import</span><span style="color:#d4d4d4"> { </span><span style="color:#9cdcfe">getCartList</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">updateCart</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">deleteSelected</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">addCart</span><span style="color:#d4d4d4"> } </span><span style="color:#c586c0">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'@/api/cart'</span></span>
<span class="line"><span style="color:#c586c0">import</span><span style="color:#d4d4d4"> { </span><span style="color:#9cdcfe">Toast</span><span style="color:#d4d4d4"> } </span><span style="color:#c586c0">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'vant'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">default</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">namespaced:</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">true</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#dcdcaa">state</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 提供一个数组用于存储购物车列表</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">cartList:</span><span style="color:#d4d4d4"> []</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">mutations:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 提供方法可以设置购物车列表</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">setCartList</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">newCartList</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">cartList</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">newCartList</span></span>
<span class="line"><span style="color:#d4d4d4">    },</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 修改商品选中状态</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">toggleChecked</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">id</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 遍历购物车列表，找到对应id的商品，修改其选中状态</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">cartList</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">forEach</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#c586c0">if</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goods_id</span><span style="color:#d4d4d4"> === </span><span style="color:#9cdcfe">id</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">isChecked</span><span style="color:#d4d4d4"> = !</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">isChecked</span></span>
<span class="line"><span style="color:#d4d4d4">        }</span></span>
<span class="line"><span style="color:#d4d4d4">      })</span></span>
<span class="line"><span style="color:#d4d4d4">    },</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 全选和反选</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">allToggle</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">flag</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 遍历购物车列表，修改所有商品的选中状态</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">cartList</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">forEach</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">isChecked</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">flag</span></span>
<span class="line"><span style="color:#d4d4d4">      })</span></span>
<span class="line"><span style="color:#d4d4d4">    },</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 改变商品数量</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">changeCount</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">obj</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 遍历购物车列表，找到对应id的商品，修改其数量</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> { </span><span style="color:#4fc1ff">goodsId</span><span style="color:#d4d4d4">, </span><span style="color:#4fc1ff">goodsNum</span><span style="color:#d4d4d4">, </span><span style="color:#4fc1ff">goodsSkuId</span><span style="color:#d4d4d4"> } = </span><span style="color:#9cdcfe">obj</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">cartList</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">forEach</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#c586c0">if</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goods_id</span><span style="color:#d4d4d4"> === </span><span style="color:#9cdcfe">goodsId</span><span style="color:#d4d4d4"> &amp;&amp; </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goods_sku_id</span><span style="color:#d4d4d4"> === </span><span style="color:#9cdcfe">goodsSkuId</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goods_num</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">goodsNum</span></span>
<span class="line"><span style="color:#d4d4d4">        }</span></span>
<span class="line"><span style="color:#d4d4d4">      })</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">actions:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 添加商品到购物车</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">async</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">addCartAction</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">context</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">obj</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 先判断是否已经存在该商品，如果存在，则只修改商品数量</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> { </span><span style="color:#4fc1ff">goodsId</span><span style="color:#d4d4d4">, </span><span style="color:#4fc1ff">goodsNum</span><span style="color:#d4d4d4">, </span><span style="color:#4fc1ff">goodsSkuId</span><span style="color:#d4d4d4"> } = </span><span style="color:#9cdcfe">obj</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">context</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">cartList</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">forEach</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#c586c0">if</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goods_id</span><span style="color:#d4d4d4"> === </span><span style="color:#9cdcfe">goodsId</span><span style="color:#d4d4d4"> &amp;&amp; </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goods_sku_id</span><span style="color:#d4d4d4"> === </span><span style="color:#9cdcfe">goodsSkuId</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goods_num</span><span style="color:#d4d4d4"> += </span><span style="color:#9cdcfe">goodsNum</span></span>
<span class="line"><span style="color:#d4d4d4">        }</span></span>
<span class="line"><span style="color:#d4d4d4">      })</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 如果不存在，则添加到购物车列表</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">await</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">addCart</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">goodsId</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">goodsNum</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">goodsSkuId</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">await</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">context</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">dispatch</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'getCartAction'</span><span style="color:#d4d4d4">) </span><span style="color:#6a9955">// 重新拉取购物车信息</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#dcdcaa">Toast</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'添加成功'</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">    },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 异步获取购物车列表</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">async</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">getCartAction</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">context</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> { </span><span style="color:#4fc1ff">data</span><span style="color:#d4d4d4"> } = </span><span style="color:#c586c0">await</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">getCartList</span><span style="color:#d4d4d4">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 由于后台返回数据中不包括是否选中的状态，所以本地自己维护，给每一项添加上被选中的状态</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">data</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">list</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">forEach</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">element</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">element</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">isChecked</span><span style="color:#d4d4d4"> = </span><span style="color:#569cd6">true</span></span>
<span class="line"><span style="color:#d4d4d4">      })</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">context</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">commit</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'setCartList'</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">data</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">list</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">    },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 将本地购物车列表同步到服务器（结算或者离开购物车页面立刻同步）</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">async</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">syncCartAction</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">context</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 接口只接受三个参数：goodsId、goodsNum、goodsSkuId，所以需要遍历本地购物车列表，将选中的商品拆分为三个参数</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">paramsObj</span><span style="color:#d4d4d4"> = {}</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">context</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">cartList</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">forEach</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#c586c0">if</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">isChecked</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">paramsObj</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goodsId</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goods_id</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">paramsObj</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goodsNum</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goods_num</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">paramsObj</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goodsSkuId</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goods_sku_id</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#dcdcaa">updateCart</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">paramsObj</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">        }</span></span>
<span class="line"><span style="color:#d4d4d4">      })</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// console.log(paramsObj)</span></span>
<span class="line"><span style="color:#d4d4d4">    },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 删除选中的商品</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">async</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">delSelCartA</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">context</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 获取选中的商品id然后进行删除</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">ids</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">context</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">getters</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">selectedCartList</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">map</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">id</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// console.log(ids)</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#dcdcaa">deleteSelected</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">ids</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#dcdcaa">Toast</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'删除成功'</span><span style="color:#d4d4d4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 删除后重新拉取购物车数据</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">context</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">dispatch</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'getCartAction'</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">getters:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 求所有的商品累加总数</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">countCartTotal</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">cartList</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">reduce</span><span style="color:#d4d4d4">((</span><span style="color:#9cdcfe">sum</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">index</span><span style="color:#d4d4d4">) </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">sum</span><span style="color:#d4d4d4"> + </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goods_num</span><span style="color:#d4d4d4">, </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">    },</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 选中的商品项目</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">selectedCartList</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// filter只会接收回调结果为true的元素，所以可以不用做其他判断</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">cartList</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">filter</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">isChecked</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">    },</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 选中的商品项目数量</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">selectedCartCount</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">getters</span><span style="color:#d4d4d4">) { </span><span style="color:#6a9955">// 这里的getters可以获取到上面定义的getters</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">Array</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">isArray</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">getters</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">selectedCartList</span><span style="color:#d4d4d4">) ? </span><span style="color:#9cdcfe">getters</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">selectedCartList</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">reduce</span><span style="color:#d4d4d4">((</span><span style="color:#9cdcfe">sum</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">index</span><span style="color:#d4d4d4">) </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">sum</span><span style="color:#d4d4d4"> + </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goods_num</span><span style="color:#d4d4d4">, </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">) : </span><span style="color:#b5cea8">0</span></span>
<span class="line"><span style="color:#d4d4d4">    },</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 选中的商品总价</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">selectedPrice</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">getters</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// toFixed(2) 保留两位小数</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">Array</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">isArray</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">getters</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">selectedCartList</span><span style="color:#d4d4d4">) ? </span><span style="color:#9cdcfe">getters</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">selectedCartList</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">reduce</span><span style="color:#d4d4d4">((</span><span style="color:#9cdcfe">sum</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">index</span><span style="color:#d4d4d4">) </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">sum</span><span style="color:#d4d4d4"> + </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goods_num</span><span style="color:#d4d4d4"> * </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goods</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goods_price_min</span><span style="color:#d4d4d4">, </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">).</span><span style="color:#dcdcaa">toFixed</span><span style="color:#d4d4d4">(</span><span style="color:#b5cea8">2</span><span style="color:#d4d4d4">) : </span><span style="color:#b5cea8">0</span></span>
<span class="line"><span style="color:#d4d4d4">    },</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 是否全选</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">isAllChecked</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// every返回true，说明数组中每一项都为true，否则为false</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">cartList</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">every</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">isChecked</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span></code></pre></div></div></figure><p>商品详情页增加：</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#c586c0">import</span><span style="color:#d4d4d4"> { </span><span style="color:#9cdcfe">mapGetters</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">mapActions</span><span style="color:#d4d4d4"> } </span><span style="color:#c586c0">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'vuex'</span><span style="color:#d4d4d4">  </span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">...</span></span>
<span class="line"><span style="color:#c8c8c8">computed</span><span style="color:#d4d4d4">: {</span></span>
<span class="line"><span style="color:#d4d4d4">    ...</span><span style="color:#dcdcaa">mapGetters</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'Cart'</span><span style="color:#d4d4d4">, [</span><span style="color:#ce9178">'countCartTotal'</span><span style="color:#d4d4d4">]),</span></span>
<span class="line"><span style="color:#d4d4d4">    ...</span><span style="color:#dcdcaa">mapActions</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'Cart'</span><span style="color:#d4d4d4">, [</span><span style="color:#ce9178">'getCartAction'</span><span style="color:#d4d4d4">]),</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">detailId</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">$route</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">params</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">id</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">    </span></span>
<span class="line"><span style="color:#d4d4d4">...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569cd6">let</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">match</span><span style="color:#d4d4d4">  </span><span style="color:#6a9955">// 此为created内</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#c586c0">while</span><span style="color:#d4d4d4"> ((</span><span style="color:#9cdcfe">match</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">regex</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">exec</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">htmlString</span><span style="color:#d4d4d4">)) !== </span><span style="color:#569cd6">null</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">srcArray</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">push</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">match</span><span style="color:#d4d4d4">[</span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">]) </span><span style="color:#6a9955">// 将匹配到的 src URL 添加到数组中</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">imgSrcArray</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">srcArray</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// console.log(this.imgSrcArray) // 输出结果数组</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 异步获取购物车列表</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#c586c0">await</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">getCartAction</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 获取购物车商品总数</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">cartTotal</span><span style="color:#d4d4d4"> = </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">countCartTotal</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// console.log(this.cartTotal)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a9955">// 说明有token，可以直接加入购物车</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">obj</span><span style="color:#d4d4d4"> = { </span><span style="color:#6a9955">// 此为添加到购物车的点击事件</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">goodsId:</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">detailId</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">goodsNum:</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">addCount</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">goodsSkuId:</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goodsSkuId</span></span>
<span class="line"><span style="color:#d4d4d4">      }</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">$store</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">dispatch</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'Cart/addCartAction'</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">obj</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 获取购物车商品总数</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">cartTotal</span><span style="color:#d4d4d4"> = </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">countCartTotal</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">$toast</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'加入购物车成功！'</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">showPannel</span><span style="color:#d4d4d4"> = </span><span style="color:#569cd6">false</span><span style="color:#d4d4d4"> </span><span style="color:#6a9955">// 关闭弹层</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">...</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#c8c8c8">watch</span><span style="color:#d4d4d4">: {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 监听 countCartTotal 的变化，自动更新 cartTotal</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">countCartTotal</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">newVal</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">cartTotal</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">newVal</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span></code></pre></div></div></figure><h3 id="空购物车处理"><a class="markdownIt-Anchor" href="#空购物车处理"></a> 空购物车处理</h3><p>将除标题以外的盒子用大盒子包裹起来：</p><figure class="shiki vue"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">template</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"cart"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-nav-bar</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">title</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"购物车"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">fixed</span><span style="color:#d4d4d4"> /</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">&lt;!-- 判断登录，且购物车列表不为空才渲染 --&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">v-if</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">isLogin</span><span style="color:#d4d4d4"> &amp;&amp; </span><span style="color:#9cdcfe">cartList</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">length</span><span style="color:#d4d4d4"> &gt; </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    ...  </span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">&lt;!-- 未登录或购物车列表为空时渲染提示页面 --&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-empty</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">v-else</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">description</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"空空如也，快去逛逛吧~"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-button</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">round</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">type</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"danger"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"bottom-button"</span><span style="color:#d4d4d4"> @</span><span style="color:#9cdcfe">click</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">$router</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">push</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'/home'</span><span style="color:#d4d4d4">)</span><span style="color:#d4d4d4">"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">去逛逛</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">van-button</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">van-empty</span><span style="color:grey">&gt;</span></span></code></pre></div></div></figure><p>并提供计算属性</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">isLogin</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">$store</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">getters</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">token</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span></code></pre></div></div></figure><p>并引入对应 Empty 组件的 css 样式</p><figure class="shiki css"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#d7ba7d">.bottom-button</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">width</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">160px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">40px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span></code></pre></div></div></figure><h2 id="地址管理"><a class="markdownIt-Anchor" href="#地址管理"></a> 地址管理</h2><blockquote><p>地址选择里面涉及到一个地区选择器，可以自行定义数据也可以使用官方的数据。可以参考：Vant 使用 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://blog.csdn.net/qq_51055690/article/details/126281265">Vant Area Data</a></p></blockquote><h3 id="配置"><a class="markdownIt-Anchor" href="#配置"></a> 配置</h3><p>封装 api 接口：<code>api/address.js</code></p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#c586c0">import</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">request</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'@/utils/request'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a9955">// 获取地址列表</span></span>
<span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">getAddressList</span><span style="color:#d4d4d4"> = () </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">request</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">get</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'/address/list'</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a9955">// 获取某个地址的详情</span></span>
<span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">getAddressDetail</span><span style="color:#d4d4d4"> = (</span><span style="color:#9cdcfe">addressId</span><span style="color:#d4d4d4">) </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">request</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">get</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'/address/detail'</span><span style="color:#d4d4d4">, {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">params:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">addressId:</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">addressId</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  })</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a9955">// 添加收货地址</span></span>
<span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">addAddress</span><span style="color:#d4d4d4"> = (</span><span style="color:#9cdcfe">dataObj</span><span style="color:#d4d4d4">) </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#6a9955">// console.log('api_dataObj', dataObj)</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#6a9955">// 直接使用dataObj中的数据</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">request</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">post</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'/address/add'</span><span style="color:#d4d4d4">, {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">form:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">name:</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">dataObj</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">name</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">phone:</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">dataObj</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">phone</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">region:</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">dataObj</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">region</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">detail:</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">dataObj</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">detail</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  })</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a9955">// 更新收货地址</span></span>
<span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">updateAddress</span><span style="color:#d4d4d4"> = (</span><span style="color:#9cdcfe">dataObj</span><span style="color:#d4d4d4">) </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#6a9955">// 直接使用dataObj中的数据</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">request</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">post</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'/address/edit'</span><span style="color:#d4d4d4">, {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">addressId:</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">dataObj</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">address_id</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">form:</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">dataObj</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">form</span></span>
<span class="line"><span style="color:#d4d4d4">  })</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a9955">// 设置默认地址</span></span>
<span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">setDefaultAddress</span><span style="color:#d4d4d4"> = (</span><span style="color:#9cdcfe">addressId</span><span style="color:#d4d4d4">) </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">request</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">post</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'/address/setDefault'</span><span style="color:#d4d4d4">, { </span><span style="color:#9cdcfe">addressId</span><span style="color:#d4d4d4"> })</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a9955">// 删除收货地址</span></span>
<span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">deleteAddress</span><span style="color:#d4d4d4"> = (</span><span style="color:#9cdcfe">addressId</span><span style="color:#d4d4d4">) </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">request</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">post</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'/address/remove'</span><span style="color:#d4d4d4">, { </span><span style="color:#9cdcfe">addressId</span><span style="color:#d4d4d4"> })</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span></code></pre></div></div></figure><p>Vuex 子模块：<code>store/modules/address.js</code></p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#c586c0">import</span><span style="color:#d4d4d4"> { </span><span style="color:#9cdcfe">getAddressList</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">updateAddress</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">deleteAddress</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">getAddressDetail</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">addAddress</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">setDefaultAddress</span><span style="color:#d4d4d4"> } </span><span style="color:#c586c0">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'@/api/address'</span></span>
<span class="line"><span style="color:#6a9955">// import {Toast} from 'vant'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">default</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">namespaced:</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">true</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#dcdcaa">state</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">AddressList:</span><span style="color:#d4d4d4"> [],</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 初始化时从 localStorage 中获取默认地址 ID</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">defaultAddressId:</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">localStorage</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">getItem</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'defaultAddressId'</span><span style="color:#d4d4d4">) || </span><span style="color:#ce9178">''</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">mutations:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 编辑地址</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">editAddress</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">newAddress</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">AddressList</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">newAddress</span></span>
<span class="line"><span style="color:#d4d4d4">    },</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 更新默认地址的 ID 并保存到 localStorage</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">setDefaultAddressId</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">addressId</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">defaultAddressId</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">addressId</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">localStorage</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">setItem</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'defaultAddressId'</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">addressId</span><span style="color:#d4d4d4">) </span><span style="color:#6a9955">// 保存到 localStorage</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">actions:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 获取地址列表</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">async</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">getAddressList</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> { </span><span style="color:#4fc1ff">data</span><span style="color:#d4d4d4"> } = </span><span style="color:#c586c0">await</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">getAddressList</span><span style="color:#d4d4d4">()</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">data</span></span>
<span class="line"><span style="color:#d4d4d4">    },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 获取某个地址的详情</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">async</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">getAddressDetail</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">context</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">addressId</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">if</span><span style="color:#d4d4d4"> (!</span><span style="color:#9cdcfe">addressId</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#c586c0">throw</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">new</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">Error</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'Address ID is required'</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">      }</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// console.log('getAddressDetail被调用，addressId：', addressId)</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">data</span><span style="color:#d4d4d4"> = </span><span style="color:#c586c0">await</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">getAddressDetail</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">addressId</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// console.log('getAddressDetail返回的数据：', data)</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">data</span></span>
<span class="line"><span style="color:#d4d4d4">    },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 添加地址</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">async</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">addAddress</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">context</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">dataObj</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">console</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">log</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'vuex_dataObj:'</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">dataObj</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">res</span><span style="color:#d4d4d4"> = </span><span style="color:#c586c0">await</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">addAddress</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">dataObj</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">if</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">res</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">status</span><span style="color:#d4d4d4"> === </span><span style="color:#b5cea8">200</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#6a9955">// 成功后，重新通过上面的actions方法拉取地址列表</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">context</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">dispatch</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'getAddressList'</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">      }</span></span>
<span class="line"><span style="color:#d4d4d4">    },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 设置默认地址(无用的接口，设置后拉取列表，其中不包含默认地址是否设置的状态)</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">async</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">setDefaultAddress</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">context</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">addressId</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 发送请求</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">await</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">setDefaultAddress</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">addressId</span><span style="color:#d4d4d4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 成功后，重新拉取地址列表</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#dcdcaa">getAddressList</span><span style="color:#d4d4d4">()</span></span>
<span class="line"><span style="color:#d4d4d4">    },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 更新地址</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">async</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">updateAddress</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">context</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">dataObj</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 发送更新请求</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">await</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">updateAddress</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">dataObj</span><span style="color:#d4d4d4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 更新之后，重新拉取地址列表</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#dcdcaa">getAddressList</span><span style="color:#d4d4d4">()</span></span>
<span class="line"><span style="color:#d4d4d4">    },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 删除地址</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">async</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">deleteAddress</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">context</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">addressId</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 发送删除请求</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">await</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">deleteAddress</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">addressId</span><span style="color:#d4d4d4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 删除成功后，重新拉取地址列表</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#dcdcaa">getAddressList</span><span style="color:#d4d4d4">()</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">getters:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 获取默认地址 ID（优先从 Vuex 中获取，否则从 localStorage 中获取）</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">getDefaultAddressId</span><span style="color:#9cdcfe">:</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">) </span><span style="color:#569cd6">=&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">defaultAddressId</span><span style="color:#d4d4d4"> || </span><span style="color:#9cdcfe">localStorage</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">getItem</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'defaultAddressId'</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span></code></pre></div></div></figure><p>Vuex 子模块 addressMap 处理引入的 vant 官方地区数据：<code>store/modules/addressMap.js</code></p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#c586c0">import</span><span style="color:#d4d4d4"> { </span><span style="color:#9cdcfe">areaList</span><span style="color:#d4d4d4"> } </span><span style="color:#c586c0">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'@vant/area-data'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">state</span><span style="color:#d4d4d4"> = {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#6a9955">// 代码到名称的映射</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">codeToNameMap:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">provinceMap:</span><span style="color:#d4d4d4"> {},</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">cityMap:</span><span style="color:#d4d4d4"> {},</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">countyMap:</span><span style="color:#d4d4d4"> {}</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#6a9955">// 名称到代码的映射</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">nameToCodeMap:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">provinceMap:</span><span style="color:#d4d4d4"> {},</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">cityMap:</span><span style="color:#d4d4d4"> {},</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">countyMap:</span><span style="color:#d4d4d4"> {}</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">getters</span><span style="color:#d4d4d4"> = {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#6a9955">// 根据名称获取代码</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#dcdcaa">nameToCode</span><span style="color:#9cdcfe">:</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">) </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">name</span><span style="color:#d4d4d4">) </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> (</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">nameToCodeMap</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">provinceMap</span><span style="color:#d4d4d4">[</span><span style="color:#9cdcfe">name</span><span style="color:#d4d4d4">] ||</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">nameToCodeMap</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">cityMap</span><span style="color:#d4d4d4">[</span><span style="color:#9cdcfe">name</span><span style="color:#d4d4d4">] ||</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">nameToCodeMap</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">countyMap</span><span style="color:#d4d4d4">[</span><span style="color:#9cdcfe">name</span><span style="color:#d4d4d4">] ||</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">null</span></span>
<span class="line"><span style="color:#d4d4d4">    )</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#6a9955">// 根据代码获取名称</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#dcdcaa">codeToName</span><span style="color:#9cdcfe">:</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">) </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">code</span><span style="color:#d4d4d4">) </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> (</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">codeToNameMap</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">provinceMap</span><span style="color:#d4d4d4">[</span><span style="color:#9cdcfe">code</span><span style="color:#d4d4d4">] ||</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">codeToNameMap</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">cityMap</span><span style="color:#d4d4d4">[</span><span style="color:#9cdcfe">code</span><span style="color:#d4d4d4">] ||</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">codeToNameMap</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">countyMap</span><span style="color:#d4d4d4">[</span><span style="color:#9cdcfe">code</span><span style="color:#d4d4d4">] ||</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">null</span></span>
<span class="line"><span style="color:#d4d4d4">    )</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">mutations</span><span style="color:#d4d4d4"> = {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#dcdcaa">SET_CODE_TO_NAME_MAP</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">, { </span><span style="color:#9cdcfe">map</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">type</span><span style="color:#d4d4d4"> }) {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">codeToNameMap</span><span style="color:#d4d4d4">[</span><span style="color:#9cdcfe">type</span><span style="color:#d4d4d4">] = </span><span style="color:#9cdcfe">map</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#dcdcaa">SET_NAME_TO_CODE_MAP</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">, { </span><span style="color:#9cdcfe">map</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">type</span><span style="color:#d4d4d4"> }) {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">nameToCodeMap</span><span style="color:#d4d4d4">[</span><span style="color:#9cdcfe">type</span><span style="color:#d4d4d4">] = </span><span style="color:#9cdcfe">map</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">actions</span><span style="color:#d4d4d4"> = {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#6a9955">// 构建映射表</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#dcdcaa">buildReverseMaps</span><span style="color:#d4d4d4"> ({ </span><span style="color:#9cdcfe">commit</span><span style="color:#d4d4d4"> }) {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">provinceCodeToNameMap</span><span style="color:#d4d4d4"> = </span><span style="color:#dcdcaa">buildCodeToNameMap</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">areaList</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">province_list</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">cityCodeToNameMap</span><span style="color:#d4d4d4"> = </span><span style="color:#dcdcaa">buildCodeToNameMap</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">areaList</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">city_list</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">countyCodeToNameMap</span><span style="color:#d4d4d4"> = </span><span style="color:#dcdcaa">buildCodeToNameMap</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">areaList</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">county_list</span><span style="color:#d4d4d4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">provinceNameToCodeMap</span><span style="color:#d4d4d4"> = </span><span style="color:#dcdcaa">buildNameToCodeMap</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">areaList</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">province_list</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">cityNameToCodeMap</span><span style="color:#d4d4d4"> = </span><span style="color:#dcdcaa">buildNameToCodeMap</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">areaList</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">city_list</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">countyNameToCodeMap</span><span style="color:#d4d4d4"> = </span><span style="color:#dcdcaa">buildNameToCodeMap</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">areaList</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">county_list</span><span style="color:#d4d4d4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">commit</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'SET_CODE_TO_NAME_MAP'</span><span style="color:#d4d4d4">, { </span><span style="color:#9cdcfe">map:</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">provinceCodeToNameMap</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">type:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'provinceMap'</span><span style="color:#d4d4d4"> })</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">commit</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'SET_CODE_TO_NAME_MAP'</span><span style="color:#d4d4d4">, { </span><span style="color:#9cdcfe">map:</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">cityCodeToNameMap</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">type:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'cityMap'</span><span style="color:#d4d4d4"> })</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">commit</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'SET_CODE_TO_NAME_MAP'</span><span style="color:#d4d4d4">, { </span><span style="color:#9cdcfe">map:</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">countyCodeToNameMap</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">type:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'countyMap'</span><span style="color:#d4d4d4"> })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">commit</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'SET_NAME_TO_CODE_MAP'</span><span style="color:#d4d4d4">, { </span><span style="color:#9cdcfe">map:</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">provinceNameToCodeMap</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">type:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'provinceMap'</span><span style="color:#d4d4d4"> })</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">commit</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'SET_NAME_TO_CODE_MAP'</span><span style="color:#d4d4d4">, { </span><span style="color:#9cdcfe">map:</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">cityNameToCodeMap</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">type:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'cityMap'</span><span style="color:#d4d4d4"> })</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">commit</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'SET_NAME_TO_CODE_MAP'</span><span style="color:#d4d4d4">, { </span><span style="color:#9cdcfe">map:</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">countyNameToCodeMap</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">type:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'countyMap'</span><span style="color:#d4d4d4"> })</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a9955">// 构建代码到名称的映射</span></span>
<span class="line"><span style="color:#569cd6">function</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">buildCodeToNameMap</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">list</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">map</span><span style="color:#d4d4d4"> = {}</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">Object</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">keys</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">list</span><span style="color:#d4d4d4">).</span><span style="color:#dcdcaa">forEach</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">code</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">map</span><span style="color:#d4d4d4">[</span><span style="color:#9cdcfe">code</span><span style="color:#d4d4d4">] = </span><span style="color:#9cdcfe">list</span><span style="color:#d4d4d4">[</span><span style="color:#9cdcfe">code</span><span style="color:#d4d4d4">] </span><span style="color:#6a9955">// 代码作为键，名称作为值</span></span>
<span class="line"><span style="color:#d4d4d4">  })</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">map</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a9955">// 构建名称到代码的映射</span></span>
<span class="line"><span style="color:#569cd6">function</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">buildNameToCodeMap</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">list</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">map</span><span style="color:#d4d4d4"> = {}</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">Object</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">keys</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">list</span><span style="color:#d4d4d4">).</span><span style="color:#dcdcaa">forEach</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">code</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">map</span><span style="color:#d4d4d4">[</span><span style="color:#9cdcfe">list</span><span style="color:#d4d4d4">[</span><span style="color:#9cdcfe">code</span><span style="color:#d4d4d4">]] = </span><span style="color:#9cdcfe">code</span><span style="color:#d4d4d4"> </span><span style="color:#6a9955">// 名称作为键，代码作为值</span></span>
<span class="line"><span style="color:#d4d4d4">  })</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">map</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">default</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">namespaced:</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">true</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">getters</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">mutations</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">actions</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span></code></pre></div></div></figure><p>配置路由并新增守卫规则：<code>router/index.js</code></p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#c586c0">import</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">Address</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'@/views/address/index.vue'</span></span>
<span class="line"><span style="color:#c586c0">import</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">AddressEdit</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'@/views/address/edit.vue'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">  { </span><span style="color:#c8c8c8">path</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">'/address/manage'</span><span style="color:#d4d4d4">, </span><span style="color:#c8c8c8">component</span><span style="color:#d4d4d4">: </span><span style="color:#9cdcfe">Address</span><span style="color:#d4d4d4"> },</span></span>
<span class="line"><span style="color:#d4d4d4">  { </span><span style="color:#c8c8c8">path</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">'/address/edit'</span><span style="color:#d4d4d4">, </span><span style="color:#c8c8c8">component</span><span style="color:#d4d4d4">: </span><span style="color:#9cdcfe">AddressEdit</span><span style="color:#d4d4d4"> },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span></span>
<span class="line"><span style="color:#d4d4d4">...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a9955">// 定义数组存储需要登录才能访问的路由</span></span>
<span class="line"><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">authNeedRouters</span><span style="color:#d4d4d4"> = [</span><span style="color:#ce9178">'/myorder'</span><span style="color:#d4d4d4">, </span><span style="color:#ce9178">'/pay'</span><span style="color:#d4d4d4">, </span><span style="color:#ce9178">'/address'</span><span style="color:#d4d4d4">, </span><span style="color:#ce9178">'/address/edit'</span><span style="color:#d4d4d4">, </span><span style="color:#ce9178">'/address/manage'</span><span style="color:#d4d4d4">]</span></span></code></pre></div></div></figure><h3 id="地址列表"><a class="markdownIt-Anchor" href="#地址列表"></a> 地址列表</h3><p>地址列表代码：<code>views/address/index.vue</code></p><figure class="shiki vue"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">template</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"address-list"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-nav-bar</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">fixed</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">title</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"地址列表"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">left-arrow</span><span style="color:#d4d4d4"> @</span><span style="color:#9cdcfe">click-left</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">$router</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">go</span><span style="color:#d4d4d4">(-</span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">)</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> /</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">v-if</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">list</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">length</span><span style="color:#d4d4d4"> &gt; </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">&lt;!-- 用于区分的文字 --&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"address-list-header"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">p</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"header-text"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">请选择或管理收货地址</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">p</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">&lt;!-- 地址列表 --&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-address-list</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">v-model</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">chosenAddressId</span><span style="color:#d4d4d4">"</span></span>
<span class="line"><span style="color:#d4d4d4">        :</span><span style="color:#9cdcfe">switchable</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#569cd6">true</span><span style="color:#d4d4d4">"</span></span>
<span class="line"><span style="color:#d4d4d4">        :</span><span style="color:#9cdcfe">list</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">list</span><span style="color:#d4d4d4">"</span></span>
<span class="line"><span style="color:#d4d4d4">        :</span><span style="color:#9cdcfe">disabled-list</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">disabledList</span><span style="color:#d4d4d4">"</span></span>
<span class="line"><span style="color:#d4d4d4">        :</span><span style="color:#9cdcfe">disabled-text</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">disabledText</span><span style="color:#d4d4d4">"</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">default-tag-text</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"默认"</span></span>
<span class="line"><span style="color:#d4d4d4">        @</span><span style="color:#9cdcfe">add</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">onAdd</span><span style="color:#d4d4d4">"</span></span>
<span class="line"><span style="color:#d4d4d4">        @</span><span style="color:#9cdcfe">edit</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">onEdit</span><span style="color:#d4d4d4">"</span></span>
<span class="line"><span style="color:#d4d4d4">      /</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-empty</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">v-else</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">description</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"空空如也"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-button</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">round</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">type</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"danger"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"bottom-button"</span><span style="color:#d4d4d4"> @</span><span style="color:#9cdcfe">click</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">onAdd</span><span style="color:#d4d4d4">"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">添加地址</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">van-button</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">van-empty</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">template</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">script</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#c586c0">import</span><span style="color:#d4d4d4"> { </span><span style="color:#9cdcfe">Toast</span><span style="color:#d4d4d4"> } </span><span style="color:#c586c0">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'vant'</span></span>
<span class="line"><span style="color:#c586c0">import</span><span style="color:#d4d4d4"> { </span><span style="color:#9cdcfe">mapActions</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">mapGetters</span><span style="color:#d4d4d4"> } </span><span style="color:#c586c0">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'vuex'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">default</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">name:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'AddressList'</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#dcdcaa">data</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 默认选中的地址id</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">chosenAddressId:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">''</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 地址列表</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">list:</span><span style="color:#d4d4d4"> [],</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 禁用状态的地址列表（超出快递范围）</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">disabledList:</span><span style="color:#d4d4d4"> []</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">computed:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    ...</span><span style="color:#dcdcaa">mapGetters</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'AddressMap'</span><span style="color:#d4d4d4">, [</span><span style="color:#ce9178">'codeToName'</span><span style="color:#d4d4d4">]),</span></span>
<span class="line"><span style="color:#d4d4d4">    ...</span><span style="color:#dcdcaa">mapGetters</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'Address'</span><span style="color:#d4d4d4">, [</span><span style="color:#ce9178">'getDefaultAddressId'</span><span style="color:#d4d4d4">]),</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">disabledText</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">disabledList</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">length</span><span style="color:#d4d4d4"> &gt; </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4"> ? </span><span style="color:#ce9178">'以下地址超出配送范围'</span><span style="color:#d4d4d4"> : </span><span style="color:#ce9178">''</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#569cd6">async</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">created</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#c586c0">try</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 构建地区映射表</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">await</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">buildReverseMaps</span><span style="color:#d4d4d4">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 获取地址列表</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">response</span><span style="color:#d4d4d4"> = </span><span style="color:#c586c0">await</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">getAddressList</span><span style="color:#d4d4d4">()</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// console.log('获取地址列表成功：', response)</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">addressData</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">response</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">list</span><span style="color:#d4d4d4"> || []</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// console.log('地址数据：', addressData)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 格式化地址列表数据</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">list</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">addressData</span></span>
<span class="line"><span style="color:#d4d4d4">        .</span><span style="color:#dcdcaa">filter</span><span style="color:#d4d4d4">((</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">) </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> !</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">is_disabled</span><span style="color:#d4d4d4">) </span><span style="color:#6a9955">// 过滤掉禁用的地址</span></span>
<span class="line"><span style="color:#d4d4d4">        .</span><span style="color:#dcdcaa">map</span><span style="color:#d4d4d4">((</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">) </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> ({</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">id:</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">address_id</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">name:</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">name</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">tel:</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">phone</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">address:</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">formatAddress</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">),</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">isDefault:</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">is_default</span><span style="color:#d4d4d4"> || </span><span style="color:#569cd6">false</span></span>
<span class="line"><span style="color:#d4d4d4">        }))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 从Vuex中获取默认地址的id</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">defaultAddressId</span><span style="color:#d4d4d4"> = </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">getDefaultAddressId</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">console</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">log</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'默认地址id：'</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">defaultAddressId</span><span style="color:#d4d4d4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">if</span><span style="color:#d4d4d4"> (</span><span style="color:#dcdcaa">Number</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">defaultAddressId</span><span style="color:#d4d4d4">) !== -</span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#6a9955">// 遍历比对列表每一项的id是否与defaultAddressId相等，找到后返回索引（强等于比较，注意类型）</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">defaultIndex</span><span style="color:#d4d4d4"> = </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">list</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">findIndex</span><span style="color:#d4d4d4">((</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">) </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">Number</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">id</span><span style="color:#d4d4d4">) === </span><span style="color:#dcdcaa">Number</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">defaultAddressId</span><span style="color:#d4d4d4">))</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#c586c0">if</span><span style="color:#d4d4d4"> (</span><span style="color:#dcdcaa">Number</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">defaultIndex</span><span style="color:#d4d4d4">) !== -</span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#6a9955">// 找到后设置为默认地址</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">list</span><span style="color:#d4d4d4">[</span><span style="color:#9cdcfe">defaultIndex</span><span style="color:#d4d4d4">].</span><span style="color:#9cdcfe">isDefault</span><span style="color:#d4d4d4"> = </span><span style="color:#569cd6">true</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">chosenAddressId</span><span style="color:#d4d4d4"> = </span><span style="color:#dcdcaa">Number</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">defaultAddressId</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">        }</span></span>
<span class="line"><span style="color:#d4d4d4">      } </span><span style="color:#c586c0">else</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#6a9955">// Vuex没有默认地址，则默认选中第一个地址</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#dcdcaa">Toast</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'小主还没有默认地址哦</span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">快来设置一个吧❤️'</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">console</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">log</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'未找到有效的默认地址'</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">chosenAddressId</span><span style="color:#d4d4d4"> = </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">list</span><span style="color:#d4d4d4">[</span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">].</span><span style="color:#9cdcfe">id</span><span style="color:#d4d4d4"> || </span><span style="color:#ce9178">''</span></span>
<span class="line"><span style="color:#d4d4d4">      }</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 设置禁用的地址列表</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">disabledList</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">addressData</span></span>
<span class="line"><span style="color:#d4d4d4">        .</span><span style="color:#dcdcaa">filter</span><span style="color:#d4d4d4">((</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">) </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">is_disabled</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">        .</span><span style="color:#dcdcaa">map</span><span style="color:#d4d4d4">((</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">) </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> ({</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">id:</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">address_id</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">name:</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">name</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">tel:</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">phone</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">address:</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">formatAddress</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">),</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">isDefault:</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">is_default</span><span style="color:#d4d4d4"> || </span><span style="color:#569cd6">false</span></span>
<span class="line"><span style="color:#d4d4d4">        }))</span></span>
<span class="line"><span style="color:#d4d4d4">    } </span><span style="color:#c586c0">catch</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">error</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// console.error('获取地址列表失败：', error)</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">Toast</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">fail</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'获取地址列表失败'</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">methods:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    ...</span><span style="color:#dcdcaa">mapActions</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'Address'</span><span style="color:#d4d4d4">, [</span><span style="color:#ce9178">'getAddressList'</span><span style="color:#d4d4d4">]),</span></span>
<span class="line"><span style="color:#d4d4d4">    ...</span><span style="color:#dcdcaa">mapActions</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'AddressMap'</span><span style="color:#d4d4d4">, [</span><span style="color:#ce9178">'buildReverseMaps'</span><span style="color:#d4d4d4">]),</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 格式化地址：</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">formatAddress</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">provinceName</span><span style="color:#d4d4d4"> = </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">codeToName</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">province_id</span><span style="color:#d4d4d4">) || </span><span style="color:#ce9178">''</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">cityName</span><span style="color:#d4d4d4"> = </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">codeToName</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">city_id</span><span style="color:#d4d4d4">) || </span><span style="color:#ce9178">''</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">countyName</span><span style="color:#d4d4d4"> = </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">codeToName</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">county_id</span><span style="color:#d4d4d4">) || </span><span style="color:#ce9178">''</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">detailAddress</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">detail</span><span style="color:#d4d4d4"> || </span><span style="color:#ce9178">''</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">result</span><span style="color:#d4d4d4"> = </span><span style="color:#ce9178">`</span><span style="color:#569cd6">${</span><span style="color:#9cdcfe">provinceName</span><span style="color:#569cd6">}${</span><span style="color:#9cdcfe">cityName</span><span style="color:#569cd6">}${</span><span style="color:#9cdcfe">countyName</span><span style="color:#569cd6">}${</span><span style="color:#9cdcfe">detailAddress</span><span style="color:#569cd6">}</span><span style="color:#ce9178">`</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// console.log('codeToname：', this.codeToName(item.province_id))</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">result</span></span>
<span class="line"><span style="color:#d4d4d4">    },</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">onAdd</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">$router</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">push</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'/address/edit?adsid='</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">    },</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">onEdit</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// console.log('跳转到编辑：', item)</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">$router</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">push</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">`/address/edit?adsid=</span><span style="color:#569cd6">${</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">id</span><span style="color:#569cd6">}</span><span style="color:#ce9178">`</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">script</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">style</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">scoped</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">lang</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"less"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d7ba7d">.custom-nav-bar</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">background-color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#ffffff</span><span style="color:#d4d4d4">; </span><span style="color:#6a9955">// 导航栏背景色</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">50px</span><span style="color:#d4d4d4">; </span><span style="color:#6a9955">// 设置导航栏的高度</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">box-shadow</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">2px</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">rgba</span><span style="color:#d4d4d4">(</span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">, </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">, </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">, </span><span style="color:#b5cea8">0.1</span><span style="color:#d4d4d4">); </span><span style="color:#6a9955">// 添加阴影效果</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d7ba7d">.address-list</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">padding-top</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">60px</span><span style="color:#d4d4d4">; </span><span style="color:#6a9955">// 增加顶部内边距，以避免内容被导航栏遮挡</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d7ba7d">.address-list-header</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">padding</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">16px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">background-color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#f8f8f8</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d7ba7d">.header-text</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">16px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#333</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">text-align</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">left</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">margin</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a9955">/* 地址列表项样式 */</span></span>
<span class="line"><span style="color:#d7ba7d">.van-address-list__item</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">margin-bottom</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4">; </span><span style="color:#6a9955">// 每一项之间的间距</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">padding</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">16px</span><span style="color:#d4d4d4">; </span><span style="color:#6a9955">// 内边距，使内容不贴边</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">border</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">1px</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">solid</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">#ddd</span><span style="color:#d4d4d4">; </span><span style="color:#6a9955">// 边框颜色</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">border-radius</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">4px</span><span style="color:#d4d4d4">; </span><span style="color:#6a9955">// 圆角边框</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">background-color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#fff</span><span style="color:#d4d4d4">; </span><span style="color:#6a9955">// 背景色</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.van-cell__title</span><span style="color:#d4d4d4">, </span><span style="color:#d7ba7d">.van-cell__label</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">white-space</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">normal</span><span style="color:#d4d4d4">; </span><span style="color:#6a9955">// 允许内容换行</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">word-wrap</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">break-word</span><span style="color:#d4d4d4">; </span><span style="color:#6a9955">// 自动换行</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">word-break</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">break-all</span><span style="color:#d4d4d4">; </span><span style="color:#6a9955">// 长单词换行</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a9955">/* 禁用状态的地址项样式 */</span></span>
<span class="line"><span style="color:#d7ba7d">.van-address-list__item--disabled</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">background-color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#f5f5f5</span><span style="color:#d4d4d4">; </span><span style="color:#6a9955">// 禁用项的背景色</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#999</span><span style="color:#d4d4d4">; </span><span style="color:#6a9955">// 禁用项的文字颜色</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">style</span><span style="color:grey">&gt;</span></span></code></pre></div></div></figure><h3 id="地址编辑"><a class="markdownIt-Anchor" href="#地址编辑"></a> 地址编辑</h3><p>地址编辑可以是新建也可以是更新操作：<code>views/address/edit.vue</code></p><figure class="shiki vue"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">template</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#6a9955">&lt;!-- 可编辑也可以作为添加地址的页面 --&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"address-list"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-nav-bar</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">fixed</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">title</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"地址编辑"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">left-arrow</span><span style="color:#d4d4d4"> @</span><span style="color:#9cdcfe">click-left</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">$router</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">go</span><span style="color:#d4d4d4">(-</span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">)</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> /</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"address-edit"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-address-edit</span></span>
<span class="line"><span style="color:#d4d4d4">        :</span><span style="color:#9cdcfe">address-info</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">addressInfo</span><span style="color:#d4d4d4">"</span></span>
<span class="line"><span style="color:#d4d4d4">        :</span><span style="color:#9cdcfe">area-list</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">areaList</span><span style="color:#d4d4d4">"</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">show-delete</span></span>
<span class="line"><span style="color:#d4d4d4">        :</span><span style="color:#9cdcfe">show-set-default</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">adsId</span><span style="color:#d4d4d4"> != -</span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4"> ? </span><span style="color:#569cd6">true</span><span style="color:#d4d4d4"> : </span><span style="color:#569cd6">false</span><span style="color:#d4d4d4">"</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">show-search-result</span></span>
<span class="line"><span style="color:#d4d4d4">        :</span><span style="color:#9cdcfe">search-result</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">searchResult</span><span style="color:#d4d4d4">"</span></span>
<span class="line"><span style="color:#d4d4d4">        :</span><span style="color:#9cdcfe">area-columns-placeholder</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4">[</span><span style="color:#ce9178">'请选择'</span><span style="color:#d4d4d4">, </span><span style="color:#ce9178">'请选择'</span><span style="color:#d4d4d4">, </span><span style="color:#ce9178">'请选择'</span><span style="color:#d4d4d4">]</span><span style="color:#d4d4d4">"</span></span>
<span class="line"><span style="color:#d4d4d4">        :</span><span style="color:#9cdcfe">detail-maxlength</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#b5cea8">20</span><span style="color:#d4d4d4">"</span></span>
<span class="line"><span style="color:#d4d4d4">        @</span><span style="color:#9cdcfe">save</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">onSave</span><span style="color:#d4d4d4">"</span></span>
<span class="line"><span style="color:#d4d4d4">        @</span><span style="color:#9cdcfe">delete</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">onDelete</span><span style="color:#d4d4d4">"</span></span>
<span class="line"><span style="color:#d4d4d4">        @</span><span style="color:#9cdcfe">change-default</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">onChangeDefault</span><span style="color:#d4d4d4">"</span></span>
<span class="line"><span style="color:#d4d4d4">      /</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">template</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">script</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#c586c0">import</span><span style="color:#d4d4d4"> { </span><span style="color:#9cdcfe">Toast</span><span style="color:#d4d4d4"> } </span><span style="color:#c586c0">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'vant'</span></span>
<span class="line"><span style="color:#c586c0">import</span><span style="color:#d4d4d4"> { </span><span style="color:#9cdcfe">mapActions</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">mapGetters</span><span style="color:#d4d4d4"> } </span><span style="color:#c586c0">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'vuex'</span></span>
<span class="line"><span style="color:#c586c0">import</span><span style="color:#d4d4d4"> { </span><span style="color:#9cdcfe">areaList</span><span style="color:#d4d4d4"> } </span><span style="color:#c586c0">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'@vant/area-data'</span><span style="color:#d4d4d4"> </span><span style="color:#6a9955">// 引入vant官方的地区数据</span></span>
<span class="line"></span>
<span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">default</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">name:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'AddressEdit'</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#dcdcaa">data</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">adsId:</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">, </span><span style="color:#6a9955">// 地址id</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">addressInfo:</span><span style="color:#d4d4d4"> {}, </span><span style="color:#6a9955">// 初始地址详情对象，若是新建地址则为空对象</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">areaList:</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">areaList</span><span style="color:#d4d4d4">, </span><span style="color:#6a9955">// 地区列表</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">searchResult:</span><span style="color:#d4d4d4"> [], </span><span style="color:#6a9955">// 详细地址搜索结果</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">checkDefault:</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">false</span><span style="color:#d4d4d4"> </span><span style="color:#6a9955">// 默认地址的标识，数据内的isDefault会随着设置按钮而改变，此字段标识数据原始状态</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">computed:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    ...</span><span style="color:#dcdcaa">mapGetters</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'AddressMap'</span><span style="color:#d4d4d4">, [</span><span style="color:#ce9178">'nameToCode'</span><span style="color:#d4d4d4">, </span><span style="color:#ce9178">'codeToName'</span><span style="color:#d4d4d4">]),</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 获取要进行编辑的地址id，如果为空则赋值为-1表示为新建地址</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">getAdsId</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">$route</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">query</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">adsid</span><span style="color:#d4d4d4"> || -</span><span style="color:#b5cea8">1</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#569cd6">async</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">created</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 构建映射表</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#c586c0">await</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">buildReverseMaps</span><span style="color:#d4d4d4">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 获取要进行编辑的地址id，如果为空则赋值为-1表示为新建地址</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">adsId</span><span style="color:#d4d4d4"> = </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">getAdsId</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// console.log('adsId:', this.adsId)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 如果adsId不等于-1，则进行地址详情的拉取</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#c586c0">if</span><span style="color:#d4d4d4"> (</span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">adsId</span><span style="color:#d4d4d4"> !== -</span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 说明是编辑地址，则需要拉取地址详情</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> { </span><span style="color:#9cdcfe">data</span><span style="color:#d4d4d4">: { </span><span style="color:#4fc1ff">detail</span><span style="color:#d4d4d4"> } } = </span><span style="color:#c586c0">await</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">getAddressDetail</span><span style="color:#d4d4d4">(</span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">adsId</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">addressInfo</span><span style="color:#d4d4d4"> = {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">id:</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">detail</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">address_id</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">name:</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">detail</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">name</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">tel:</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">detail</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">phone</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">province:</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">codeToName</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">detail</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">province_id</span><span style="color:#d4d4d4">) || </span><span style="color:#ce9178">''</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">city:</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">codeToName</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">detail</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">city_id</span><span style="color:#d4d4d4">) || </span><span style="color:#ce9178">''</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">county:</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">codeToName</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">detail</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">county_id</span><span style="color:#d4d4d4">) || </span><span style="color:#ce9178">''</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">addressDetail:</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">detail</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">detail</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">areaCode:</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">String</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">detail</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">region_id</span><span style="color:#d4d4d4">),</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">isDefault:</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">isDefault</span></span>
<span class="line"><span style="color:#d4d4d4">      }</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 从Vuex得到默认地址的id</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">defaultAddressId</span><span style="color:#d4d4d4"> = </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">$store</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">Address</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">defaultAddressId</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 比对当前地址是否为默认地址</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">if</span><span style="color:#d4d4d4"> (</span><span style="color:#dcdcaa">Number</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">defaultAddressId</span><span style="color:#d4d4d4">) === </span><span style="color:#dcdcaa">Number</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">detail</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">address_id</span><span style="color:#d4d4d4">)) {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">console</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">log</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'当前地址为默认地址'</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">addressInfo</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">isDefault</span><span style="color:#d4d4d4"> = </span><span style="color:#569cd6">true</span><span style="color:#d4d4d4"> </span><span style="color:#6a9955">// 设置默认按钮为打开状态</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">checkDefault</span><span style="color:#d4d4d4"> = </span><span style="color:#569cd6">true</span><span style="color:#d4d4d4"> </span><span style="color:#6a9955">// 为真说明该地址获取的时候就是默认地址</span></span>
<span class="line"><span style="color:#d4d4d4">      } </span><span style="color:#c586c0">else</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#6a9955">// 说明当前地址不是默认地址</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">console</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">log</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'当前地址不是默认地址'</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">addressInfo</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">isDefault</span><span style="color:#d4d4d4"> = </span><span style="color:#569cd6">false</span><span style="color:#d4d4d4"> </span><span style="color:#6a9955">// 设置默认按钮为关闭状态</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">checkDefault</span><span style="color:#d4d4d4"> = </span><span style="color:#569cd6">false</span><span style="color:#d4d4d4"> </span><span style="color:#6a9955">// 为假说明该地址获取的时候不是默认地址</span></span>
<span class="line"><span style="color:#d4d4d4">      }</span></span>
<span class="line"><span style="color:#d4d4d4">    } </span><span style="color:#c586c0">else</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 说明是新建地址，不做操作</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">methods:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    ...</span><span style="color:#dcdcaa">mapActions</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'Address'</span><span style="color:#d4d4d4">, [</span><span style="color:#ce9178">'getAddressDetail'</span><span style="color:#d4d4d4">, </span><span style="color:#ce9178">'addAddress'</span><span style="color:#d4d4d4">, </span><span style="color:#ce9178">'updateAddress'</span><span style="color:#d4d4d4">]),</span></span>
<span class="line"><span style="color:#d4d4d4">    ...</span><span style="color:#dcdcaa">mapActions</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'AddressMap'</span><span style="color:#d4d4d4">, [</span><span style="color:#ce9178">'buildReverseMaps'</span><span style="color:#d4d4d4">]),</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 保存地址</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">async</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">onSave</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">content</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 判断是新建地址还是编辑地址</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">if</span><span style="color:#d4d4d4"> (</span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">adsId</span><span style="color:#d4d4d4"> === -</span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#6a9955">// 新建地址</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">content</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">country</span><span style="color:#d4d4d4"> = </span><span style="color:#ce9178">'中国'</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">addressInfo</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">content</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#6a9955">// 使用映射表进行地区数据处理</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">region</span><span style="color:#d4d4d4"> = [</span></span>
<span class="line"><span style="color:#d4d4d4">          {</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">value:</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">Number</span><span style="color:#d4d4d4">(</span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">nameToCode</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">content</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">province</span><span style="color:#d4d4d4">)) || </span><span style="color:#ce9178">''</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">label:</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">content</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">province</span></span>
<span class="line"><span style="color:#d4d4d4">          },</span></span>
<span class="line"><span style="color:#d4d4d4">          {</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">value:</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">Number</span><span style="color:#d4d4d4">(</span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">nameToCode</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">content</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">city</span><span style="color:#d4d4d4">)) || </span><span style="color:#ce9178">''</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">label:</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">content</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">city</span></span>
<span class="line"><span style="color:#d4d4d4">          },</span></span>
<span class="line"><span style="color:#d4d4d4">          {</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">value:</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">Number</span><span style="color:#d4d4d4">(</span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">nameToCode</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">content</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">county</span><span style="color:#d4d4d4">)) || </span><span style="color:#ce9178">''</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">label:</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">content</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">county</span></span>
<span class="line"><span style="color:#d4d4d4">          }</span></span>
<span class="line"><span style="color:#d4d4d4">        ]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#6a9955">// 封装数据对象</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">dataObj</span><span style="color:#d4d4d4"> = {</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">name:</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">addressInfo</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">name</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">phone:</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">addressInfo</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">tel</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">region:</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">region</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">detail:</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">addressInfo</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">addressDetail</span></span>
<span class="line"><span style="color:#d4d4d4">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#6a9955">// 调用接口进行地址的保存</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#c586c0">await</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">addAddress</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">dataObj</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#dcdcaa">Toast</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'保存成功'</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">$router</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">replace</span><span style="color:#d4d4d4">({ </span><span style="color:#9cdcfe">path:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'/address/manage'</span><span style="color:#d4d4d4"> }) </span><span style="color:#6a9955">// 保存成功后返回地址列表页面</span></span>
<span class="line"><span style="color:#d4d4d4">      } </span><span style="color:#c586c0">else</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#6a9955">// 编辑地址</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#6a9955">// console.log('编辑地址的content:', content)</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">addressInfo</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">content</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#6a9955">// 封装对象，用于发送请求</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">dataObj</span><span style="color:#d4d4d4"> = {</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">address_id:</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">addressInfo</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">id</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">form:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">name:</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">addressInfo</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">name</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">phone:</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">addressInfo</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">tel</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">region:</span><span style="color:#d4d4d4"> [</span></span>
<span class="line"><span style="color:#d4d4d4">              {</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">label:</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">addressInfo</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">province</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">value:</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">Number</span><span style="color:#d4d4d4">(</span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">nameToCode</span><span style="color:#d4d4d4">(</span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">addressInfo</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">province</span><span style="color:#d4d4d4">)) || </span><span style="color:#ce9178">''</span></span>
<span class="line"><span style="color:#d4d4d4">              },</span></span>
<span class="line"><span style="color:#d4d4d4">              {</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">label:</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">addressInfo</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">city</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">value:</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">Number</span><span style="color:#d4d4d4">(</span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">nameToCode</span><span style="color:#d4d4d4">(</span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">addressInfo</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">city</span><span style="color:#d4d4d4">)) || </span><span style="color:#ce9178">''</span></span>
<span class="line"><span style="color:#d4d4d4">              },</span></span>
<span class="line"><span style="color:#d4d4d4">              {</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">label:</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">addressInfo</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">county</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:#9cdcfe">value:</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">Number</span><span style="color:#d4d4d4">(</span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">nameToCode</span><span style="color:#d4d4d4">(</span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">addressInfo</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">county</span><span style="color:#d4d4d4">)) || </span><span style="color:#ce9178">''</span></span>
<span class="line"><span style="color:#d4d4d4">              }</span></span>
<span class="line"><span style="color:#d4d4d4">            ],</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">detail:</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">addressInfo</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">addressDetail</span></span>
<span class="line"><span style="color:#d4d4d4">          }</span></span>
<span class="line"><span style="color:#d4d4d4">        }</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#6a9955">// console.log('dataObj:', dataObj)</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#c586c0">await</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">updateAddress</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">dataObj</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#dcdcaa">Toast</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'保存成功'</span><span style="color:#d4d4d4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#6a9955">// 处理默认地址的标识问题</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#c586c0">if</span><span style="color:#d4d4d4"> (</span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">checkDefault</span><span style="color:#d4d4d4">) { </span><span style="color:#6a9955">// 为真说明当前编辑的是默认地址</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">console</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">log</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'当前是默认地址，content:'</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">content</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">console</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">log</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'当前是默认地址，this.adressInfo:'</span><span style="color:#d4d4d4">, </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">addressInfo</span><span style="color:#d4d4d4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#c586c0">if</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">content</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">isDefault</span><span style="color:#d4d4d4"> !== </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">checkDefault</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#6a9955">// 说明用户取消了这个默认地址，需要将Vuex的默认地址id赋值为-1</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">$store</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">commit</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'Address/setDefaultAddressId'</span><span style="color:#d4d4d4">, -</span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">          }</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#6a9955">// 否则什么也不做</span></span>
<span class="line"><span style="color:#d4d4d4">        } </span><span style="color:#c586c0">else</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#6a9955">// 说明当前编辑的不是默认地址</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">console</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">log</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'当前不是默认地址，content:'</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">content</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">console</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">log</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'当前不是默认地址，this.adressInfo:'</span><span style="color:#d4d4d4">, </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">addressInfo</span><span style="color:#d4d4d4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#c586c0">if</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">content</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">isDefault</span><span style="color:#d4d4d4"> !== </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">checkDefault</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#6a9955">// 说明用户将当前不是默认地址的地址设置为默认地址</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">$store</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">commit</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'Address/setDefaultAddressId'</span><span style="color:#d4d4d4">, </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">addressInfo</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">id</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">          }</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#6a9955">// 否则什么也不做</span></span>
<span class="line"><span style="color:#d4d4d4">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#6a9955">// 处理完成后跳转会地址列表页</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">$router</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">replace</span><span style="color:#d4d4d4">({ </span><span style="color:#9cdcfe">path:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'/address/manage'</span><span style="color:#d4d4d4"> })</span></span>
<span class="line"><span style="color:#d4d4d4">      }</span></span>
<span class="line"><span style="color:#d4d4d4">    },</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">async</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">onDelete</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 判断是否删除的是默认地址，如果是，则将Vuex的默认地址id赋值为-1</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">if</span><span style="color:#d4d4d4"> (</span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">checkDefault</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">$store</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">commit</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'Address/setDefaultAddressId'</span><span style="color:#d4d4d4">, -</span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">console</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">log</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'删除默认地址, Vuex的默认地址id:'</span><span style="color:#d4d4d4">, </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">$store</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">state</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">Address</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">defaultAddressId</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">      }</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">await</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">$store</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">dispatch</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'Address/deleteAddress'</span><span style="color:#d4d4d4">, </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">addressInfo</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">id</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#dcdcaa">Toast</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'删除成功'</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#dcdcaa">setTimeout</span><span style="color:#d4d4d4">(() </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">$router</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">replace</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'/address/manage'</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">      }, </span><span style="color:#b5cea8">1000</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">    },</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 设置默认地址</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">onChangeDefault</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">val</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// console.log(val)</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 只有编辑才可以设置默认地址</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">addressInfo</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">isDefault</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">val</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">console</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">log</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'设置默认地址的按钮被触发, this.addressInfo.isDefault:'</span><span style="color:#d4d4d4">, </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">addressInfo</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">isDefault</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">script</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">style</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">scoped</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">lang</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"less"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d7ba7d">.address-list</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">padding-top</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">60px</span><span style="color:#d4d4d4">; </span><span style="color:#6a9955">/* 增加与导航栏等高的内边距，避免内容被导航栏覆盖 */</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d7ba7d">.address-edit</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">padding</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">16px</span><span style="color:#d4d4d4">; </span><span style="color:#6a9955">/* 给地址编辑区域增加一些内边距，使内容不贴边 */</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">background-color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#fff</span><span style="color:#d4d4d4">; </span><span style="color:#6a9955">/* 设置背景色为白色 */</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">style</span><span style="color:grey">&gt;</span></span></code></pre></div></div></figure><p>导入 vant 组件略过。</p><h2 id="订单结算台"><a class="markdownIt-Anchor" href="#订单结算台"></a> 订单结算台</h2><h3 id="静态结构-2"><a class="markdownIt-Anchor" href="#静态结构-2"></a> 静态结构</h3><figure class="shiki vue"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">template</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"pay"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-nav-bar</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">fixed</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">title</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"订单结算台"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">left-arrow</span><span style="color:#d4d4d4"> @</span><span style="color:#9cdcfe">click-left</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">$router</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">go</span><span style="color:#d4d4d4">(-</span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">)</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> /</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">&lt;!-- 地址相关 --&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"address"</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"left-icon"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-icon</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">name</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"logistics"</span><span style="color:#d4d4d4"> /</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"info"</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">v-if</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#569cd6">true</span><span style="color:#d4d4d4">"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"info-content"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"name"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">小红</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"mobile"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">13811112222</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"info-address"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          江苏省 无锡市 南长街 110号 504</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"info"</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">v-else</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        请选择配送地址</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"right-icon"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-icon</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">name</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"arrow"</span><span style="color:#d4d4d4"> /</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">&lt;!-- 订单明细 --&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"pay-list"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"list"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"goods-item"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"left"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">              </span><span style="color:grey">&lt;</span><span style="color:#569cd6">img</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">src</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"http://cba.itlike.com/public/uploads/10001/20230321/8f505c6c437fc3d4b4310b57b1567544.jpg"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">alt</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">""</span><span style="color:#d4d4d4"> /</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"right"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">              </span><span style="color:grey">&lt;</span><span style="color:#569cd6">p</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"tit text-ellipsis-2"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">                 三星手机 SAMSUNG Galaxy S23 8GB+256GB 超视觉夜拍系统 超清夜景 悠雾紫 5G手机 游戏拍照旗舰机s23</span></span>
<span class="line"><span style="color:#d4d4d4">              </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">p</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">              </span><span style="color:grey">&lt;</span><span style="color:#569cd6">p</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"info"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"count"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">x3</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"price"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">¥9.99</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">              </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">p</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"flow-num-box"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">共 12 件商品，合计：</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"money"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">￥1219.00</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"pay-detail"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"pay-cell"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">订单总金额：</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"red"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">￥1219.00</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"pay-cell"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">优惠券：</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">无优惠券可用</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"pay-cell"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">配送费用：</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">v-if</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#569cd6">false</span><span style="color:#d4d4d4">"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">请先选择配送地址</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">v-else</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"red"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">+￥0.00</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">&lt;!-- 支付方式 --&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"pay-way"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"tit"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">支付方式</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"pay-cell"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;&lt;</span><span style="color:#569cd6">van-icon</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">name</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"balance-o"</span><span style="color:#d4d4d4"> /</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">余额支付（可用 ¥ 999919.00 元）</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#6a9955">&lt;!-- &lt;span&gt;请先选择配送地址&lt;/span&gt; --&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"red"</span><span style="color:grey">&gt;&lt;</span><span style="color:#569cd6">van-icon</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">name</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"passed"</span><span style="color:#d4d4d4"> /</span><span style="color:grey">&gt;&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">&lt;!-- 买家留言 --&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"buytips"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">textarea</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">placeholder</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"选填：买家留言（50字内）"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">name</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">""</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">id</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">""</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">cols</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"30"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">rows</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"10"</span><span style="color:grey">&gt;&lt;/</span><span style="color:#569cd6">textarea</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">&lt;!-- 底部提交 --&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"footer-fixed"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"left"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">实付款：</span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">￥999919</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"tipsbtn"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">提交订单</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">template</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">script</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">default</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">name:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'PayIndex'</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#dcdcaa">data</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">methods:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">script</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">style</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">lang</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"less"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">scoped</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d7ba7d">.pay</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">padding-top</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">46px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">padding-bottom</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">46px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  ::</span><span style="color:#569cd6">v-deep</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#d7ba7d">.van-nav-bar__arrow</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#333</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"><span style="color:#d7ba7d">.address</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">align-items</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">center</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">justify-content</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex-start</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">padding</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">20px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">14px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#666</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">position</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">relative</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">background</span><span style="color:#d4d4d4">: </span><span style="color:#dcdcaa">url(@</span><span style="color:#ce9178">/assets/border-line.png</span><span style="color:#dcdcaa">)</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">bottom</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">repeat-x</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">background-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">60px</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">auto</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.left-icon</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">margin-right</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">20px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.right-icon</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">position</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">absolute</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">right</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">20px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">top</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">50%</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">transform</span><span style="color:#d4d4d4">: </span><span style="color:#dcdcaa">translateY</span><span style="color:#d4d4d4">(</span><span style="color:#b5cea8">-7px</span><span style="color:#d4d4d4">);</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"><span style="color:#d7ba7d">.goods-item</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">100px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">margin-bottom</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">6px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">padding</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">background-color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#fff</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.left</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">width</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">100px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#d7ba7d">img</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">block</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">width</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">80px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">margin</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">auto</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.right</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">flex</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">14px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">line-height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">1.3</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">padding</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">padding-right</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">0px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">flex-direction</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">column</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">justify-content</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">space-evenly</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#333</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#d7ba7d">.info</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">margin-top</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">5px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">justify-content</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">space-between</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#d7ba7d">.price</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#fa2209</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      }</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d7ba7d">.flow-num-box</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">justify-content</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex-end</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">padding</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">14px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">border-bottom</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">1px</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">solid</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">#efefef</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.money</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#fa2209</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d7ba7d">.pay-cell</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">14px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">padding</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">12px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#333</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">justify-content</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">space-between</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.red</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#fa2209</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"><span style="color:#d7ba7d">.pay-detail</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">border-bottom</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">1px</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">solid</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">#efefef</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d7ba7d">.pay-way</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">14px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">padding</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">12px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">border-bottom</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">1px</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">solid</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">#efefef</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#333</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.tit</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">line-height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">30px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.pay-cell</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">padding</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.van-icon</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">20px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">margin-right</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">5px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d7ba7d">.buytips</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">block</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">textarea</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">block</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">width</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">100%</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">border</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">none</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">14px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">padding</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">12px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">100px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d7ba7d">.footer-fixed</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">position</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">fixed</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">background-color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#fff</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">left</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">bottom</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">width</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">100%</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">46px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">line-height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">46px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">border-top</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">1px</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">solid</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">#efefef</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">14px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.left</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">flex</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">padding-left</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">12px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#666</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#d7ba7d">span</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">:</span><span style="color:#ce9178">#fa2209</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.tipsbtn</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">width</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">121px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">background</span><span style="color:#d4d4d4">: </span><span style="color:#dcdcaa">linear-gradient</span><span style="color:#d4d4d4">(</span><span style="color:#b5cea8">90deg</span><span style="color:#d4d4d4">,</span><span style="color:#ce9178">#f9211c</span><span style="color:#d4d4d4">,</span><span style="color:#ce9178">#ff6335</span><span style="color:#d4d4d4">);</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#fff</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">text-align</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">center</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">line-height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">46px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">block</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">14px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">style</span><span style="color:grey">&gt;</span></span></code></pre></div></div></figure><h3 id="渲染-2"><a class="markdownIt-Anchor" href="#渲染-2"></a> 渲染</h3><figure class="shiki vue"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">template</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"pay"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-nav-bar</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">fixed</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">title</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"订单结算台"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">left-arrow</span><span style="color:#d4d4d4"> @</span><span style="color:#9cdcfe">click-left</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">$router</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">go</span><span style="color:#d4d4d4">(-</span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">)</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> /</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">&lt;!-- 地址相关 --&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"address"</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"left-icon"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-icon</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">name</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"logistics"</span><span style="color:#d4d4d4"> /</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"info"</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">v-if</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">addressList</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">length</span><span style="color:#d4d4d4"> &gt; </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"info-content"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"name"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">{{ </span><span style="color:#9cdcfe">chosenAddress</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">name</span><span style="color:#d4d4d4"> }} </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"mobile"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">{{ </span><span style="color:#9cdcfe">chosenAddress</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">phone</span><span style="color:#d4d4d4"> }}</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"info-address"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          {{ </span><span style="color:#9cdcfe">regionName</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">province</span><span style="color:#d4d4d4"> }} {{ </span><span style="color:#9cdcfe">regionName</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">city</span><span style="color:#d4d4d4"> }} {{ </span><span style="color:#9cdcfe">regionName</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">county</span><span style="color:#d4d4d4"> }} {{ </span><span style="color:#9cdcfe">chosenAddress</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">detail</span><span style="color:#d4d4d4"> }}</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"info"</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">v-else</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        还没有地址哦，点击右侧按钮添加吧</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"right-icon"</span><span style="color:#d4d4d4"> @</span><span style="color:#9cdcfe">click</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">$router</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">push</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'/address/manage'</span><span style="color:#d4d4d4">)</span><span style="color:#d4d4d4">"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">van-icon</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">name</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"arrow"</span><span style="color:#d4d4d4"> /</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">&lt;!-- 订单明细 --&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"pay-list"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"list"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"goods-item"</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">v-for</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">in</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">cartList</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> :</span><span style="color:#9cdcfe">key</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">id</span><span style="color:#d4d4d4">"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"left"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">              </span><span style="color:grey">&lt;</span><span style="color:#569cd6">img</span><span style="color:#d4d4d4"> :</span><span style="color:#9cdcfe">src</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goods</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goods_image</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">alt</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">""</span><span style="color:#d4d4d4"> /</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"right"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">              </span><span style="color:grey">&lt;</span><span style="color:#569cd6">p</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"tit text-ellipsis-2"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">                 {{ </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goods</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goods_name</span><span style="color:#d4d4d4"> }}</span></span>
<span class="line"><span style="color:#d4d4d4">              </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">p</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">              </span><span style="color:grey">&lt;</span><span style="color:#569cd6">p</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"info"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"count"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">共{{ </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goods_num</span><span style="color:#d4d4d4"> }}件</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">                </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"price"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">¥{{</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goods</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goods_price_min</span><span style="color:#d4d4d4"> * </span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">goods_num</span><span style="color:#d4d4d4">}}</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">              </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">p</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"flow-num-box"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">共 {{</span><span style="color:#dcdcaa">selectedCartCount</span><span style="color:#d4d4d4">()}} 件商品，合计：</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"money"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">￥{{</span><span style="color:#dcdcaa">selectedPrice</span><span style="color:#d4d4d4">()}}</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"pay-detail"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"pay-cell"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">订单总金额：</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"red"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">￥{{</span><span style="color:#dcdcaa">selectedPrice</span><span style="color:#d4d4d4">()}}</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"pay-cell"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">优惠券：</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">无优惠券可用</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"pay-cell"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">配送费用：</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">v-if</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#569cd6">false</span><span style="color:#d4d4d4">"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">请先选择配送地址</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">v-else</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"red"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">+￥0.00</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">&lt;!-- 支付方式 --&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"pay-way"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"tit"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">支付方式</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"pay-cell"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;&lt;</span><span style="color:#569cd6">van-icon</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">name</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"balance-o"</span><span style="color:#d4d4d4"> /</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">余额支付（可用 ¥ 999919.00 元）</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#6a9955">&lt;!-- &lt;span&gt;请先选择配送地址&lt;/span&gt; --&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"red"</span><span style="color:grey">&gt;&lt;</span><span style="color:#569cd6">van-icon</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">name</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"passed"</span><span style="color:#d4d4d4"> /</span><span style="color:grey">&gt;&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">&lt;!-- 买家留言 --&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"buytips"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:grey">&lt;</span><span style="color:#569cd6">textarea</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">placeholder</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"选填：买家留言（50字内）"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">name</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">""</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">id</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">""</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">cols</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"30"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">rows</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"10"</span><span style="color:grey">&gt;&lt;/</span><span style="color:#569cd6">textarea</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">&lt;!-- 底部提交 --&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"footer-fixed"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"left"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">实付款：</span><span style="color:grey">&lt;</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">￥{{</span><span style="color:#dcdcaa">selectedPrice</span><span style="color:#d4d4d4">()}}</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">span</span><span style="color:grey">&gt;&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"tipsbtn"</span><span style="color:#d4d4d4"> @</span><span style="color:#9cdcfe">click</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">$router</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">push</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'/order/confirm'</span><span style="color:#d4d4d4">)</span><span style="color:#d4d4d4">"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">提交订单</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">template</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">script</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#c586c0">import</span><span style="color:#d4d4d4"> { </span><span style="color:#9cdcfe">mapActions</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">mapGetters</span><span style="color:#d4d4d4"> } </span><span style="color:#c586c0">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'vuex'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">default</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">name:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'PayIndex'</span><span style="color:#d4d4d4">,</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#569cd6">async</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">created</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 构建地区映射表</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#c586c0">await</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">buildReverseMaps</span><span style="color:#d4d4d4">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 处理购物车详情展示</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 拉取购物车列表</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#c586c0">await</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">getCartAction</span><span style="color:#d4d4d4">()</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">cartList</span><span style="color:#d4d4d4"> = </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">selectedCartList</span><span style="color:#d4d4d4">()</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">console</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">log</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'购物车列表：'</span><span style="color:#d4d4d4">, </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">cartList</span><span style="color:#d4d4d4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 获取地址列表</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> { </span><span style="color:#4fc1ff">list</span><span style="color:#d4d4d4"> } = </span><span style="color:#c586c0">await</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">getAddressList</span><span style="color:#d4d4d4">()</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">addressList</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">list</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">console</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">log</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'地址列表：'</span><span style="color:#d4d4d4">, </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">addressList</span><span style="color:#d4d4d4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#6a9955">// 从Vuex中获取默认地址的id</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">defaultAddressId</span><span style="color:#d4d4d4"> = </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">getDefaultAddressId</span><span style="color:#d4d4d4">()</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">console</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">log</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'默认地址id：'</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">defaultAddressId</span><span style="color:#d4d4d4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#c586c0">if</span><span style="color:#d4d4d4"> (</span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">addressList</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">length</span><span style="color:#d4d4d4"> &gt; </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 如果有地址查询参数?adsid，则说明进行了地址切换</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">console</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">log</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'地址切换参数：'</span><span style="color:#d4d4d4">, </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">getadsid</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">if</span><span style="color:#d4d4d4"> (</span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">getadsid</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#6a9955">// chosenAddress被赋值为切换的id的地址</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">address</span><span style="color:#d4d4d4"> = </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">addressList</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">find</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">String</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">address_id</span><span style="color:#d4d4d4">) === </span><span style="color:#dcdcaa">String</span><span style="color:#d4d4d4">(</span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">getadsid</span><span style="color:#d4d4d4">))</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">chosenAddress</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">address</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">console</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">log</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'切换后的地址：'</span><span style="color:#d4d4d4">, </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">chosenAddress</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">      } </span><span style="color:#c586c0">else</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#6a9955">// 如果没有地址切换参数，则说明没有切换地址</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#c586c0">if</span><span style="color:#d4d4d4"> (</span><span style="color:#dcdcaa">Number</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">defaultAddressId</span><span style="color:#d4d4d4">) !== -</span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#6a9955">// 遍历比对列表每一项的id是否与defaultAddressId相等，找到后返回索引（强等于比较，注意类型）</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">defaultIndex</span><span style="color:#d4d4d4"> = </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">addressList</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">findIndex</span><span style="color:#d4d4d4">((</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">) </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">String</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">item</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">address_id</span><span style="color:#d4d4d4">) === </span><span style="color:#dcdcaa">String</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">defaultAddressId</span><span style="color:#d4d4d4">))</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#6a9955">// console.log('默认地址索引：', defaultIndex)</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#c586c0">if</span><span style="color:#d4d4d4"> (</span><span style="color:#dcdcaa">Number</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">defaultIndex</span><span style="color:#d4d4d4">) !== -</span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#6a9955">// 找到后将数组数据转对象赋值给chosenAddress属性</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">chosenAddress</span><span style="color:#d4d4d4"> = </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">addressList</span><span style="color:#d4d4d4">[</span><span style="color:#9cdcfe">defaultIndex</span><span style="color:#d4d4d4">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#6a9955">// 处理地址Code转为Name</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">regionId</span><span style="color:#d4d4d4"> = </span><span style="color:#dcdcaa">String</span><span style="color:#d4d4d4">(</span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">chosenAddress</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">region_id</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#6a9955">// 调用 getFullAddressInfo 方法</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">regionName</span><span style="color:#d4d4d4"> = </span><span style="color:#c586c0">await</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">fetchFullAddressName</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">regionId</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">          } </span><span style="color:#c586c0">else</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#9cdcfe">console</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">log</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'未找到有效的默认地址索引'</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">          }</span></span>
<span class="line"><span style="color:#d4d4d4">        } </span><span style="color:#c586c0">else</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#6a9955">// Vuex没有默认地址，则默认选中第一个地址</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#6a9955">// 设置chosenAddress属性为addressList的第一个地址</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">chosenAddress</span><span style="color:#d4d4d4"> = </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">addressList</span><span style="color:#d4d4d4">[</span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">]</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">regionId</span><span style="color:#d4d4d4"> = </span><span style="color:#dcdcaa">String</span><span style="color:#d4d4d4">(</span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">chosenAddress</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">region_id</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">regionName</span><span style="color:#d4d4d4"> = </span><span style="color:#c586c0">await</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">fetchFullAddressName</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">regionId</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">console</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">log</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'无默认地址，展示数据chosenAddress：'</span><span style="color:#d4d4d4">, </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">chosenAddress</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">        }</span></span>
<span class="line"><span style="color:#d4d4d4">      }</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#dcdcaa">data</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">addressList:</span><span style="color:#d4d4d4"> [], </span><span style="color:#6a9955">// 地址列表</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">chosenAddress:</span><span style="color:#d4d4d4"> {}, </span><span style="color:#6a9955">// 被选择进行展示的地址</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">regionName:</span><span style="color:#d4d4d4"> {}, </span><span style="color:#6a9955">// 将地址Code转为Name</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">cartList:</span><span style="color:#d4d4d4"> [] </span><span style="color:#6a9955">// 购物车列表</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">computed:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">getadsid</span><span style="color:#d4d4d4"> () {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">$route</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">query</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">adsid</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">methods:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    ...</span><span style="color:#dcdcaa">mapActions</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'Address'</span><span style="color:#d4d4d4">, [</span><span style="color:#ce9178">'getAddressList'</span><span style="color:#d4d4d4">, </span><span style="color:#ce9178">'getAddressDetail'</span><span style="color:#d4d4d4">]),</span></span>
<span class="line"><span style="color:#d4d4d4">    ...</span><span style="color:#dcdcaa">mapGetters</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'Address'</span><span style="color:#d4d4d4">, [</span><span style="color:#ce9178">'getDefaultAddressId'</span><span style="color:#d4d4d4">]),</span></span>
<span class="line"><span style="color:#d4d4d4">    ...</span><span style="color:#dcdcaa">mapActions</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'AddressMap'</span><span style="color:#d4d4d4">, [</span><span style="color:#ce9178">'buildReverseMaps'</span><span style="color:#d4d4d4">, </span><span style="color:#ce9178">'fetchFullAddressName'</span><span style="color:#d4d4d4">]),</span></span>
<span class="line"><span style="color:#d4d4d4">    ...</span><span style="color:#dcdcaa">mapActions</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'Cart'</span><span style="color:#d4d4d4">, [</span><span style="color:#ce9178">'getCartAction'</span><span style="color:#d4d4d4">]),</span></span>
<span class="line"><span style="color:#d4d4d4">    ...</span><span style="color:#dcdcaa">mapGetters</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'Cart'</span><span style="color:#d4d4d4">, [</span><span style="color:#ce9178">'selectedCartList'</span><span style="color:#d4d4d4">, </span><span style="color:#ce9178">'selectedCartCount'</span><span style="color:#d4d4d4">, </span><span style="color:#ce9178">'selectedPrice'</span><span style="color:#d4d4d4">])</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">script</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">style</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">lang</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"less"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">scoped</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d7ba7d">.pay</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">padding-top</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">46px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">padding-bottom</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">46px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  ::</span><span style="color:#569cd6">v-deep</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#d7ba7d">.van-nav-bar__arrow</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#333</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"><span style="color:#d7ba7d">.address</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">align-items</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">center</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">justify-content</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex-start</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">padding</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">20px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">14px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#666</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">position</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">relative</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">background</span><span style="color:#d4d4d4">: </span><span style="color:#dcdcaa">url(@</span><span style="color:#ce9178">/assets/border-line.png</span><span style="color:#dcdcaa">)</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">bottom</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">repeat-x</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">background-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">60px</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">auto</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.left-icon</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">margin-right</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">20px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.right-icon</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">position</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">absolute</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">right</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">20px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">top</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">50%</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">transform</span><span style="color:#d4d4d4">: </span><span style="color:#dcdcaa">translateY</span><span style="color:#d4d4d4">(</span><span style="color:#b5cea8">-7px</span><span style="color:#d4d4d4">);</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"><span style="color:#d7ba7d">.goods-item</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">100px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">margin-bottom</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">6px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">padding</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">background-color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#fff</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.left</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">width</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">100px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#d7ba7d">img</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">block</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">width</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">80px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">margin</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">auto</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.right</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">flex</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">14px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">line-height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">1.3</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">padding</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">padding-right</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">0px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">flex-direction</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">column</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">justify-content</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">space-evenly</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#333</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#d7ba7d">.info</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">margin-top</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">5px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">justify-content</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">space-between</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#d7ba7d">.price</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#fa2209</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      }</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d7ba7d">.flow-num-box</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">justify-content</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex-end</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">padding</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">14px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">border-bottom</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">1px</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">solid</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">#efefef</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.money</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#fa2209</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d7ba7d">.pay-cell</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">14px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">padding</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">12px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#333</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">justify-content</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">space-between</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.red</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#fa2209</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"><span style="color:#d7ba7d">.pay-detail</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">border-bottom</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">1px</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">solid</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">#efefef</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d7ba7d">.pay-way</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">14px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">padding</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">12px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">border-bottom</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">1px</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">solid</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">#efefef</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#333</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.tit</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">line-height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">30px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.pay-cell</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">padding</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.van-icon</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">20px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">margin-right</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">5px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d7ba7d">.buytips</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">block</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">textarea</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">block</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">width</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">100%</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">border</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">none</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">14px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">padding</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">12px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">100px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d7ba7d">.footer-fixed</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">position</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">fixed</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">background-color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#fff</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">left</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">bottom</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">width</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">100%</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">46px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">line-height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">46px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">border-top</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">1px</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">solid</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">#efefef</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">14px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.left</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">flex</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">padding-left</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">12px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#666</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#d7ba7d">span</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">:</span><span style="color:#ce9178">#fa2209</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#d7ba7d">.tipsbtn</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">width</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">121px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">background</span><span style="color:#d4d4d4">: </span><span style="color:#dcdcaa">linear-gradient</span><span style="color:#d4d4d4">(</span><span style="color:#b5cea8">90deg</span><span style="color:#d4d4d4">,</span><span style="color:#ce9178">#f9211c</span><span style="color:#d4d4d4">,</span><span style="color:#ce9178">#ff6335</span><span style="color:#d4d4d4">);</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#fff</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">text-align</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">center</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">line-height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">46px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">block</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">font-size</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">14px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">style</span><span style="color:grey">&gt;</span></span></code></pre></div></div></figure><h2 id="订单结算"><a class="markdownIt-Anchor" href="#订单结算"></a> 订单结算</h2><p>购物车携带参数：</p><p><img src= "/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202409020134925.png" alt="image-20240902013448659"></p><h2 id="文件上传unfinished"><a class="markdownIt-Anchor" href="#文件上传unfinished"></a> 文件上传 ——unfinished</h2><h3 id="图片上传"><a class="markdownIt-Anchor" href="#图片上传"></a> 图片上传</h3><blockquote><p>接口要求：POST <code>/upload/image</code></p><p>Header 参数：</p><ul><li>Access-Token (String)	示例：<code>1741f74aed758a688515f72572dc8e37</code></li><li>platform (String) 示例值：H5</li></ul><p>Body 参数：<code>multipart/form-data</code></p><ul><li>file 对象</li></ul></blockquote><p>上传图片通常涉及到裁剪操作，于是使用 vue-cropper 插件辅助完成。</p><h4 id="安装vue-cropper"><a class="markdownIt-Anchor" href="#安装vue-cropper"></a> 安装 vue-cropper</h4><figure class="shiki sh"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#dcdcaa">npm</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">install</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">vue-cropper</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">--save</span></span></code></pre></div></div></figure><h4 id="在组件中使用-vue-cropper"><a class="markdownIt-Anchor" href="#在组件中使用-vue-cropper"></a> 在组件中使用 <code>vue-cropper</code></h4><p>创建上传的组件，允许用户选择图片、裁剪图片并实时预览裁剪效果，然后上传裁剪后的图片。</p><figure class="shiki vue"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">template</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"avatar-upload"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">vue-cropper</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">v-if</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">showCropper</span><span style="color:#d4d4d4">"</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">ref</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"cropper"</span></span>
<span class="line"><span style="color:#d4d4d4">      :</span><span style="color:#9cdcfe">img</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">imageSrc</span><span style="color:#d4d4d4">"</span></span>
<span class="line"><span style="color:#d4d4d4">      :</span><span style="color:#9cdcfe">output-size</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4">{ </span><span style="color:#c8c8c8">width</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">200</span><span style="color:#d4d4d4">, </span><span style="color:#c8c8c8">height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">200</span><span style="color:#d4d4d4"> }</span><span style="color:#d4d4d4">"</span></span>
<span class="line"><span style="color:#d4d4d4">      :</span><span style="color:#9cdcfe">output-type</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#ce9178">'jpeg'</span><span style="color:#d4d4d4">"</span></span>
<span class="line"><span style="color:#d4d4d4">      :</span><span style="color:#9cdcfe">can-move-box</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#569cd6">true</span><span style="color:#d4d4d4">"</span></span>
<span class="line"><span style="color:#d4d4d4">      :</span><span style="color:#9cdcfe">auto-crop</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#569cd6">true</span><span style="color:#d4d4d4">"</span></span>
<span class="line"><span style="color:#d4d4d4">      :</span><span style="color:#9cdcfe">fixed-box</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#569cd6">true</span><span style="color:#d4d4d4">"</span></span>
<span class="line"><span style="color:#d4d4d4">      :</span><span style="color:#9cdcfe">fixed</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#569cd6">true</span><span style="color:#d4d4d4">"</span></span>
<span class="line"><span style="color:#d4d4d4">      :</span><span style="color:#9cdcfe">center-box</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#569cd6">true</span><span style="color:#d4d4d4">"</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&gt;&lt;/</span><span style="color:#569cd6">vue-cropper</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">v-else</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">img</span><span style="color:#d4d4d4"> :</span><span style="color:#9cdcfe">src</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">avatarUrl</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">alt</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"Avatar"</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">v-if</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">avatarUrl</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"avatar-preview"</span><span style="color:#d4d4d4"> /</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">input</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">type</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"file"</span><span style="color:#d4d4d4"> @</span><span style="color:#9cdcfe">change</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">onAvatarChange</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> /</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;</span><span style="color:#569cd6">div</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">v-if</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">showCropper</span><span style="color:#d4d4d4">"</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">class</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">"cropper-controls"</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">button</span><span style="color:#d4d4d4"> @</span><span style="color:#9cdcfe">click</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">cropImage</span><span style="color:#d4d4d4">"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">裁剪并上传</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">button</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:grey">&lt;</span><span style="color:#569cd6">button</span><span style="color:#d4d4d4"> @</span><span style="color:#9cdcfe">click</span><span style="color:#d4d4d4">=</span><span style="color:#d4d4d4">"</span><span style="color:#9cdcfe">cancelCrop</span><span style="color:#d4d4d4">"</span><span style="color:grey">&gt;</span><span style="color:#d4d4d4">取消</span><span style="color:grey">&lt;/</span><span style="color:#569cd6">button</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:grey">&lt;/</span><span style="color:#569cd6">div</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">template</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">script</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#c586c0">import</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">VueCropper</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'vue-cropper'</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#c586c0">import</span><span style="color:#d4d4d4"> { </span><span style="color:#9cdcfe">uploadImage</span><span style="color:#d4d4d4"> } </span><span style="color:#c586c0">from</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'@/api/upload'</span><span style="color:#d4d4d4">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#c586c0">export</span><span style="color:#d4d4d4"> </span><span style="color:#c586c0">default</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">components:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#9cdcfe">VueCropper</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#dcdcaa">data</span><span style="color:#d4d4d4">() {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#c586c0">return</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">avatarUrl:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">''</span><span style="color:#d4d4d4">, </span><span style="color:#6a9955">// 存储裁剪后的头像URL</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">imageSrc:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">''</span><span style="color:#d4d4d4">,  </span><span style="color:#6a9955">// 存储用户选择的图片的URL</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#9cdcfe">showCropper:</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">false</span><span style="color:#d4d4d4"> </span><span style="color:#6a9955">// 控制是否显示裁剪器</span></span>
<span class="line"><span style="color:#d4d4d4">    };</span></span>
<span class="line"><span style="color:#d4d4d4">  },</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">methods:</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">onAvatarChange</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">event</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">file</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">event</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">target</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">files</span><span style="color:#d4d4d4">[</span><span style="color:#b5cea8">0</span><span style="color:#d4d4d4">];</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#c586c0">if</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">file</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">imageSrc</span><span style="color:#d4d4d4"> = </span><span style="color:#4fc1ff">URL</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">createObjectURL</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">file</span><span style="color:#d4d4d4">);</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">showCropper</span><span style="color:#d4d4d4"> = </span><span style="color:#569cd6">true</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      }</span></span>
<span class="line"><span style="color:#d4d4d4">    },</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#569cd6">async</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">cropImage</span><span style="color:#d4d4d4">() {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#6a9955">// 获取裁剪后的图片数据</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">$refs</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">cropper</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">getCropBlob</span><span style="color:#d4d4d4">(</span><span style="color:#569cd6">async</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">blob</span><span style="color:#d4d4d4">) </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#6a9955">// 上传裁剪后的图片</span></span>
<span class="line"><span style="color:#d4d4d4">        </span><span style="color:#c586c0">try</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">formData</span><span style="color:#d4d4d4"> = </span><span style="color:#569cd6">new</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">FormData</span><span style="color:#d4d4d4">();</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">formData</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">append</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'file'</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">blob</span><span style="color:#d4d4d4">);</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">response</span><span style="color:#d4d4d4"> = </span><span style="color:#c586c0">await</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">uploadImage</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">blob</span><span style="color:#d4d4d4">);</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#c586c0">if</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">response</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">status</span><span style="color:#d4d4d4"> === </span><span style="color:#b5cea8">200</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">avatarUrl</span><span style="color:#d4d4d4"> = </span><span style="color:#9cdcfe">response</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">data</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">fileInfo</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">preview_url</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">showCropper</span><span style="color:#d4d4d4"> = </span><span style="color:#569cd6">false</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">          } </span><span style="color:#c586c0">else</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">            </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">$toast</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">fail</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'上传失败，请重试'</span><span style="color:#d4d4d4">);</span></span>
<span class="line"><span style="color:#d4d4d4">          }</span></span>
<span class="line"><span style="color:#d4d4d4">        } </span><span style="color:#c586c0">catch</span><span style="color:#d4d4d4"> (</span><span style="color:#9cdcfe">error</span><span style="color:#d4d4d4">) {</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">$toast</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">fail</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'上传失败，请重试'</span><span style="color:#d4d4d4">);</span></span>
<span class="line"><span style="color:#d4d4d4">          </span><span style="color:#9cdcfe">console</span><span style="color:#d4d4d4">.</span><span style="color:#dcdcaa">error</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">error</span><span style="color:#d4d4d4">);</span></span>
<span class="line"><span style="color:#d4d4d4">        }</span></span>
<span class="line"><span style="color:#d4d4d4">      });</span></span>
<span class="line"><span style="color:#d4d4d4">    },</span></span>
<span class="line"><span style="color:#d4d4d4">    </span><span style="color:#dcdcaa">cancelCrop</span><span style="color:#d4d4d4">() {</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">showCropper</span><span style="color:#d4d4d4"> = </span><span style="color:#569cd6">false</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">      </span><span style="color:#569cd6">this</span><span style="color:#d4d4d4">.</span><span style="color:#9cdcfe">imageSrc</span><span style="color:#d4d4d4"> = </span><span style="color:#ce9178">''</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">    }</span></span>
<span class="line"><span style="color:#d4d4d4">  }</span></span>
<span class="line"><span style="color:#d4d4d4">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">script</span><span style="color:grey">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:grey">&lt;</span><span style="color:#569cd6">style</span><span style="color:grey">&gt;</span></span>
<span class="line"><span style="color:#d7ba7d">.avatar-upload</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">flex-direction</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">column</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">align-items</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">center</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d7ba7d">.avatar-preview</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">width</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">200px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">height</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">200px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">border-radius</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">50%</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">object-fit</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">cover</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">margin-bottom</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d7ba7d">.cropper-controls</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">margin-top</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">display</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">flex</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">gap</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d7ba7d">.cropper-controls</span><span style="color:#d4d4d4"> </span><span style="color:#d7ba7d">button</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">padding</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">5px</span><span style="color:#d4d4d4"> </span><span style="color:#b5cea8">10px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">background-color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#FF3E47</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">white</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">border</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">none</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">border-radius</span><span style="color:#d4d4d4">: </span><span style="color:#b5cea8">5px</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">cursor</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">pointer</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d7ba7d">.cropper-controls</span><span style="color:#d4d4d4"> </span><span style="color:#d7ba7d">button:hover</span><span style="color:#d4d4d4"> {</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">background-color</span><span style="color:#d4d4d4">: </span><span style="color:#ce9178">#E0363D</span><span style="color:#d4d4d4">;</span></span>
<span class="line"><span style="color:#d4d4d4">}</span></span>
<span class="line"><span style="color:grey">&lt;/</span><span style="color:#569cd6">style</span><span style="color:grey">&gt;</span></span></code></pre></div></div></figure><h2 id="打包优化"><a class="markdownIt-Anchor" href="#打包优化"></a> 打包优化</h2><h3 id="优化访问路径"><a class="markdownIt-Anchor" href="#优化访问路径"></a> 优化访问路径</h3><p>打包命令：<code>yarn build</code> 或者 <code>npm run build</code></p><p>打包如果没有配置 vue.config.js 的 <code>publicPath</code>，默认生成的匹配文件的写法是绝对路径，这意味着将来的可移植性降低。于是配置：</p><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> { </span><span style="color:#4fc1ff">defineConfig</span><span style="color:#d4d4d4"> } = </span><span style="color:#dcdcaa">require</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'@vue/cli-service'</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#4ec9b0">module</span><span style="color:#d4d4d4">.</span><span style="color:#4ec9b0">exports</span><span style="color:#d4d4d4"> = </span><span style="color:#dcdcaa">defineConfig</span><span style="color:#d4d4d4">({</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">publicPath:</span><span style="color:#d4d4d4"> </span><span style="color:#ce9178">'./'</span><span style="color:#d4d4d4">, </span><span style="color:#6a9955">// 默认为'/'</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">transpileDependencies:</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">true</span></span>
<span class="line"><span style="color:#d4d4d4">})</span></span></code></pre></div></div></figure><h3 id="懒加载"><a class="markdownIt-Anchor" href="#懒加载"></a> 懒加载</h3><p>打包实际上将多个文件多合一，如果一次性加载所有的 js 文件是非常消耗性能的，因此推荐配置懒加载。</p><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://router.vuejs.org/zh/guide/advanced/lazy-loading.html">路由懒加载</a></p><ul><li>异步组件改造</li></ul><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">ProDetail</span><span style="color:#d4d4d4"> = () </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">import</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'@/views/prodetail'</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">Pay</span><span style="color:#d4d4d4"> = () </span><span style="color:#569cd6">=&gt;</span><span style="color:#d4d4d4"> </span><span style="color:#569cd6">import</span><span style="color:#d4d4d4">(</span><span style="color:#ce9178">'@/views/pay'</span><span style="color:#d4d4d4">)</span></span>
<span class="line"><span style="color:#d4d4d4">...</span></span></code></pre></div></div></figure><ul><li>路由中应用</li></ul><figure class="shiki js"><div class="codeblock"><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div><div class="code"><pre class="shiki dark-plus"><code><span class="line"><span style="color:#569cd6">const</span><span style="color:#d4d4d4"> </span><span style="color:#4fc1ff">router</span><span style="color:#d4d4d4"> = </span><span style="color:#569cd6">new</span><span style="color:#d4d4d4"> </span><span style="color:#dcdcaa">VueRouter</span><span style="color:#d4d4d4">({</span></span>
<span class="line"><span style="color:#d4d4d4">  </span><span style="color:#9cdcfe">routes:</span><span style="color:#d4d4d4"> [</span></span>
<span class="line"><span style="color:#d4d4d4">    ...</span></span>
<span class="line"><span style="color:#d4d4d4">    {</span><span style="color:#9cdcfe">path:</span><span style="color:#ce9178">'prodetail/:id'</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">component:</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">ProDetail</span><span style="color:#d4d4d4">},</span></span>
<span class="line"><span style="color:#d4d4d4">    {</span><span style="color:#9cdcfe">Path:</span><span style="color:#ce9178">'/Pay'</span><span style="color:#d4d4d4">, </span><span style="color:#9cdcfe">component:</span><span style="color:#d4d4d4"> </span><span style="color:#9cdcfe">Pay</span><span style="color:#d4d4d4">},</span></span>
<span class="line"><span style="color:#d4d4d4">    ...</span></span>
<span class="line"><span style="color:#d4d4d4">  ]</span></span>
<span class="line"><span style="color:#d4d4d4">})</span></span></code></pre></div></div></figure><p>对比：</p><p><img src= "/img/loading/loading.gif" data-lazy-src="https://gitee.com/CSJ021005/f0ur_lin_-picgo/raw/master/202409030451734.png" alt="image-20240903045130463"></p><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://4rozen.github.io/">4rozeN</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://4rozen.github.io/archives/Vue/47412.html">https://4rozen.github.io/archives/Vue/47412.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://4rozeN.github.io" target="_blank">4rozeN | 林之介</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E7%AC%94%E8%AE%B0/">笔记</a></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/archives/Vue/31657.html" title="Vue 项目打包并部署到 GitHub 为 demo"><div class="cover" style="background:var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">Vue 项目打包并部署到 GitHub 为 demo</div></div><div class="info-2"><div class="info-item-1">目标：将打包好的 Vue2 | Vue3 项目部署到 github pages 用作项目 demo 我将尽可能的讲述打包前后可能遇到的绝大部分问题和原因，希望能有所帮助。 打包前的问题 打包其实实际上不会碰到什么大问题，我们讨论的问题实际是打包之后想要将打包结果也就是静态页面进行部署而发生的问题： 白屏问题 刷新 404 问题 跨域问题 但要想讨论上述问题，我们得研究好打包前的配置问题，也就是为什么会出现上述问题？ 请求地址配置问题 首先我这里默认你的项目中二次封装了 axios 并配置了 base 请求基地址（别告诉我请求地址是 localhost 哈），那么你的请求配置方法可能是： 主动暴露 base 12345base: 'http://your.domain.com' api: '/api/end-point' # The final request form may look like: http://your.domain.com/api/end-point 或者你是这样配置的（环境为 Vue3+vite）： 12345base:...</div></div></div></a><a class="pagination-related" href="/archives/React/36922.html" title="React18 学习笔记"><div class="cover" style="background:var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">React18 学习笔记</div></div><div class="info-2"><div class="info-item-1">创建 demo 工程 命令为 npx create-react-app react-basic 严格模式 React18 默认创建的工程开启了严格模式。React 应用在开发环境下若使用了 React 的严格模式（&lt;React.StrictMode&gt;），在渲染过程中，所有组件都会被调用两次。这是为了帮助检测不严谨的代码和潜在的问题。 具体在 src\index.js 中将 &lt;React.StrictMode&gt; 标签去掉即可 12345678910import React from 'react'; import ReactDOM from 'react-dom/client'; import App from './App'; const root = ReactDOM.createRoot(document.getElementById('root')); root.render( &lt;React.StrictMode&gt; &lt;App /&gt; ...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/archives/Vue/31657.html" title="Vue 项目打包并部署到 GitHub 为 demo"><div class="cover" style="background:var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-10-26</div><div class="info-item-2">Vue 项目打包并部署到 GitHub 为 demo</div></div><div class="info-2"><div class="info-item-1">目标：将打包好的 Vue2 | Vue3 项目部署到 github pages 用作项目 demo 我将尽可能的讲述打包前后可能遇到的绝大部分问题和原因，希望能有所帮助。 打包前的问题 打包其实实际上不会碰到什么大问题，我们讨论的问题实际是打包之后想要将打包结果也就是静态页面进行部署而发生的问题： 白屏问题 刷新 404 问题 跨域问题 但要想讨论上述问题，我们得研究好打包前的配置问题，也就是为什么会出现上述问题？ 请求地址配置问题 首先我这里默认你的项目中二次封装了 axios 并配置了 base 请求基地址（别告诉我请求地址是 localhost 哈），那么你的请求配置方法可能是： 主动暴露 base 12345base: 'http://your.domain.com' api: '/api/end-point' # The final request form may look like: http://your.domain.com/api/end-point 或者你是这样配置的（环境为 Vue3+vite）： 12345base:...</div></div></div></a><a class="pagination-related" href="/archives/Uni-app/7498.html" title="uni-app 涉及到的生命周期小结"><div class="cover" style="background:var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-09-06</div><div class="info-item-2">uni-app 涉及到的生命周期小结</div></div><div class="info-2"><div class="info-item-1">UniApp 中，除了常见的 Vue 生命周期（如 `created`、`mounted` 等），它还提供了特定于小程序和移动应用的**页面生命周期**和**应用生命周期** UniApp 常见的页面生命周期 1、onLoad(options) 页面加载时触发。 常用于初始化页面数据，从页面 URL 的参数 options 获取数据。 只在页面首次加载时触发一次。 1234onLoad(options) { // 可以从options中拿到url查询参数 console.log('页面加载', options); } 2、onShow() 页面显示时触发，可能在页面首次加载后，也可能在页面重新显示时（如从后台切回前台）。 常用于刷新页面数据或 UI 状态。 123onShow() { console.log('页面显示'); } 3、onReady() 页面初次渲染完成时触发，只触发一次。 页面结构加载和绘制完成后触发，可以在此进行与 UI 相关的操作。 123onReady() { console.log('页面初次渲染完成'); } ...</div></div></div></a><a class="pagination-related" href="/archives/Vue/35829.html" title="理解防抖"><div class="cover" style="background:var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-07-06</div><div class="info-item-2">理解防抖</div></div><div class="info-2"><div class="info-item-1">为什么需要防抖 防抖主要应用在一些高频率触发的事件中，比如：scroll 滚动、input 输入、resize 缩放等，能显著降低性能开销。 什么是防抖 防抖的核心思想是：高频率触发的事件中，仅保留最后一次操作，之前的操作都会被取消。 举例来说，当你在页面中不断滚动，防抖函数会等待设定的一段时间，如果这段时间内没有再次触发滚动，才会执行处理逻辑；否则会重新计时，直到用户 “安静下来” 再执行操作。 防抖函数的一般形式如下： 12345678910function debounce(fn, delay) { // fn为传入的函数名 let timer = null; // 用来保存定时器的 ID return function(...args) { // 返回一个闭包函数 if (timer) clearTimeout(timer); // 若已有定时器则清除它 timer = setTimeout(() =&gt; { // 设置一个新的定时器 // 当延时结束时，执行传入的函数，并绑定当前的上下文和参数 ...</div></div></div></a></div></div><hr class="custom-hr"><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="giscus-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src= "/img/loading/loading.gif" data-lazy-src="/img/avatar/avatar.jpg" onerror='this.onerror=null,this.src="/img/avatar/emo.webp"' alt="avatar"></div><div class="author-info-name">4rozeN</div><div class="author-info-description">Coding noob 自进阶</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">24</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">38</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div><a id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/4rozeN"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/4rozeN" rel="external nofollow noreferrer" target="_blank" title="Github"><i class="fab fa-github" style="color:#24292e"></i></a><a class="social-icon" href="mailto:mail4chen@foxmail.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fas fa-envelope" style="color:#4a7dbe"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">最近在努力学习Fabric modding和其他内容，不知天地为何物。</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84"><span class="toc-number">1.</span> <span class="toc-text">项目结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E7%BA%A7%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE"><span class="toc-number">2.</span> <span class="toc-text">二级路由配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E5%BA%95%E9%83%A8%E5%AF%BC%E8%88%AA%E6%A0%8Ftabbar"><span class="toc-number">2.1.</span> <span class="toc-text">实现底部导航栏 Tabbar</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E4%BA%8C%E7%BA%A7%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE"><span class="toc-number">2.2.</span> <span class="toc-text">实现二级路由配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%99%BB%E5%BD%95%E9%9D%99%E6%80%81%E9%A1%B5"><span class="toc-number">3.</span> <span class="toc-text">登录静态页</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E5%A4%B4%E9%83%A8navbar"><span class="toc-number">3.1.</span> <span class="toc-text">配置头部 NavBar</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%8C%E5%96%84%E4%B8%BB%E4%BD%93"><span class="toc-number">3.2.</span> <span class="toc-text">完善主体</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%8C%E5%96%84%E7%99%BB%E5%BD%95%E9%80%BB%E8%BE%91"><span class="toc-number">3.3.</span> <span class="toc-text">完善登录逻辑</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%A3%E6%9E%90base64%E5%B9%B6%E5%AE%8C%E5%96%84%E7%82%B9%E5%87%BB%E5%88%B7%E6%96%B0%E5%9B%BE%E7%89%87%E9%AA%8C%E8%AF%81%E7%A0%81"><span class="toc-number">3.3.1.</span> <span class="toc-text">解析 base64 并完善点击刷新图片验证码</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#toast%E8%BD%BB%E6%8F%90%E7%A4%BA"><span class="toc-number">3.4.</span> <span class="toc-text">Toast 轻提示</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E5%80%92%E8%AE%A1%E6%97%B6"><span class="toc-number">3.5.</span> <span class="toc-text">短信验证倒计时</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%8B%E6%9C%BA%E5%8F%B7%E5%92%8C%E5%9B%BE%E5%BD%A2%E9%AA%8C%E8%AF%81%E7%A0%81%E7%B1%BB%E5%9E%8B%E6%A0%A1%E9%AA%8C"><span class="toc-number">3.6.</span> <span class="toc-text">手机号和图形验证码类型校验</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%81%E8%A3%85%E5%8F%91%E9%80%81%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81%E8%AF%B7%E6%B1%82"><span class="toc-number">3.7.</span> <span class="toc-text">封装发送短信验证码请求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E7%99%BB%E5%BD%95%E5%8A%9F%E8%83%BD-%E5%B0%81%E8%A3%85%E7%99%BB%E5%BD%95%E6%8E%A5%E5%8F%A3"><span class="toc-number">3.8.</span> <span class="toc-text">实现登录功能 - 封装登录接口</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%93%8D%E5%BA%94%E5%A4%84%E7%90%86%E5%99%A8%E7%BB%9F%E4%B8%80%E5%A4%84%E7%90%86%E9%94%99%E8%AF%AF%E6%8F%90%E7%A4%BA"><span class="toc-number">4.</span> <span class="toc-text">响应处理器统一处理错误提示</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%99%BB%E5%BD%95%E6%9D%83%E8%AF%81%E4%BF%A1%E6%81%AF%E5%AD%98%E5%82%A8"><span class="toc-number">5.</span> <span class="toc-text">登录权证信息存储</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vuex%E6%8C%81%E4%B9%85%E5%8C%96%E5%A4%84%E7%90%86"><span class="toc-number">6.</span> <span class="toc-text">vuex 持久化处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E8%AF%B7%E6%B1%82loading%E6%95%88%E6%9E%9C"><span class="toc-number">7.</span> <span class="toc-text">添加请求 Loading 效果</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E8%B7%AF%E7%94%B1%E5%89%8D%E7%BD%AE%E5%AE%88%E5%8D%AB"><span class="toc-number">8.</span> <span class="toc-text">全局路由前置守卫</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A6%96%E9%A1%B5"><span class="toc-number">9.</span> <span class="toc-text">首页</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%8C%E6%88%90%E9%A6%96%E9%A1%B5%E9%9D%99%E6%80%81%E7%BB%93%E6%9E%84"><span class="toc-number">9.1.</span> <span class="toc-text">完成首页静态结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A6%96%E9%A1%B5-%E5%8A%A8%E6%80%81%E6%B8%B2%E6%9F%93"><span class="toc-number">9.2.</span> <span class="toc-text">首页 - 动态渲染</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2"><span class="toc-number">10.</span> <span class="toc-text">搜索</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E9%A1%B5%E9%9D%99%E6%80%81%E7%BB%93%E6%9E%84"><span class="toc-number">10.1.</span> <span class="toc-text">搜索页静态结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%86%E5%8F%B2%E8%AE%B0%E5%BD%95%E7%AE%A1%E7%90%86"><span class="toc-number">10.2.</span> <span class="toc-text">历史记录管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E5%88%97%E8%A1%A8%E9%A1%B5"><span class="toc-number">10.3.</span> <span class="toc-text">搜索列表页</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E5%B8%83%E5%B1%80"><span class="toc-number">10.3.1.</span> <span class="toc-text">静态布局</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B8%B2%E6%9F%93"><span class="toc-number">10.3.2.</span> <span class="toc-text">渲染</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E5%88%86%E7%B1%BB%E9%A1%B5%E9%9D%A2%E7%9A%84%E5%88%86%E7%B1%BBid%E8%BF%9B%E8%A1%8C%E6%B8%B2%E6%9F%93"><span class="toc-number">10.3.3.</span> <span class="toc-text">基于分类页面的分类 id 进行渲染</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%95%86%E5%93%81%E8%AF%A6%E6%83%85%E9%A1%B5"><span class="toc-number">11.</span> <span class="toc-text">商品详情页</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E7%BB%93%E6%9E%84"><span class="toc-number">11.1.</span> <span class="toc-text">静态结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%95%86%E5%93%81%E8%AF%B4%E6%98%8E%E5%8A%A8%E6%80%81%E6%B8%B2%E6%9F%93"><span class="toc-number">11.2.</span> <span class="toc-text">商品说明动态渲染</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%95%86%E5%93%81%E8%AF%84%E8%AE%BA%E5%8C%BA%E6%B8%B2%E6%9F%93"><span class="toc-number">11.3.</span> <span class="toc-text">商品评论区渲染</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%95%86%E5%93%81%E8%AF%B4%E6%98%8E%E7%9A%84%E5%9B%BE%E7%89%87%E6%B8%B2%E6%9F%93"><span class="toc-number">11.4.</span> <span class="toc-text">商品说明的图片渲染</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%95%86%E5%93%81%E8%AF%84%E4%BB%B7%E5%8C%BA"><span class="toc-number">12.</span> <span class="toc-text">商品评价区</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%A0%E5%85%A5%E8%B4%AD%E7%89%A9%E8%BD%A6%E8%B4%AD%E4%B9%B0"><span class="toc-number">13.</span> <span class="toc-text">加入购物车 &#x2F; 购买</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E5%AD%97%E6%A1%86%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85"><span class="toc-number">14.</span> <span class="toc-text">数字框组件封装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%A0%E5%85%A5%E8%B4%AD%E7%89%A9%E8%BD%A6-%E5%88%A4%E6%96%AD%E7%99%BB%E5%BD%95%E7%8A%B6%E6%80%81"><span class="toc-number">15.</span> <span class="toc-text">加入购物车 - 判断登录状态</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#thisrouterreplace%E5%92%8Cthisrouterpush%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">16.</span> <span class="toc-text">this.$router.replace 和 this.$router.push 的区别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%A0%E5%85%A5%E8%B4%AD%E7%89%A9%E8%BD%A6-%E5%B0%81%E8%A3%85%E6%8E%A5%E5%8F%A3%E8%BF%9B%E8%A1%8C%E8%AF%B7%E6%B1%82"><span class="toc-number">17.</span> <span class="toc-text">加入购物车 - 封装接口进行请求</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B4%AD%E7%89%A9%E8%BD%A6%E9%A1%B5%E9%9D%A2"><span class="toc-number">18.</span> <span class="toc-text">购物车页面</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E9%A1%B5%E9%9D%A2"><span class="toc-number">18.1.</span> <span class="toc-text">静态页面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%84%E5%BB%BAvuex-cart%E6%A8%A1%E5%9D%97"><span class="toc-number">18.2.</span> <span class="toc-text">构建 vuex cart 模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E6%B8%B2%E6%9F%93"><span class="toc-number">18.3.</span> <span class="toc-text">动态渲染</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%81%E8%A3%85getters%E5%AE%9E%E7%8E%B0%E5%8A%A8%E6%80%81%E7%BB%9F%E8%AE%A1"><span class="toc-number">18.4.</span> <span class="toc-text">封装 getters 实现动态统计</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A8%E9%80%89%E5%8F%8D%E9%80%89"><span class="toc-number">18.5.</span> <span class="toc-text">全选反选</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E5%AD%97%E6%A1%86%E4%BF%AE%E6%94%B9%E6%95%B0%E9%87%8F%E5%8A%9F%E8%83%BD"><span class="toc-number">18.6.</span> <span class="toc-text">数字框修改数量功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E8%BE%91%E5%88%87%E6%8D%A2%E7%8A%B6%E6%80%81%E5%88%A0%E9%99%A4%E5%8A%9F%E8%83%BD"><span class="toc-number">18.7.</span> <span class="toc-text">编辑切换状态，删除功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E5%95%86%E5%93%81"><span class="toc-number">18.8.</span> <span class="toc-text">删除商品</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A9%BA%E8%B4%AD%E7%89%A9%E8%BD%A6%E5%A4%84%E7%90%86"><span class="toc-number">18.9.</span> <span class="toc-text">空购物车处理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%B0%E5%9D%80%E7%AE%A1%E7%90%86"><span class="toc-number">19.</span> <span class="toc-text">地址管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE"><span class="toc-number">19.1.</span> <span class="toc-text">配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%B0%E5%9D%80%E5%88%97%E8%A1%A8"><span class="toc-number">19.2.</span> <span class="toc-text">地址列表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%B0%E5%9D%80%E7%BC%96%E8%BE%91"><span class="toc-number">19.3.</span> <span class="toc-text">地址编辑</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%A2%E5%8D%95%E7%BB%93%E7%AE%97%E5%8F%B0"><span class="toc-number">20.</span> <span class="toc-text">订单结算台</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E7%BB%93%E6%9E%84-2"><span class="toc-number">20.1.</span> <span class="toc-text">静态结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B8%B2%E6%9F%93-2"><span class="toc-number">20.2.</span> <span class="toc-text">渲染</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%A2%E5%8D%95%E7%BB%93%E7%AE%97"><span class="toc-number">21.</span> <span class="toc-text">订单结算</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0unfinished"><span class="toc-number">22.</span> <span class="toc-text">文件上传 ——unfinished</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%BE%E7%89%87%E4%B8%8A%E4%BC%A0"><span class="toc-number">22.1.</span> <span class="toc-text">图片上传</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85vue-cropper"><span class="toc-number">22.1.1.</span> <span class="toc-text">安装 vue-cropper</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%A8%E7%BB%84%E4%BB%B6%E4%B8%AD%E4%BD%BF%E7%94%A8-vue-cropper"><span class="toc-number">22.1.2.</span> <span class="toc-text">在组件中使用 vue-cropper</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%93%E5%8C%85%E4%BC%98%E5%8C%96"><span class="toc-number">23.</span> <span class="toc-text">打包优化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%98%E5%8C%96%E8%AE%BF%E9%97%AE%E8%B7%AF%E5%BE%84"><span class="toc-number">23.1.</span> <span class="toc-text">优化访问路径</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%87%92%E5%8A%A0%E8%BD%BD"><span class="toc-number">23.2.</span> <span class="toc-text">懒加载</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2024 - 2025 By 4rozeN</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.3.5</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"><script>(async()=>{window.katex_js_css||(window.katex_js_css=!0,await btf.getCSS("https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css"),await btf.getScript("https://cdn.jsdelivr.net/npm/katex/dist/contrib/copy-tex.min.js")),document.querySelectorAll("#article-container .katex").forEach(t=>t.classList.add("katex-show"))})()</script><script>(()=>{const t="shuoshuo"===GLOBAL_CONFIG_SITE.pageType,e=t=>"dark"===t?"dark":"light",s=(s=document,a)=>{const o=t?{"data-mapping":"specific","data-term":a}:{"data-mapping":"pathname"},n=(t=>{const e=document.createElement("script");return Object.entries(t).forEach(([t,s])=>{e.setAttribute(t,s)}),e})({src:"https://giscus.app/client.js","data-repo":"4rozeN/4rozeN.github.io","data-repo-id":"R_kgDOMN8x0A","data-category-id":"DIC_kwDOMN8x0M4CjtvK","data-theme":e(document.documentElement.getAttribute("data-theme")),"data-reactions-enabled":"1",crossorigin:"anonymous",async:!0,...o});s.querySelector("#giscus-wrap").appendChild(n),t&&(window.shuoshuoComment.destroyGiscus=()=>{s.children.length&&(s.innerHTML="",s.classList.add("no-comment"))})};btf.addGlobalFn("themeChange",t=>{const s=document.querySelector("#giscus-wrap iframe");if(s){const a={giscus:{setConfig:{theme:e(t)}}};s.contentWindow.postMessage(a,"https://giscus.app")}},"giscus"),t?window.shuoshuoComment={loadComment:s}:s()})()</script></div><script src="/js/watch.js"></script><script id="canvas_nest" defer color="0,0,255" opacity="0.7" zindex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script src="https://cdn.jsdelivr.net/npm/hexo-shiki-plugin@latest/lib/codeblock.js"></script><script>const CODE_CONFIG={beautify:!0,highlightCopy:!0,highlightLang:!0,highlightHeightLimit:360,isHighlightShrink:!1,copy:{success:"复制成功",error:"复制失败",noSupport:"浏览器不支持复制功能"}};console.log("%c hexo-shiki-plugin %c v1.0.27 %c https://github.com/nova1751/hexo-shiki-plugin","color: #fff; background: #5f5f5f","color: #fff; background: #80c8f8","")</script></body></html>